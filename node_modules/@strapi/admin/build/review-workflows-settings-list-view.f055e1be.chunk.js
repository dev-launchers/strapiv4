"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[349],{17379:function(D,d,e){e.d(d,{r:function(){return h}});var t=e(32735),n=e(72850),r=e(60216),f=e.n(r),T=e(74506);function m(E,i,o){if(!E||!i)return{display:"none"};const{x:s,y:a}=o;return{transform:`translate(${s}px, ${a}px)`}}function h({renderItem:E}){const{itemType:i,isDragging:o,item:s,initialOffset:a,currentOffset:y,mouseOffset:p}=(0,T.useDragLayer)(w=>({item:w.getItem(),itemType:w.getItemType(),initialOffset:w.getInitialSourceClientOffset(),currentOffset:w.getSourceClientOffset(),isDragging:w.isDragging(),mouseOffset:w.getClientOffset()}));return o?t.createElement(n.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},t.createElement(n.x,{style:m(a,y,p)},E({type:i,item:s}))):null}h.propTypes={renderItem:f().func.isRequired}},50337:function(D,d,e){e.d(d,{pl:function(){return i},aY:function(){return W},q5:function(){return p.q}});var t=e(32735),n=e(19565),r=e(86209),f=e(97889);const T={data:[],isLoading:!0};var h=(L,A)=>(0,f.ZP)(L,v=>{switch(A.type){case"GET_DATA_SUCCEEDED":{v.data=A.data,v.isLoading=!1;break}case"GET_DATA_ERROR":{v.isLoading=!1;break}default:return v}}),i=({ssoEnabled:L})=>{const[A,v]=(0,t.useReducer)(h,T),l=(0,n.lm)(),{get:c}=(0,n.kY)();return(0,t.useEffect)(()=>{(async()=>{try{if(!L){v({type:"GET_DATA_SUCCEEDED",data:[]});return}const{data:C}=await c((0,r.IF)("providers"));v({type:"GET_DATA_SUCCEEDED",data:C})}catch(C){console.error(C),v({type:"GET_DATA_ERROR"}),l({type:"warning",message:{id:"notification.error"}})}})()},[c,L,l]),A},o=e(36866),s=e.n(o),a=e(67879),y=e(53038),p=e(53104);const w="strapi-notification-seat-limit",I="https://cloud.strapi.io/profile/billing",P="https://strapi.io/billing/request-seats";var W=()=>{const{formatMessage:L}=(0,a.Z)();let{license:A,isError:v,isLoading:l}=(0,p.q)();const c=(0,n.lm)(),{pathname:O}=(0,y.TH)(),{enforcementUserCount:C,permittedSeats:S,licenseLimitStatus:R,isHostedOnStrapiCloud:N}=A;(0,t.useEffect)(()=>{if(v||l)return;const Z=!s()(S)&&!window.sessionStorage.getItem(`${w}-${O}`)&&(R==="AT_LIMIT"||R==="OVER_LIMIT");let B;R==="OVER_LIMIT"?B="warning":R==="AT_LIMIT"&&(B="softWarning"),Z&&c({type:B,message:L({id:"notification.ee.warning.over-.message",defaultMessage:"Add seats to {licenseLimitStatus, select, OVER_LIMIT {invite} other {re-enable}} Users. If you already did it but it's not reflected in Strapi yet, make sure to restart your app."},{licenseLimitStatus:R}),title:L({id:"notification.ee.warning.at-seat-limit.title",defaultMessage:"{licenseLimitStatus, select, OVER_LIMIT {Over} other {At}} seat limit ({enforcementUserCount}/{permittedSeats})"},{licenseLimitStatus:R,enforcementUserCount:C,permittedSeats:S}),link:{url:N?I:P,label:L({id:"notification.ee.warning.seat-limit.link",defaultMessage:"{isHostedOnStrapiCloud, select, true {ADD SEATS} other {CONTACT SALES}}"},{isHostedOnStrapiCloud:N})},blockTransition:!0,onClose(){window.sessionStorage.setItem(`${w}-${O}`,!0)}})},[c,A,O,L,l,S,R,C,N,v])}},53104:function(D,d,e){e.d(d,{q:function(){return f}});var t=e(32735),n=e(19565),r=e(20108);function f({enabled:T}={enabled:!0}){const{get:m}=(0,n.kY)(),{data:h,isError:E,isLoading:i}=(0,r.useQuery)(["ee","license-limit-info"],async()=>{const{data:{data:a}}=await m("/admin/license-limit-information");return a},{enabled:T}),o=h??{},s=t.useCallback(a=>(o?.features??[]).find(p=>p.name===a)?.options??{},[o?.features]);return{license:o,getFeature:s,isError:E,isLoading:i}}},27187:function(D,d,e){e.d(d,{eJ:function(){return v},lx:function(){return L},h4:function(){return l},fC:function(){return A}});var t=e(32735),n=e(96709),r=e(27649),f=e(17e3),T=e(82055),m=e(19565),h=e(29439),E=e(67879),i=e(17379),o=e(2121),s=e(87933),a=e(49372),y=e(16899),p=e(60216),w=e.n(p),I=e(8471);const P=(0,I.ZP)(s.k)`
  svg path {
    fill: ${({theme:c})=>c.colors.neutral600};
  }
`;function M({name:c}){return t.createElement(s.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,m.Q1)(300)},t.createElement(P,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6},t.createElement(y.Z,{width:`${8/16}rem`})),t.createElement(a.Z,{fontWeight:"bold"},c))}M.propTypes={name:w().string.isRequired};function W({type:c,item:O}){switch(c){case o.uL.STAGE:return t.createElement(M,{...O});default:return null}}function L(){return t.createElement(i.r,{renderItem:W})}function A({children:c}){return t.createElement(n.A,null,t.createElement(r.o,{tabIndex:-1},t.createElement(f.D,null,c)))}function v({href:c}){const{formatMessage:O}=(0,E.Z)();return t.createElement(m.rU,{startIcon:t.createElement(h.Z,null),to:c},O({id:"global.back",defaultMessage:"Back"}))}function l({title:c,subtitle:O,navigationAction:C,primaryAction:S}){return t.createElement(t.Fragment,null,t.createElement(m.SL,{name:c}),t.createElement(T.T,{navigationAction:C,primaryAction:S,title:c,subtitle:O}))}},90562:function(D,d,e){e.d(d,{uT:function(){return W},fC:function(){return v},Dx:function(){return M}});var t=e(32735),n=e(49372),r=e(87933),f=e(85025),T=e(31600),m=e(72850),h=e(50563),E=e(95489),i=e(35331),o=e(60216),s=e.n(o),a=e(67879),y=e(8471),p=e.p+"0cd5f8915b265d5b1856.png";const w="limits-title",I="https://strapi.io/pricing-cloud",P="https://strapi.io/contact-sales";function M({children:l}){return t.createElement(n.Z,{variant:"alpha",id:w},l)}M.propTypes={children:s().node.isRequired};function W({children:l}){return t.createElement(n.Z,{variant:"omega"},l)}W.propTypes={children:s().node.isRequired};function L(){const{formatMessage:l}=(0,a.Z)();return t.createElement(r.k,{gap:2,paddingTop:4},t.createElement(E.Q,{variant:"default",isExternal:!0,href:I},l({id:"Settings.review-workflows.limit.cta.learn",defaultMessage:"Learn more"})),t.createElement(E.Q,{variant:"tertiary",isExternal:!0,href:P},l({id:"Settings.review-workflows.limit.cta.sales",defaultMessage:"Contact Sales"})))}const A=y.ZP.img`
  // Margin top|right reverse the padding of ModalBody
  margin-right: ${({theme:l})=>`-${l.spaces[7]}`};
  margin-top: ${({theme:l})=>`-${l.spaces[7]}`};
  width: 360px;
`;function v({children:l,isOpen:c,onClose:O}){const{formatMessage:C}=(0,a.Z)();return c?t.createElement(f.P,{labelledBy:w},t.createElement(T.f,null,t.createElement(r.k,{gap:2,paddingLeft:7,position:"relative"},t.createElement(r.k,{alignItems:"start",direction:"column",gap:2,width:"60%"},l,t.createElement(L,null)),t.createElement(r.k,{justifyContent:"end",height:"100%",width:"40%"},t.createElement(A,{src:p,"aria-hidden":!0,alt:"",loading:"lazy"}),t.createElement(m.x,{display:"flex",position:"absolute",right:0,top:0},t.createElement(h.h,{icon:t.createElement(i.Z,null),"aria-label":C({id:"global.close",defaultMessage:"Close"}),onClick:O})))))):null}v.defaultProps={isOpen:!1},v.propTypes={children:s().node.isRequired,isOpen:s().bool,onClose:s().func.isRequired}},2121:function(D,d,e){e.d(d,{$k:function(){return E},Ef:function(){return y},FT:function(){return s},Nj:function(){return h},Ot:function(){return m},VS:function(){return i},_X:function(){return p},gu:function(){return r},lv:function(){return o},qZ:function(){return f},sN:function(){return n},uL:function(){return a},x4:function(){return T}});var t=e(12301);const n="settings_review-workflows",r="Settings/Review_Workflows/RESET_WORKFLOW",f="Settings/Review_Workflows/SET_WORKFLOW",T="Settings/Review_Workflows/WORKFLOW_DELETE_STAGE",m="Settings/Review_Workflows/WORKFLOW_ADD_STAGE",h="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE",E="Settings/Review_Workflows/WORKFLOW_UPDATE_STAGE_POSITION",i="Settings/Review_Workflows/WORKFLOW_UPDATE",o={primary600:"Blue",primary200:"Lilac",alternative600:"Violet",alternative200:"Lavender",success600:"Green",success200:"Pale Green",danger500:"Cherry",danger200:"Pink",warning600:"Orange",warning200:"Yellow",secondary600:"Teal",secondary200:"Baby Blue",neutral400:"Gray",neutral0:"White"},s=t.W.colors.primary600,a={STAGE:"stage"},y="numberOfWorkflows",p="stagesPerWorkflow"},32329:function(D,d,e){e.d(d,{n:function(){return r}});var t=e(19565),n=e(20108);function r(f={}){const{get:T}=(0,t.kY)(),{id:m="",...h}=f,E={populate:"stages"},{data:i,isLoading:o,status:s,refetch:a}=(0,n.useQuery)(["review-workflows","workflows",m],async()=>(await T(`/admin/review-workflows/workflows/${m}`,{params:{...E,...h}})).data);let y=[];return m&&i?.data?y=[i.data]:Array.isArray(i?.data)&&(y=i.data),{meta:i?.meta??{},workflows:y,isLoading:o,status:s,refetch:a}}},32033:function(D,d,e){e.r(d),e.d(d,{default:function(){return B}});var t=e(32735),n=e(19565),r=e(15062),f=e(30305),T=e(87933),m=e(23866),h=e(56755),E=e(73269),i=e(33827),o=e(94547),s=e(19786),a=e(49372),y=e(3685),p=e(35658),w=e(50563),I=e(19406),P=e(68625),M=e(4038),W=e(67879),L=e(20108),A=e(53038),v=e(8471),l=e(90769),c=e(50337),O=e(27187),C=e(90562),S=e(2121),R=e(32329);const N=(0,v.ZP)(n.rU)`
  align-items: center;
  height: ${(0,n.Q1)(32)};
  display: flex;
  justify-content: center;
  padding: ${({theme:u})=>`${u.spaces[2]}}`};
  width: ${(0,n.Q1)(32)};

  svg {
    height: ${(0,n.Q1)(12)};
    width: ${(0,n.Q1)(12)};

    path {
      fill: ${({theme:u})=>u.colors.neutral500};
    }
  }

  &:hover,
  &:focus {
    svg {
      path {
        fill: ${({theme:u})=>u.colors.neutral800};
      }
    }
  }
`;function Z(){const{formatMessage:u}=(0,W.Z)(),{push:K}=(0,A.k6)(),{collectionTypes:J,singleTypes:b,isLoading:q}=(0,l.G)(),{meta:$,workflows:H,isLoading:F,refetch:_}=(0,R.n)(),[Q,G]=t.useState(null),[ee,k]=t.useState(!1),{del:te}=(0,n.kY)(),{formatAPIError:ne}=(0,n.So)(),V=(0,n.lm)(),{getFeature:se,isLoading:Y}=(0,c.q5)(),{trackUsage:X}=(0,n.rS)(),oe=(0,r.v9)(f._),{allowedActions:{canCreate:z,canDelete:ae}}=(0,n.ss)(oe.settings["review-workflows"]),x=se("review-workflows"),{mutateAsync:re,isLoading:ie}=(0,L.useMutation)(async({workflowId:g,stages:U})=>{const{data:{data:j}}=await te(`/admin/review-workflows/workflows/${g}`,{data:U});return j},{onSuccess(){V({type:"success",message:{id:"notification.success.deleted",defaultMessage:"Deleted"}})}}),le=g=>[...J,...b].find(j=>j.uid===g).info.displayName,ce=g=>{G(g)},ue=()=>{G(null)},de=async()=>{try{const g=await re({workflowId:Q});return await _(),G(null),g}catch(g){return V({type:"warning",message:ne(g)}),null}};return t.useEffect(()=>{!F&&!Y&&x?.[S.Ef]&&$?.workflowCount>parseInt(x[S.Ef],10)&&k(!0)},[Y,F,x,$?.workflowCount,$.workflowsTotal]),t.createElement(t.Fragment,null,t.createElement(O.h4,{primaryAction:t.createElement(n.Qj,{disabled:!z,startIcon:t.createElement(I.Z,null),size:"S",to:"/settings/review-workflows/create",onClick:g=>{x?.[S.Ef]&&$?.workflowCount>=parseInt(x[S.Ef],10)?(g.preventDefault(),k(!0)):X("willCreateWorkflow")}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),subtitle:u({id:"Settings.review-workflows.list.page.subtitle",defaultMessage:"Manage your content review process"}),title:u({id:"Settings.review-workflows.list.page.title",defaultMessage:"Review Workflows"})}),t.createElement(O.fC,null,F||q?t.createElement(T.k,{justifyContent:"center"},t.createElement(m.a,null,u({id:"Settings.review-workflows.page.list.isLoading",defaultMessage:"Workflows are loading"}))):t.createElement(h.i,{colCount:3,footer:z&&t.createElement(E.c,{icon:t.createElement(I.Z,null),onClick:()=>{x?.[S.Ef]&&$?.workflowCount>=parseInt(x[S.Ef],10)?k(!0):(K("/settings/review-workflows/create"),X("willCreateWorkflow"))}},u({id:"Settings.review-workflows.list.page.create",defaultMessage:"Create new workflow"})),rowCount:1},t.createElement(i.h,null,t.createElement(o.Tr,null,t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.name.title",defaultMessage:"Name"}))),t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.stages.title",defaultMessage:"Stages"}))),t.createElement(s.Th,null,t.createElement(a.Z,{variant:"sigma"},u({id:"Settings.review-workflows.list.page.list.column.contentTypes.title",defaultMessage:"Content Types"}))),t.createElement(s.Th,null,t.createElement(y.T,null,u({id:"Settings.review-workflows.list.page.list.column.actions.title",defaultMessage:"Actions"}))))),t.createElement(p.p,null,H.map(g=>t.createElement(o.Tr,{...(0,n.X7)({fn(U){U.target.nodeName!=="BUTTON"&&K(`/settings/review-workflows/${g.id}`)}}),key:`workflow-${g.id}`},t.createElement(s.Td,{width:(0,n.Q1)(250)},t.createElement(a.Z,{textColor:"neutral800",fontWeight:"bold",ellipsis:!0},g.name)),t.createElement(s.Td,null,t.createElement(a.Z,{textColor:"neutral800"},g.stages.length)),t.createElement(s.Td,null,t.createElement(a.Z,{textColor:"neutral800"},(g?.contentTypes??[]).map(le).join(", "))),t.createElement(s.Td,null,t.createElement(T.k,{alignItems:"center",justifyContent:"end"},t.createElement(N,{to:`/settings/review-workflows/${g.id}`,"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.edit.label",defaultMessage:"Edit {name}"},{name:g.name})},t.createElement(P.Z,null)),H.length>1&&ae&&t.createElement(w.h,{"aria-label":u({id:"Settings.review-workflows.list.page.list.column.actions.delete.label",defaultMessage:"Delete {name}"},{name:"Default workflow"}),icon:t.createElement(M.Z,null),noBorder:!0,onClick:()=>{ce(g.id)}}))))))),t.createElement(n.QH,{bodyText:{id:"Settings.review-workflows.list.page.delete.confirm.body",defaultMessage:"If you remove this worfklow, all stage-related information will be removed for this content-type. Are you sure you want to remove it?"},isConfirmButtonLoading:ie,isOpen:!!Q,onToggleDialog:ue,onConfirm:de}),t.createElement(C.fC,{isOpen:ee,onClose:()=>k(!1)},t.createElement(C.Dx,null,u({id:"Settings.review-workflows.list.page.workflows.limit.title",defaultMessage:"You\u2019ve reached the limit of workflows in your plan"})),t.createElement(C.uT,null,u({id:"Settings.review-workflows.list.page.workflows.limit.body",defaultMessage:"Delete a workflow or contact Sales to enable more workflows."})))))}function B(){const u=(0,r.v9)(f._);return t.createElement(n.O4,{permissions:u.settings["review-workflows"].main},t.createElement(Z,null))}},73269:function(D,d,e){e.d(d,{c:function(){return i}});var t=e(74512),n=e(8471),r=e(72850),f=e(9026),T=e(87933),m=e(49372);const h=(0,n.ZP)(r.x)`
  height: ${24/16}rem;
  width: ${24/16}rem;
  border-radius: 50%;
  display: flex;
  justify-content: center;
  align-items: center;

  svg {
    height: ${10/16}rem;
    width: ${10/16}rem;
  }

  svg path {
    fill: ${({theme:o})=>o.colors.primary600};
  }
`,E=(0,n.ZP)(r.x)`
  border-radius: 0 0 ${({theme:o})=>o.borderRadius} ${({theme:o})=>o.borderRadius};
  display: block;
  width: 100%;
  border: none;
`,i=({children:o,icon:s,...a})=>(0,t.jsxs)("div",{children:[(0,t.jsx)(f.i,{}),(0,t.jsx)(E,{as:"button",background:"primary100",padding:5,...a,children:(0,t.jsxs)(T.k,{children:[(0,t.jsx)(h,{"aria-hidden":!0,background:"primary200",children:s}),(0,t.jsx)(r.x,{paddingLeft:3,children:(0,t.jsx)(m.Z,{variant:"pi",fontWeight:"bold",textColor:"primary600",children:o})})]})})]})},29439:function(D,d,e){e.d(d,{Z:function(){return r}});var t=e(74512);const n=f=>(0,t.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...f,children:(0,t.jsx)("path",{fill:"#212134",d:"M24 13.3a.2.2 0 0 1-.2.2H5.74l8.239 8.239a.2.2 0 0 1 0 .282L12.14 23.86a.2.2 0 0 1-.282 0L.14 12.14a.2.2 0 0 1 0-.282L11.86.14a.2.2 0 0 1 .282 0L13.98 1.98a.2.2 0 0 1 0 .282L5.74 10.5H23.8c.11 0 .2.09.2.2v2.6Z"})}),r=n}}]);

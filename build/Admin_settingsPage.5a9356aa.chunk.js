"use strict";(self.webpackChunkdevlaunchers_strapiv4=self.webpackChunkdevlaunchers_strapiv4||[]).push([[5895],{93500:(me,D,a)=>{a.r(D),a.d(D,{SettingsPage:()=>_t,default:()=>Rn});var e=a(67294),C=a(68547),r=a(49656),te=a(35395),V=a(97132),Le=a(15482),Ee=a(59942),ge=a(8610),je=a(23724),Y=a(80117),F=a(94117),T=a(39272),Z=a(33483),ce=a(9524),U=a(64459),q=a(10407),Qe=a(74657),He=a.n(Qe),ke=a(22754),be=a.n(ke),K=a(45697),y=a.n(K),de=a(27987),Ve=a(49549),Ne=a(89326),ae=a.n(Ne),ne=a(79274),fe=a.n(ne),We=a(73749);const Xe={currentStep:void 0},$e=(u=Xe,l)=>(0,We.default)(u,d=>{switch(l.type){case"GO_TO":{d.currentStep=l.to;break}default:return d}});var Ae=a(68991);const Ze={localImage:void 0},qe=(u=Ze,l)=>(0,We.default)(u,d=>{switch(l.type){case"SET_LOCAL_IMAGE":{d.localImage=l.value;break}default:return d}}),R=({onChangeLogo:u,customLogo:l,goTo:d,Component:f,modalTitle:b,next:p,prev:M,currentStep:O})=>{const[{localImage:v},x]=(0,e.useReducer)(qe,Ze),{formatMessage:Se}=(0,V.useIntl)(),pe=yt=>{x({type:"SET_LOCAL_IMAGE",value:yt})},nt=()=>{d(null)};return O?e.createElement(Ae.ModalLayout,{labelledBy:"modal",onClose:nt},e.createElement(Ae.ModalHeader,null,e.createElement(Z.Typography,{fontWeight:"bold",as:"h2",id:"modal"},Se(b))),e.createElement(f,{setLocalImage:pe,goTo:d,next:p,prev:M,onClose:nt,asset:v||l,onChangeLogo:u})):null};R.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},R.propTypes={Component:y().elementType,currentStep:y().string,customLogo:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}),goTo:y().func.isRequired,modalTitle:y().shape({id:y().string,defaultMessage:y().string}),next:y().string,onChangeLogo:y().func.isRequired,prev:y().string};const k=R,N=750,_=100,ue=["image/jpeg","image/png","image/svg+xml"];var W=a(1738),Q=a(97833),oe=a(78384),G=a(40264),ie=a(33699),xe=a(16572),Ge=a(96053),ze=a.n(Ge),it=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const _e={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},B={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},z=u=>new Promise(l=>{const d=new FileReader;d.onload=()=>{const f=new Image;f.onload=function(){l({width:f.width,height:f.height})},f.src=d.result},d.readAsDataURL(u)}),H=(u,l)=>({ext:u.name.split(".").pop(),size:u.size/1e3,name:u.name,url:URL.createObjectURL(u),rawFile:u,width:l.width,height:l.height}),h=u=>it(void 0,null,function*(){let l;if(!ue.includes(u.type))throw l=new Error("File format"),l.displayMessage=_e,l;const f=yield z(u);if(!(f.width<=N&&f.height<=N))throw l=new Error("File sizing"),l.displayMessage=B,l;const p=H(u,f);if(!(p.size<=_))throw l=new Error("File sizing"),l.displayMessage=B,l;return p});var Ie=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const et=(0,oe.default)(xe.FieldInput)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,Ye=({setLocalImage:u,goTo:l,next:d,onClose:f})=>{const{formatMessage:b}=(0,V.useIntl)(),[p,M]=(0,e.useState)(!1),[O,v]=(0,e.useState)(void 0),x=(0,e.useRef)(null),Se=()=>M(!0),pe=()=>M(!1),nt=st=>{st.preventDefault(),x.current.click()},yt=()=>Ie(void 0,null,function*(){pe();const st=x.current.files[0];if(!!st)try{const rt=yield h(st);u(rt),l(d)}catch(rt){if(rt.displayMessage)v(b(rt.displayMessage,{size:_,dimension:N})),x.current.focus();else throw rt}}),at=()=>p?"primary500":O?"danger600":"neutral300";return e.createElement(e.Fragment,null,e.createElement("form",null,e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(xe.Field,{name:"logo-upload",error:O},e.createElement("label",{htmlFor:"logo-upload"},e.createElement(ce.Stack,{spacing:2},e.createElement(G.Flex,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:p?"primary100":"neutral100",borderColor:at(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:Se,onDragLeave:pe},e.createElement(ie.Icon,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:ze(),"aria-hidden":!0}),e.createElement(F.Box,{paddingTop:3,paddingBottom:5},e.createElement(Z.Typography,{variant:"delta",as:"span"},b({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"}))),e.createElement(et,{accept:ue,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:yt,ref:x,id:"logo-upload"}),e.createElement(U.Button,{type:"button",onClick:nt},b({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})),e.createElement(F.Box,{paddingTop:6},e.createElement(Z.Typography,{variant:"pi",textColor:"neutral600"},b({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:_,dimension:N})))),e.createElement(xe.FieldError,null)))))),e.createElement(Ae.ModalFooter,{startActions:e.createElement(U.Button,{onClick:f,variant:"tertiary"},b({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"}))}))};Ye.defaultProps={next:null},Ye.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const J=Ye;var he=a(99136),Pe=a(9669),tn=a.n(Pe),nn=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const Bt=u=>nn(void 0,null,function*(){try{const l=yield tn().get(u,{responseType:"blob",timeout:8e3});return new File([l.data],l.config.url,{type:l.headers["content-type"]})}catch(l){throw l.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},l}});var wt=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const Et=({goTo:u,next:l,onClose:d,setLocalImage:f})=>{const{formatMessage:b}=(0,V.useIntl)(),[p,M]=(0,e.useState)(""),[O,v]=(0,e.useState)(null),x=pe=>{M(pe.target.value)},Se=()=>wt(void 0,null,function*(){try{const pe=yield Bt(p),nt=yield h(pe);f(nt),u(l)}catch(pe){if(pe.displayMessage)v(b(pe.displayMessage,{size:_,dimension:N}));else throw pe}});return e.createElement("form",{onSubmit:pe=>{pe.preventDefault(),Se()}},e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(he.TextInput,{label:b({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:O,onChange:x,value:p,name:"logo-url"})),e.createElement(Ae.ModalFooter,{startActions:e.createElement(U.Button,{onClick:d,variant:"tertiary"},b({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(U.Button,{type:"submit"},b({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"}))}))};Et.defaultProps={next:null},Et.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const $n=Et,ut=({setLocalImage:u,goTo:l,next:d,onClose:f})=>{const{formatMessage:b}=(0,V.useIntl)();return e.createElement(W.TabGroup,{label:b({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple"},e.createElement(F.Box,{paddingLeft:8,paddingRight:8},e.createElement(W.Tabs,null,e.createElement(W.Tab,null,b({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})),e.createElement(W.Tab,null,b({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"}))),e.createElement(Q.Divider,null)),e.createElement(W.TabPanels,null,e.createElement(W.TabPanel,null,e.createElement(J,{onClose:f,setLocalImage:u,goTo:l,next:d})),e.createElement(W.TabPanel,null,e.createElement($n,{onClose:f,setLocalImage:u,goTo:l,next:d}))))};ut.defaultProps={next:null},ut.propTypes={goTo:y().func.isRequired,next:y().string,onClose:y().func.isRequired,setLocalImage:y().func.isRequired};const Un=ut;var ot=a(14621);const jt=({asset:u})=>{const{formatMessage:l}=(0,V.useIntl)();return e.createElement(ot.Card,null,e.createElement(ot.CardHeader,null,e.createElement(ot.CardAsset,{size:"S",src:u.url})),e.createElement(ot.CardBody,null,e.createElement(ot.CardContent,null,e.createElement(ot.CardTitle,null,u.name),e.createElement(ot.CardSubtitle,null,`${u.ext.toUpperCase()} - ${u.width}\u2715${u.height}`)),e.createElement(ot.CardBadge,null,l({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"}))))};jt.propTypes={asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired};const Nt=jt,Tt=({onClose:u,asset:l,prev:d,next:f,goTo:b,setLocalImage:p,onChangeLogo:M})=>{const{formatMessage:O}=(0,V.useIntl)(),v=()=>{p(void 0),b(d)},x=()=>{M(l),b(f)};return e.createElement(e.Fragment,null,e.createElement(F.Box,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6},e.createElement(G.Flex,{justifyContent:"space-between",paddingBottom:6},e.createElement(G.Flex,{direction:"column",alignItems:"flex-start"},e.createElement(Z.Typography,{variant:"pi",fontWeight:"bold"},O({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})),e.createElement(Z.Typography,{variant:"pi",textColor:"neutral500"},O({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"}))),e.createElement(U.Button,{onClick:v,variant:"secondary"},O({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"}))),e.createElement(F.Box,{maxWidth:(0,C.pxToRem)(180)},e.createElement(Nt,{asset:l}))),e.createElement(Ae.ModalFooter,{startActions:e.createElement(U.Button,{onClick:u,variant:"tertiary"},O({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(U.Button,{onClick:x},O({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"}))}))};Tt.defaultProps={next:null,prev:null},Tt.propTypes={goTo:y().func.isRequired,asset:y().shape({name:y().string,url:y().string,width:y().number,height:y().number,ext:y().string}).isRequired,next:y().string,onClose:y().func.isRequired,onChangeLogo:y().func.isRequired,prev:y().string,setLocalImage:y().func.isRequired};const sn={upload:{Component:Un,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:Tt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},pt=({customLogo:u,defaultLogo:l,onChangeLogo:d,onResetMenuLogo:f})=>{const[{currentStep:b},p]=(0,e.useReducer)($e,Xe),{Component:M,next:O,prev:v,modalTitle:x}=sn[b]||{},{formatMessage:Se}=(0,V.useIntl)(),pe=nt=>{p({type:"GO_TO",to:nt})};return e.createElement(e.Fragment,null,e.createElement(de.CarouselInput,{label:Se({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"}),selectedSlide:0,hint:Se({id:"Settings.application.customization.carousel-hint",defaultMessage:"Change the admin panel logo (Max dimension: {dimension}x{dimension}, Max file size: {size}KB)"},{size:_,dimension:N}),previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:(u==null?void 0:u.name)||"logo.png",actions:e.createElement(de.CarouselActions,null,e.createElement(Ve.IconButton,{onClick:()=>pe(u?"pending":"upload"),label:Se({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:e.createElement(ae(),null)}),u&&e.createElement(Ve.IconButton,{onClick:f,label:Se({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:e.createElement(fe(),null)}))},e.createElement(de.CarouselSlide,{label:Se({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"})},e.createElement(F.Box,{maxHeight:"40%",maxWidth:"40%",as:"img",src:(u==null?void 0:u.url)||l,alt:Se({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})}))),e.createElement(k,{Component:M,currentStep:b,onChangeLogo:d,customLogo:u,goTo:pe,next:O,prev:v,modalTitle:x}))};pt.defaultProps={customLogo:null},pt.propTypes={customLogo:y().shape({url:y().string,name:y().string}),defaultLogo:y().string.isRequired,onChangeLogo:y().func.isRequired,onResetMenuLogo:y().func.isRequired};const Wt=pt,bt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}}},Vn=(u=bt,l)=>(0,We.default)(u,d=>{switch(l.type){case"SET_CUSTOM_MENU_LOGO":{d.menuLogo.display=l.value,d.menuLogo.submit.rawFile=l.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{d.menuLogo.display=null,d.menuLogo.submit={rawFile:null,isReset:!0};break}default:return d}});var At=a(82492),Zn=a.n(At);const Gn=(u,l)=>Zn()(u,{menuLogo:{display:l.menuLogo}}),Ot=(0,e.forwardRef)(({projectSettingsStored:u},l)=>{const{formatMessage:d}=(0,V.useIntl)(),{trackUsage:f}=(0,C.useTracking)(),{logos:{menu:b}}=(0,Ee.um)(),[{menuLogo:p},M]=(0,e.useReducer)(Vn,bt,()=>Gn(bt,u)),O=x=>{M({type:"SET_CUSTOM_MENU_LOGO",value:x})},v=()=>{f("didClickResetLogo"),M({type:"RESET_CUSTOM_MENU_LOGO"})};return(0,e.useImperativeHandle)(l,()=>({getValues:()=>({menuLogo:p.submit})})),e.createElement(F.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(Z.Typography,{variant:"delta",as:"h3"},d({id:"Settings.application.customization",defaultMessage:"Customization"})),e.createElement(T.Grid,{paddingTop:4},e.createElement(T.GridItem,{col:6,s:12},e.createElement(Wt,{onChangeLogo:O,customLogo:p.display,defaultLogo:b.default,onResetMenuLogo:v}))))});Ot.defaultProps={projectSettingsStored:null},Ot.propTypes={projectSettingsStored:y().shape({menuLogo:y().shape({url:y().string,name:y().string})})};const rn=Ot;var $t=a(23998),zn=a(68718),gt=a.n(zn),Kn=Object.defineProperty,ft=Object.defineProperties,Ut=Object.getOwnPropertyDescriptors,Rt=Object.getOwnPropertySymbols,kt=Object.prototype.hasOwnProperty,ln=Object.prototype.propertyIsEnumerable,Dt=(u,l,d)=>l in u?Kn(u,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):u[l]=d,Vt=(u,l)=>{for(var d in l||(l={}))kt.call(l,d)&&Dt(u,d,l[d]);if(Rt)for(var d of Rt(l))ln.call(l,d)&&Dt(u,d,l[d]);return u},Zt=(u,l)=>ft(u,Ut(l));const xt=u=>gt()(u,(l,d,f)=>{d&&d.url?l[f]=Zt(Vt({},d),{url:(0,C.prefixFileUrlWithBackendUrl)(d.url)}):l[f]=d},{});var Gt=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const Xn=()=>Gt(void 0,null,function*(){const{data:u}=yield $t.be.get("/admin/project-settings");return xt(u)}),cn=u=>Gt(void 0,null,function*(){const{data:l}=yield $t.be.post("/admin/project-settings",u);return xt(l)}),un=u=>{const l=new FormData;return Object.entries(u).forEach(([d,f])=>{f&&f.rawFile instanceof File&&l.append(d,f.rawFile),f&&f.isReset&&l.append(d,null)}),l};var zt=(u,l,d)=>new Promise((f,b)=>{var p=v=>{try{O(d.next(v))}catch(x){b(x)}},M=v=>{try{O(d.throw(v))}catch(x){b(x)}},O=v=>v.done?f(v.value):Promise.resolve(v.value).then(p,M);O((d=d.apply(u,l)).next())});const pn=[{action:"admin::project-settings.update",subject:null}],Qn=()=>{const u=(0,e.useRef)(),l=(0,C.useNotification)(),{trackUsage:d}=(0,C.useTracking)(),{formatMessage:f}=(0,V.useIntl)(),b=(0,je.useQueryClient)();(0,C.useFocusWhenNavigate)();const p=(0,C.useAppInfos)(),{shouldUpdateStrapi:M,latestStrapiReleaseTag:O,strapiVersion:v}=p,{updateProjectSettings:x}=(0,Ee.um)(),{data:Se}=(0,je.useQuery)("project-settings",Xn),pe=p.communityEdition?"app.components.UpgradePlanModal.text-ce":"app.components.UpgradePlanModal.text-ee",nt=(0,je.useMutation)(at=>cn(at),{onSuccess:at=>zt(void 0,[at],function*({menuLogo:st}){yield b.invalidateQueries("project-settings",{refetchActive:!0}),x({menuLogo:st==null?void 0:st.url})})}),yt=()=>{const at=u.current.getValues(),st=un(at);nt.mutate(st,{onSuccess:()=>{const{menuLogo:rt}=at;rt.rawFile&&d("didChangeLogo")},onError:()=>{l({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}})};return e.createElement(te.Layout,null,e.createElement(C.SettingsPageTitle,{name:"Application"}),e.createElement(Y.Main,null,e.createElement(te.HeaderLayout,{title:f({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:f({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:e.createElement(U.Button,{onClick:yt,startIcon:e.createElement(be(),null)},f({id:"global.save",defaultMessage:"Save"}))}),e.createElement(te.ContentLayout,null,e.createElement(ce.Stack,{spacing:6},e.createElement(F.Box,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7},e.createElement(ce.Stack,{spacing:5},e.createElement(Z.Typography,{variant:"delta",as:"h3"},f({id:"global.details",defaultMessage:"Details"})),e.createElement(T.Grid,{paddingTop:1},e.createElement(T.GridItem,{col:6,s:12},e.createElement(Z.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})),e.createElement(Z.Typography,{as:"p"},"v",v),e.createElement(q.Link,{href:p.communityEdition?"https://discord.strapi.io":"https://support.strapi.io/support/home",isExternal:!0,endIcon:e.createElement(He(),null)},f({id:"Settings.application.get-help",defaultMessage:"Get help"}))),e.createElement(T.GridItem,{col:6,s:12},e.createElement(Z.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.edition-title",defaultMessage:"current plan"})),e.createElement(Z.Typography,{as:"p"},f({id:pe,defaultMessage:`${p.communityEdition?"Community Edition":"Enterprise Edition"}`})))),e.createElement(T.Grid,{paddingTop:1},e.createElement(T.GridItem,{col:6,s:12},M&&e.createElement(q.Link,{href:`https://github.com/strapi/strapi/releases/tag/${O}`,isExternal:!0,endIcon:e.createElement(He(),null)},f({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"}))),e.createElement(T.GridItem,{col:6,s:12},e.createElement(q.Link,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(He(),null)},f({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})))),e.createElement(F.Box,{paddingTop:1},e.createElement(Z.Typography,{variant:"sigma",textColor:"neutral600"},f({id:"Settings.application.node-version",defaultMessage:"node version"})),e.createElement(Z.Typography,{as:"p"},p.nodeVersion)))),Se&&e.createElement(C.CheckPermissions,{permissions:pn},e.createElement(rn,{ref:u,projectSettingsStored:Se}))))))};var Kt=a(94654),mn=a.n(Kt);const gn=u=>mn()(u,d=>d.links).map(d=>(0,ge.ot)(d.Component,d.to,d.exact||!1)),hn=u=>u.filter(l=>!l.links.every(d=>d.isDisplayed===!1));var Ht=a(42982),tt=a(15861),yn=a(64687),ye=a.n(yn),vn=function(){return window&&window.strapi&&window.strapi.isEE?a(26789).Z:a(73871).Z}(),Cn=function(){return window&&window.strapi&&window.strapi.isEE?a(64527).Z:a(85302).Z}(),En=[{Component:function(){return{default:Cn}},to:"/settings/roles",exact:!0},{Component:function(){return{default:vn}},to:"/settings/roles/duplicate/:id",exact:!0},{Component:function(){return{default:vn}},to:"/settings/roles/new",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(2544).then(a.bind(a,92100));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/roles/:id",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(5199).then(a.bind(a,46903));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/users",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(4263).then(a.bind(a,22282));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/users/:id",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,3672));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/webhooks/create",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,Promise.all([a.e(8252),a.e(5162)]).then(a.bind(a,9311));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/webhooks/:id",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(4121).then(a.bind(a,6784));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/webhooks",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(8056).then(a.bind(a,48601));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/api-tokens",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(4299).then(a.bind(a,9683));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/api-tokens/create",exact:!0},{Component:function(){var u=(0,tt.Z)(ye().mark(function d(){var f;return ye().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,a.e(92).then(a.bind(a,28465));case 2:return f=p.sent,p.abrupt("return",f);case 4:case"end":return p.stop()}},d)}));function l(){return u.apply(this,arguments)}return l}(),to:"/settings/api-tokens/:id",exact:!0}];const bn=En;var Xt=function(){return window&&window.strapi&&window.strapi.isEE?a(5420).Z:a(35301).Z}();const Pn=[].concat((0,Ht.Z)(Xt),(0,Ht.Z)(bn));var ht=a(95431),Yt=Object.defineProperty,Sn=Object.defineProperties,Tn=Object.getOwnPropertyDescriptors,Qt=Object.getOwnPropertySymbols,Mt=Object.prototype.hasOwnProperty,An=Object.prototype.propertyIsEnumerable,Lt=(u,l,d)=>l in u?Yt(u,l,{enumerable:!0,configurable:!0,writable:!0,value:d}):u[l]=d,It=(u,l)=>{for(var d in l||(l={}))Mt.call(l,d)&&Lt(u,d,l[d]);if(Qt)for(var d of Qt(l))An.call(l,d)&&Lt(u,d,l[d]);return u},Jt=(u,l)=>Sn(u,Tn(l));const qt=({menu:u})=>{const{formatMessage:l}=(0,V.useIntl)(),f=hn(u).map(p=>Jt(It({},p),{title:p.intlLabel,links:p.links.map(M=>Jt(It({},M),{title:M.intlLabel,name:M.id}))})),b=l({id:"global.settings",defaultMessage:"Settings"});return e.createElement(ht.SubNav,{ariaLabel:b},e.createElement(ht.SubNavHeader,{label:b}),e.createElement(ht.SubNavSections,null,f.map(p=>e.createElement(ht.SubNavSection,{key:p.id,label:l(p.intlLabel)},p.links.map(M=>e.createElement(ht.SubNavLink,{as:r.NavLink,withBullet:M.hasNotification,to:M.to,key:M.id},l(M.intlLabel)))))))};qt.propTypes={menu:y().array.isRequired};const On=qt;function _t(){const{settingId:u}=(0,r.useParams)(),{settings:l}=(0,C.useStrapiApp)(),{formatMessage:d}=(0,V.useIntl)(),{isLoading:f,menu:b}=(0,Ee.Te)(),p=(0,e.useMemo)(()=>(0,ge.WW)(Pn.map(({to:v,Component:x,exact:Se})=>(0,ge.ot)(x,v,Se))),[]),M=gn(l);if(f)return e.createElement(C.LoadingIndicatorPage,null);if(!u)return e.createElement(r.Redirect,{to:"/settings/application-infos"});const O=d({id:"global.settings",defaultMessage:"Settings"});return e.createElement(te.Layout,{sideNav:e.createElement(On,{menu:b})},e.createElement(Le.Helmet,{title:O}),e.createElement(r.Switch,null,e.createElement(r.Route,{path:"/settings/application-infos",component:Qn,exact:!0}),p,M))}const Rn=(0,e.memo)(_t)},73871:(me,D,a)=>{a.d(D,{Z:()=>te});var e=a(67294),C=a(49656);const te=()=>e.createElement(C.Redirect,{to:"/404"})},79578:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},56195:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},35820:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},28472:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},99047:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},21568:(me,D,a)=>{a.d(D,{Z:()=>Ja});var e=a(67294),C=a(45697),r=a.n(C),te=a(68547),V=a(1738),Le=a(18721),Ee=a.n(Le),ge=a(41609),je=a.n(ge),Y=a(97132),F=a(94117),T=a(78384),Z=a(89734),ce=a.n(Z),U=a(70885),q=a(32080),Qe=a.n(q),He=a(80499),ke=a.n(He),be=a(46458),K=a(40264),y=a(27361),de=a.n(y),Ve=a(57557),Ne=a.n(Ve),ae=a(59942),ne=a(17581),fe=a.n(ne),We=a(64459);const Xe=T.default.div`
  position: relative;

  ${({hasConditions:o,disabled:t,theme:n})=>o&&`
    &:before {
      content: '';
      position: absolute;
      top: -3px;
      left: -10px;
      width: 6px;
      height: 6px;
      border-radius: ${20/16}rem;;
      background: ${t?n.colors.neutral100:n.colors.primary600};
    }
  `}
`,Je=({onClick:o,className:t,hasConditions:n,variant:s})=>{const{formatMessage:i}=(0,Y.useIntl)();return e.createElement(Xe,{hasConditions:n,className:t},e.createElement(We.Button,{variant:s,startIcon:e.createElement(fe(),null),onClick:o},i({id:"global.settings",defaultMessage:"Settings"})))};Je.defaultProps={className:null,hasConditions:!1,variant:"tertiary"},Je.propTypes={onClick:r().func.isRequired,className:r().string,hasConditions:r().bool,variant:r().string};const $e=(0,T.default)(Je)``;var Ae=a(97833),Ze=a(9524),re=a(68991),qe=a(44981),R=a(33483),k=a(73749),N=a(7739),_=a.n(N),ue=a(11700),W=a.n(ue),Q=a(4942),oe=a(42982),G=a(2632);const ie=`${120/16}rem`,xe=`${200/16}rem`,Ge=`${53/16}rem`;function ze(o,t){var n=Object.keys(o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(o);t&&(s=s.filter(function(i){return Object.getOwnPropertyDescriptor(o,i).enumerable})),n.push.apply(n,s)}return n}function it(o){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?ze(Object(n),!0).forEach(function(s){(0,Q.Z)(o,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(o,Object.getOwnPropertyDescriptors(n)):ze(Object(n)).forEach(function(s){Object.defineProperty(o,s,Object.getOwnPropertyDescriptor(n,s))})}return o}var _e=function(){return window&&window.strapi&&window.strapi.isEE?a(53273).Z:a(79578).Z}(),B=(0,T.default)(K.Flex).withConfig({displayName:"ActionRow__FlexWrapper",componentId:"sc-1bqpgdl-0"})(["height:",";"],Ge),z=function(t){var n=t.arrayOfOptionsGroupedByCategory,s=t.isFormDisabled,i=t.isGrey,c=t.label,m=t.name,g=t.onChange,E=t.value,P=(0,Y.useIntl)(),S=P.formatMessage,L=n.reduce(function(w,j){var A=(0,U.Z)(j,2),I=A[0],X=A[1],se={label:W()(I),children:X.map(function(Oe){return{label:Oe.displayName,value:Oe.id}})};return[].concat((0,oe.Z)(w),[se])},[]),$=Object.values(E).map(function(w){return Object.entries(w).filter(function(j){var A=(0,U.Z)(j,2),I=A[1];return I}).map(function(j){var A=(0,U.Z)(j,1),I=A[0];return I})}).flat(),ee=function(j){var A=(0,U.Z)(n,1),I=(0,U.Z)(A[0],2),X=I[1],se=X.reduce(function(Oe,ve){return it((0,Q.Z)({},ve.id,j.includes(ve.id)),Oe)},{});g(m,se)};return e.createElement(B,{as:"li",background:i?"neutral100":"neutral0"},e.createElement(K.Flex,{paddingLeft:6,style:{width:180}},e.createElement(R.Typography,{variant:"sigma",textColor:"neutral600"},S({id:"Settings.permissions.conditions.can",defaultMessage:"Can"}),"\xA0"),e.createElement(R.Typography,{variant:"sigma",title:c,textColor:"primary600",ellipsis:!0},S({id:"Settings.roles.form.permissions.".concat(c.toLowerCase()),defaultMessage:c})),e.createElement(R.Typography,{variant:"sigma",textColor:"neutral600"},"\xA0",S({id:"Settings.permissions.conditions.when",defaultMessage:"When"}))),e.createElement(F.Box,{style:{maxWidth:430,width:"100%"}},e.createElement(G.MultiSelectNested,{id:m,customizeContent:function(j){return"".concat(j.length," currently selected")},onChange:ee,value:$,options:L,disabled:s||_e})))};z.propTypes={arrayOfOptionsGroupedByCategory:r().array.isRequired,isFormDisabled:r().bool.isRequired,isGrey:r().bool.isRequired,label:r().string.isRequired,name:r().string.isRequired,value:r().object.isRequired,onChange:r().func.isRequired};const H=z;var h=a(96486);const Ie=(o,t)=>o.reduce((n,s)=>(n[s.id]=(0,h.get)(t,s.id,!1),n),{}),et=(o,t)=>o.reduce((n,s)=>{const[i,c]=s,m=Ie(c,t);return n[i]=m,n},{}),J=(o,t,n)=>o.reduce((s,i)=>{const c=(0,h.get)(t,[...i.pathToConditionsObject,"conditions"],{}),m=et(n,c);return s[i.pathToConditionsObject.join("..")]=m,s},{});var he=Object.defineProperty,Pe=Object.getOwnPropertySymbols,tn=Object.prototype.hasOwnProperty,nn=Object.prototype.propertyIsEnumerable,on=(o,t,n)=>t in o?he(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Bt=(o,t)=>{for(var n in t||(t={}))tn.call(t,n)&&on(o,n,t[n]);if(Pe)for(var n of Pe(t))nn.call(t,n)&&on(o,n,t[n]);return o};const wt=({actions:o,headerBreadCrumbs:t,isFormDisabled:n,onClosed:s,onToggle:i})=>{const{formatMessage:c}=(0,Y.useIntl)(),{availableConditions:m,modifiedData:g,onChangeConditions:E}=(0,ae.$_)(),P=(0,e.useMemo)(()=>Object.entries(_()(m,"category")),[m]),S=o.filter(({isDisplayed:A,hasSomeActionsSelected:I,hasAllActionsSelected:X})=>A&&(I||X)),L=(0,e.useMemo)(()=>J(S,g,P),[S,g,P]),[$,ee]=(0,e.useState)(L),w=(A,I)=>{ee((0,k.default)(X=>{X[A]||(X[A]={}),X[A].default||(X[A].default={}),X[A].default=I}))},j=()=>{const A=Object.entries($).reduce((I,X)=>{const[se,Oe]=X,ve=Object.values(Oe).reduce((Re,Fe)=>Bt(Bt({},Re),Fe),{});return I[se]=ve,I},{});E(A),i()};return e.createElement(re.ModalLayout,{labelledBy:"condition-modal-breadcrumbs",onClose:s},e.createElement(re.ModalHeader,null,e.createElement(qe.Breadcrumbs,{id:"condition-modal-breadcrumbs",label:t.join(", ")},t.map(A=>e.createElement(qe.Crumb,{key:A},W()(c({id:A,defaultMessage:A})))))),e.createElement(F.Box,{padding:8},e.createElement(Ze.Stack,{spacing:6},e.createElement(R.Typography,{variant:"beta",as:"h2"},c({id:"Settings.permissions.conditions.define-conditions",defaultMessage:"Define conditions"})),e.createElement(F.Box,null,e.createElement(Ae.Divider,null)),e.createElement(F.Box,null,S.length===0&&e.createElement(R.Typography,null,c({id:"Settings.permissions.conditions.no-actions",defaultMessage:"You first need to select actions (create, read, update, ...) before defining conditions on them."})),e.createElement("ul",null,S.map(({actionId:A,label:I,pathToConditionsObject:X},se)=>{const Oe=X.join("..");return e.createElement(H,{key:A,arrayOfOptionsGroupedByCategory:P,label:I,isFormDisabled:n,isGrey:se%2===0,name:Oe,onChange:w,value:de()($,Oe,{})})}))))),e.createElement(re.ModalFooter,{startActions:e.createElement(We.Button,{variant:"tertiary",onClick:i},c({id:"app.components.Button.cancel",defaultMessage:"Cancel"})),endActions:e.createElement(We.Button,{onClick:j},c({id:"Settings.permissions.conditions.apply",defaultMessage:"Apply"}))}))};wt.propTypes={actions:r().arrayOf(r().shape({actionId:r().string.isRequired,checkboxName:r().string,hasSomeActionsSelected:r().bool.isRequired,hasAllActionsSelected:r().bool,isDisplayed:r().bool.isRequired,label:r().string})).isRequired,headerBreadCrumbs:r().arrayOf(r().string).isRequired,isFormDisabled:r().bool.isRequired,onClosed:r().func.isRequired,onToggle:r().func.isRequired};const Et=wt,ut=T.default.div`
  width: ${ie};
`,ot=(0,T.default)(K.Flex)`
  padding-right: ${({theme:o})=>o.spaces[2]};
  overflow: hidden;
  flex: 1;
  ${({isCollapsable:o})=>o&&"cursor: pointer;"}
`;var jt=Object.defineProperty,Nt=Object.getOwnPropertySymbols,Tt=Object.prototype.hasOwnProperty,kn=Object.prototype.propertyIsEnumerable,an=(o,t,n)=>t in o?jt(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,sn=(o,t)=>{for(var n in t||(t={}))Tt.call(t,n)&&an(o,n,t[n]);if(Nt)for(var n of Nt(t))kn.call(t,n)&&an(o,n,t[n]);return o};const pt=({children:o,isCollapsable:t,isActive:n,isFormDisabled:s,label:i,onChange:c,onClick:m,checkboxName:g,someChecked:E,value:P})=>{const{formatMessage:S}=(0,Y.useIntl)();return e.createElement(K.Flex,{alignItems:"center",paddingLeft:6,style:{width:xe,flexShrink:0}},e.createElement(F.Box,{paddingRight:2},e.createElement(be.BaseCheckbox,{name:g,"aria-label":S({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:i}),disabled:s,onValueChange:L=>c({target:{name:g,value:L}}),indeterminate:E,value:P})),e.createElement(ot,sn({title:i,alignItems:"center",isCollapsable:t},t&&{onClick:m,"aria-expanded":n,onKeyDown:({key:L})=>(L==="Enter"||L===" ")&&m(),tabIndex:0,role:"button"}),e.createElement(R.Typography,{fontWeight:n?"bold":"",textColor:n?"primary600":"neutral800",ellipsis:!0},W()(i)),o))};pt.defaultProps={children:null,checkboxName:"",onChange:()=>{},value:!1,someChecked:!1,isCollapsable:!1},pt.propTypes={checkboxName:r().string,children:r().node,label:r().string.isRequired,isCollapsable:r().bool,isFormDisabled:r().bool.isRequired,onChange:r().func,onClick:r().func.isRequired,someChecked:r().bool,value:r().bool,isActive:r().bool.isRequired};const Wt=(0,e.memo)(pt),bt=o=>(0,h.isObject)(o)?(0,h.flattenDeep)(Object.values(o).map(t=>(0,h.isObject)(t)?bt(t):t)):[],mt=bt,At=o=>o?Object.keys(o).reduce((t,n)=>(n!=="conditions"&&(t[n]=o[n]),t),{}):null,ct=o=>{const t=At(o),n=mt(t);if(!n.length)return{hasAllActionsSelected:!1,hasSomeActionsSelected:!1};const s=n.every(c=>c),i=n.some(c=>c)&&!s;return{hasAllActionsSelected:s,hasSomeActionsSelected:i}},Ot=(o,t,n)=>o.map(({actionId:s,isDisplayed:i,applyToProperties:c,label:m})=>{if(!i)return{actionId:s,hasSomeActionsSelected:!1,isDisplayed:i};const g=[...n.split(".."),s],E=(0,h.isEmpty)(c)?[...g,"properties","enabled"]:g,P=E.join(".."),S=(0,h.get)(t,[...g,"conditions"],null),L=mt(S).some(j=>j);if((0,h.isEmpty)(c)){const j=(0,h.get)(t,E,!1);return{actionId:s,checkboxName:P,hasAllActionsSelected:j,hasConditions:L,hasSomeActionsSelected:j,isDisplayed:i,isParentCheckbox:!1,label:m,pathToConditionsObject:g}}const $=(0,h.get)(t,E,null),{hasAllActionsSelected:ee,hasSomeActionsSelected:w}=ct($);return{actionId:s,checkboxName:P,hasAllActionsSelected:ee,hasConditions:L,hasSomeActionsSelected:w,isDisplayed:i,isParentCheckbox:!0,label:m,pathToConditionsObject:g}});var rn=a(40413),$t=a.n(rn);const gt=(0,T.default)($t())`
  display: none;
  width: ${10/16}rem;
  transform: rotate(${({$isActive:o})=>o?"180":"0"}deg);
  margin-left: ${({theme:o})=>o.spaces[2]};
`,ft=o=>`
  ${R.Typography} {
    color: ${o.colors.primary600};
    font-weight: ${o.fontWeights.bold}
  }
  ${gt} {
    display: block;
    path {
      fill: ${o.colors.primary600}
    };
  }
`;var Ut=function(){return window&&window.strapi&&window.strapi.isEE?a(20591).Z:a(56195).Z}(),Rt=function o(t,n){return`
  `.concat(kt,` {
    background-color: `).concat(t.colors.primary100,`;
    color: `).concat(t.colors.primary600,`;
    border-radius: `).concat(n?"2px 2px 0 0":"2px",`;
  }
  `).concat(Vt,` {
    display: flex;
  }
  `).concat($e,` {
    display: block;
  }
  &:hover {
   `).concat(ft(t),`
  }

  &:focus-within {
    `).concat(function(s){var i=s.theme,c=s.isActive;return o(i,c)},`
  }
  
`)},kt=T.default.div.withConfig({displayName:"Collapse__Wrapper",componentId:"sc-132fji1-0"})(["flex:1;display:flex;align-items:center;height:",";background-color:",";border:1px solid transparent;"],Ge,function(o){var t=o.isGrey,n=o.theme;return t?n.colors.neutral100:n.colors.neutral0}),ln=T.default.div.withConfig({displayName:"Collapse__BoxWrapper",componentId:"sc-132fji1-1"})(["display:inline-flex;min-width:100%;","{display:none;}"," &:hover{","}"],$e,function(o){var t=o.isActive,n=o.theme;return t&&Rt(n,t)},function(o){var t=o.theme,n=o.isActive;return Rt(t,n)}),Dt=(0,T.default)(K.Flex).withConfig({displayName:"Collapse__Cell",componentId:"sc-132fji1-2"})(["width:",";position:relative;"],ie),Vt=(0,T.default)(F.Box).withConfig({displayName:"Collapse__Chevron",componentId:"sc-132fji1-3"})(["display:none;svg{width:11px;}*{fill:",";}"],function(o){var t=o.theme;return t.colors.primary600}),Zt=T.default.span.withConfig({displayName:"Collapse__TinyDot",componentId:"sc-132fji1-4"})(["position:absolute;top:-6px;left:37px;width:6px;height:6px;border-radius:20px;background:",";"],function(o){var t=o.theme;return t.colors.primary600}),Hn=(0,T.default)(F.Box).withConfig({displayName:"Collapse__AbsoluteBox",componentId:"sc-132fji1-5"})(["position:absolute;right:9px;transform:translateY(10px);"]),xt=function(t){var n=t.availableActions,s=t.isActive,i=t.isGrey,c=t.isFormDisabled,m=t.label,g=t.onClickToggle,E=t.pathToData,P=(0,e.useState)(!1),S=(0,U.Z)(P,2),L=S[0],$=S[1],ee=(0,Y.useIntl)(),w=ee.formatMessage,j=(0,ae.$_)(),A=j.modifiedData,I=j.onChangeParentCheckbox,X=j.onChangeSimpleCheckbox,se=function(){$(function(Te){return!Te})},Oe=function(){$(!1)},ve=de()(A,E.split(".."),{}),Re=(0,e.useMemo)(function(){return Object.keys(ve).reduce(function(le,Te){return le[Te]=Ne()(ve[Te],"conditions"),le},{})},[ve]),Fe=ct(Re),Me=Fe.hasAllActionsSelected,vt=Fe.hasSomeActionsSelected,Ce=(0,e.useMemo)(function(){return Ot(n,A,E)},[n,A,E]),Be=Ce.some(function(le){var Te=le.hasConditions;return Te});return e.createElement(ln,{isActive:s},e.createElement(kt,{isGrey:i},e.createElement(Wt,{isCollapsable:!0,isFormDisabled:c,label:m,checkboxName:E,onChange:I,onClick:g,someChecked:vt,value:Me,isActive:s},e.createElement(Vt,{paddingLeft:2},s?e.createElement(ke(),null):e.createElement(Qe(),null))),e.createElement(K.Flex,{style:{flex:1}},Ce.map(function(le){var Te=le.actionId,De=le.hasConditions,we=le.hasAllActionsSelected,Ue=le.hasSomeActionsSelected,dt=le.isDisplayed,Ke=le.isParentCheckbox,lt=le.checkboxName,Pt=le.label;return dt?Ke?e.createElement(Dt,{key:Te,justifyContent:"center",alignItems:"center"},De&&e.createElement(Zt,null),e.createElement(be.BaseCheckbox,{disabled:c||Ut,name:lt,"aria-label":w({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(Pt," ").concat(m)}),onValueChange:function(Ct){I({target:{name:lt,value:Ct}})},indeterminate:Ue,value:we})):e.createElement(Dt,{key:Te,justifyContent:"center",alignItems:"center"},De&&e.createElement(Zt,null),e.createElement(be.BaseCheckbox,{disabled:c||Ut,indeterminate:De,name:lt,onValueChange:function(Ct){X({target:{name:lt,value:Ct}})},value:we})):e.createElement(ut,{key:Te})})),L&&e.createElement(Et,{headerBreadCrumbs:[m,"app.components.LeftMenuLinkContainer.settings"],actions:Ce,isFormDisabled:c,onClosed:Oe,onToggle:se})),e.createElement(Hn,null,e.createElement($e,{onClick:se,hasConditions:Be})))};xt.propTypes={availableActions:r().array.isRequired,isActive:r().bool.isRequired,isGrey:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggle:r().func.isRequired,pathToData:r().string.isRequired};const Gt=xt,cn=(o,t)=>o.map(n=>{const s=Array.isArray(n.applyToProperties)&&n.applyToProperties.indexOf(t)!==-1&&n.isDisplayed;return{label:n.label,actionId:n.actionId,isActionRelatedToCurrentProperty:s}}),dn=(0,T.default)(K.Flex)`
  width: ${ie};
  flex-shrink: 0;
`,un=(0,T.default)(K.Flex)`
  width: ${xe};
  height: ${Ge};
  flex-shrink: 0;
`,zt=({headers:o,label:t})=>{const{formatMessage:n}=(0,Y.useIntl)(),s=n({id:"Settings.roles.form.permission.property-label",defaultMessage:"{label} permissions"},{label:t});return e.createElement(K.Flex,null,e.createElement(un,{alignItems:"center",paddingLeft:6},e.createElement(R.Typography,{variant:"sigma",textColor:"neutral500"},s)),o.map(i=>i.isActionRelatedToCurrentProperty?e.createElement(dn,{justifyContent:"center",key:i.label},e.createElement(R.Typography,{variant:"sigma",textColor:"neutral500"},n({id:`Settings.roles.form.permissions.${i.label.toLowerCase()}`,defaultMessage:i.label}))):e.createElement(dn,{key:i.label})))};zt.propTypes={headers:r().arrayOf(r().shape({label:r().string.isRequired,isActionRelatedToCurrentProperty:r().bool.isRequired})).isRequired,label:r().string.isRequired};const pn=zt,Yn=T.default.span`
  color: ${({theme:o})=>o.colors.danger700};
  padding-left: ${({theme:o})=>o.spaces[1]}px;
`,Kt=()=>e.createElement(Yn,null,"*");var mn=Object.defineProperty,Jn=Object.defineProperties,gn=Object.getOwnPropertyDescriptors,fn=Object.getOwnPropertySymbols,hn=Object.prototype.hasOwnProperty,Ht=Object.prototype.propertyIsEnumerable,tt=(o,t,n)=>t in o?mn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,yn=(o,t)=>{for(var n in t||(t={}))hn.call(t,n)&&tt(o,n,t[n]);if(fn)for(var n of fn(t))Ht.call(t,n)&&tt(o,n,t[n]);return o},ye=(o,t)=>Jn(o,gn(t));const Cn=(o,t)=>o.map(n=>{const s=Array.isArray(n.subjects)&&n.subjects.indexOf(t)!==-1;return ye(yn({},n),{isDisplayed:s})});var En=a(87462),bn=Object.defineProperty,Xt=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,ht=Object.prototype.propertyIsEnumerable,Yt=(o,t,n)=>t in o?bn(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Sn=(o,t)=>{for(var n in t||(t={}))Pn.call(t,n)&&Yt(o,n,t[n]);if(Xt)for(var n of Xt(t))ht.call(t,n)&&Yt(o,n,t[n]);return o};const Tn=(0,T.default)(F.Box)`
  transform: translate(-4px, -12px);

  &:before {
    content: '';
    width: ${4/16}rem;
    height: ${12/16}rem;
    background: ${({theme:o})=>o.colors.primary200};
    display: block;
  }
`,Qt=T.default.svg`
  position: relative;
  flex-shrink: 0;
  transform: translate(-0.5px, -1px);

  * {
    fill: ${({theme:o,color:t})=>o.colors[t]};
  }
`,Mt=o=>e.createElement(Tn,null,e.createElement(Qt,Sn({width:"20",height:"23",viewBox:"0 0 20 23",fill:"none",xmlns:"http://www.w3.org/2000/svg"},o),e.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M7.02477 14.7513C8.65865 17.0594 11.6046 18.6059 17.5596 18.8856C18.6836 18.9384 19.5976 19.8435 19.5976 20.9688V20.9688C19.5976 22.0941 18.6841 23.0125 17.5599 22.9643C10.9409 22.6805 6.454 20.9387 3.75496 17.1258C0.937988 13.1464 0.486328 7.39309 0.486328 0.593262H4.50974C4.50974 7.54693 5.06394 11.9813 7.02477 14.7513Z",fill:"#D9D8FF"})));Mt.defaultProps={fill:"primary200"},Mt.propTypes={fill:r().string};const An=(0,e.memo)(Mt);var Lt=function(){return window&&window.strapi&&window.strapi.isEE?a(76766).Z:a(28472).Z}(),It=(0,T.default)(K.Flex).withConfig({displayName:"SubActionRow__Cell",componentId:"sc-7y8yzq-0"})(["width:",";position:relative;"],ie),Jt=(0,T.default)(K.Flex).withConfig({displayName:"SubActionRow__RowWrapper",componentId:"sc-7y8yzq-1"})(["height:",";"],Ge),qt=(0,T.default)(F.Box).withConfig({displayName:"SubActionRow__Wrapper",componentId:"sc-7y8yzq-2"})(["padding-left:","rem;"],31/16),On=(0,T.default)(F.Box).withConfig({displayName:"SubActionRow__LeftBorderTimeline",componentId:"sc-7y8yzq-3"})(["border-left:",";"],function(o){var t=o.isVisible,n=o.theme;return t?"4px solid ".concat(n.colors.primary200):"4px solid transparent"}),_t=(0,T.default)(K.Flex).withConfig({displayName:"SubActionRow__RowStyle",componentId:"sc-7y8yzq-4"})(["padding-left:",";width:","px;"," ",";"],function(o){var t=o.theme;return t.spaces[4]},function(o){var t=o.level;return 145-t*36},function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(gt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(ft(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&ft(n)}),Rn=T.default.div.withConfig({displayName:"SubActionRow__TopTimeline",componentId:"sc-7y8yzq-5"})(["padding-top:",";margin-top:",";width:","rem;background-color:",";border-top-left-radius:2px;border-top-right-radius:2px;"],function(o){var t=o.theme;return t.spaces[2]},function(o){var t=o.theme;return t.spaces[2]},4/16,function(o){var t=o.theme;return t.colors.primary200}),u=function o(t){var n=t.childrenForm,s=t.isFormDisabled,i=t.recursiveLevel,c=t.pathToDataFromActionRow,m=t.propertyActions,g=t.parentName,E=t.propertyName,P=(0,Y.useIntl)(),S=P.formatMessage,L=(0,ae.$_)(),$=L.modifiedData,ee=L.onChangeParentCheckbox,w=L.onChangeSimpleCheckbox,j=(0,e.useState)(null),A=(0,U.Z)(j,2),I=A[0],X=A[1],se=function(Re){X(function(Fe){return Fe===Re?null:Re})},Oe=(0,e.useMemo)(function(){return I?n.find(function(ve){var Re=ve.value;return Re===I}):null},[I,n]);return e.createElement(qt,null,e.createElement(Rn,null),n.map(function(ve,Re){var Fe=ve.label,Me=ve.value,vt=ve.required,Ce=ve.children,Be=Re+1<n.length,le=Array.isArray(Ce),Te=I===Me;return e.createElement(On,{key:Me,isVisible:Be},e.createElement(Jt,null,e.createElement(An,{color:"primary200"}),e.createElement(K.Flex,{style:{flex:1}},e.createElement(_t,{level:i,isActive:Te,isCollapsable:le},e.createElement(ot,(0,En.Z)({alignItems:"center",isCollapsable:le},le&&{onClick:function(){return se(Me)},"aria-expanded":Te,onKeyDown:function(we){var Ue=we.key;return(Ue==="Enter"||Ue===" ")&&se(Me)},tabIndex:0,role:"button"},{title:Fe}),e.createElement(R.Typography,{ellipsis:!0},W()(Fe)),vt&&e.createElement(Kt,null),e.createElement(gt,{$isActive:Te}))),e.createElement(K.Flex,{style:{flex:1}},m.map(function(De){var we=De.actionId,Ue=De.label,dt=De.isActionRelatedToCurrentProperty;if(!dt)return e.createElement(ut,{key:we});var Ke=[].concat((0,oe.Z)(c.split("..")),[we,"properties",E],(0,oe.Z)(g.split("..")),[Me]),lt=de()($,Ke,!1);if(!Ce)return e.createElement(It,{key:Ue,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:s||Lt,name:Ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Fe," ").concat(Ue)}),onValueChange:function(Ft){w({target:{name:Ke.join(".."),value:Ft}})},value:lt}));var Pt=ct(lt),St=Pt.hasAllActionsSelected,Ct=Pt.hasSomeActionsSelected;return e.createElement(It,{key:Ue,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{key:Ue,disabled:s||Lt,name:Ke.join(".."),"aria-label":S({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(g," ").concat(Fe," ").concat(Ue)}),onValueChange:function(Ft){ee({target:{name:Ke.join(".."),value:Ft}})},value:St,indeterminate:Ct}))})))),Oe&&Te&&e.createElement(F.Box,{paddingBottom:2},e.createElement(o,{isFormDisabled:s,parentName:"".concat(g,"..").concat(Me),pathToDataFromActionRow:c,propertyActions:m,propertyName:E,recursiveLevel:i+1,childrenForm:Oe.children})))}))};u.propTypes={childrenForm:r().array.isRequired,isFormDisabled:r().bool.isRequired,parentName:r().string.isRequired,pathToDataFromActionRow:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,recursiveLevel:r().number.isRequired};const l=(0,e.memo)(u),d=o=>o.reduce((n,s)=>(s.isActionRelatedToCurrentProperty&&n.push(s.actionId),n),[]),b=(o,t,n,s,i)=>{const m=d(o).reduce((g,E)=>{const P=[...n.split(".."),E,"properties",s,i],S=(0,h.get)(t,P,!1);return g[E]=S,g},{});return ct(m)};var p=function(){return window&&window.strapi&&window.strapi.isEE?a(74512).Z:a(35820).Z}(),M=(0,T.default)(K.Flex).withConfig({displayName:"ActionRow__Cell",componentId:"sc-4agenc-0"})(["width:",";position:relative;"],ie),O=(0,T.default)(K.Flex).withConfig({displayName:"ActionRow__Wrapper",componentId:"sc-4agenc-1"})(["height:",";flex:1;"," ",";"],Ge,function(o){var t=o.isCollapsable,n=o.theme;return t&&`
      `.concat(gt,` {
        display: block;
        color: `).concat(n.colors.neutral100,`;
      }
      &:hover {
        `).concat(ft(n),`
      }
  `)},function(o){var t=o.isActive,n=o.theme;return t&&ft(n)}),v=function(t){var n=t.childrenForm,s=t.label,i=t.isFormDisabled,c=t.name,m=t.required,g=t.pathToData,E=t.propertyActions,P=t.propertyName,S=t.isOdd,L=(0,Y.useIntl)(),$=L.formatMessage,ee=(0,e.useState)(null),w=(0,U.Z)(ee,2),j=w[0],A=w[1],I=(0,ae.$_)(),X=I.modifiedData,se=I.onChangeCollectionTypeLeftActionRowCheckbox,Oe=I.onChangeParentCheckbox,ve=I.onChangeSimpleCheckbox,Re=j===c,Fe=(0,e.useMemo)(function(){return Array.isArray(n)?n:[]},[n]),Me=Fe.length>0,vt=(0,e.useCallback)(function(){Me&&A(function(De){return De===c?null:c})},[Me,c]),Ce=function(we){var Ue=we.target.value;se(g,P,c,Ue)},Be=(0,e.useMemo)(function(){return b(E,X,g,P,c)},[E,X,g,P,c]),le=Be.hasAllActionsSelected,Te=Be.hasSomeActionsSelected;return e.createElement(e.Fragment,null,e.createElement(O,{alignItems:"center",isCollapsable:Me,isActive:Re,background:S?"neutral100":"neutral0"},e.createElement(K.Flex,null,e.createElement(Wt,{onChange:Ce,onClick:vt,isCollapsable:Me,isFormDisabled:i,label:s,someChecked:Te,value:le,isActive:Re},m&&e.createElement(Kt,null),e.createElement(gt,{$isActive:Re})),e.createElement(K.Flex,null,E.map(function(De){var we=De.label,Ue=De.isActionRelatedToCurrentProperty,dt=De.actionId;if(!Ue)return e.createElement(ut,{key:we});var Ke=[].concat((0,oe.Z)(g.split("..")),[dt,"properties",P,c]);if(!Me){var lt=de()(X,Ke,!1);return e.createElement(M,{key:dt,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:i||p,name:Ke.join(".."),"aria-label":$({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(c," ").concat(we)}),onValueChange:function(Wn){ve({target:{name:Ke.join(".."),value:Wn}})},value:lt}))}var Pt=de()(X,Ke,{}),St=ct(Pt),Ct=St.hasAllActionsSelected,Nn=St.hasSomeActionsSelected;return e.createElement(M,{key:we,justifyContent:"center",alignItems:"center"},e.createElement(be.BaseCheckbox,{disabled:i||p,name:Ke.join(".."),onValueChange:function(Wn){Oe({target:{name:Ke.join(".."),value:Wn}})},"aria-label":$({id:"Settings.permissions.select-by-permission",defaultMessage:"Select {label} permission"},{label:"".concat(c," ").concat(we)}),value:Ct,indeterminate:Nn}))})))),Re&&e.createElement(l,{childrenForm:Fe,isFormDisabled:i,parentName:c,pathToDataFromActionRow:g,propertyName:P,propertyActions:E,recursiveLevel:0}))};v.defaultProps={childrenForm:[],required:!1},v.propTypes={childrenForm:r().array,label:r().string.isRequired,isFormDisabled:r().bool.isRequired,name:r().string.isRequired,pathToData:r().string.isRequired,propertyActions:r().array.isRequired,propertyName:r().string.isRequired,required:r().bool,isOdd:r().bool.isRequired};const x=(0,e.memo)(v),Se=T.default.div`
  display: inline-flex;
  flex-direction: column;
  min-width: 0;
`,pe=({availableActions:o,childrenForm:t,isFormDisabled:n,label:s,pathToData:i,propertyName:c})=>{const m=(0,e.useMemo)(()=>cn(o,c),[o,c]);return e.createElement(Se,null,e.createElement(pn,{label:s,headers:m}),e.createElement(F.Box,null,t.map(({children:g,label:E,value:P,required:S},L)=>e.createElement(x,{childrenForm:g,key:P,label:E,isFormDisabled:n,name:P,required:S,propertyActions:m,pathToData:i,propertyName:c,isOdd:L%2===0}))))};pe.propTypes={childrenForm:r().array.isRequired,availableActions:r().array.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,pathToData:r().string.isRequired,propertyName:r().string.isRequired};const nt=pe,yt=T.default.div`
  flex-direction: column;
  display: inline-flex;
  min-width: 100%;
  ${({theme:o,isActive:t})=>t&&`border: 1px solid ${o.colors.primary600};`}
`,at=({allActions:o,contentTypeName:t,label:n,index:s,isActive:i,isFormDisabled:c,onClickToggleCollapse:m,pathToData:g,properties:E})=>{const P=(0,e.useCallback)(()=>{m(t)},[t,m]),S=(0,e.useMemo)(()=>Cn(o,t),[o,t]);return e.createElement(yt,{isActive:i},e.createElement(Gt,{availableActions:S,isActive:i,isGrey:s%2===0,isFormDisabled:c,label:n,onClickToggle:P,pathToData:g}),i&&E.map(({label:L,value:$,children:ee})=>e.createElement(nt,{availableActions:S,childrenForm:ee,isFormDisabled:c,label:L,pathToData:g,propertyName:$,key:$})))};at.propTypes={allActions:r().array.isRequired,contentTypeName:r().string.isRequired,index:r().number.isRequired,isActive:r().bool.isRequired,isFormDisabled:r().bool.isRequired,label:r().string.isRequired,onClickToggleCollapse:r().func.isRequired,pathToData:r().string.isRequired,properties:r().array.isRequired};const st=at,rt=({actions:o,isFormDisabled:t,pathToData:n,subjects:s})=>{const[i,c]=(0,e.useState)(null),m=g=>{c(i===g?null:g)};return s.map(({uid:g,label:E,properties:P},S)=>e.createElement(st,{allActions:o,key:g,contentTypeName:g,label:E,isActive:i===g,isFormDisabled:t,index:S,onClickToggleCollapse:m,pathToData:`${n}..${g}`,properties:P}))};rt.defaultProps={actions:[],subjects:[]},rt.propTypes={actions:r().array.isRequired,isFormDisabled:r().bool.isRequired,pathToData:r().string.isRequired,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))};const No=(0,e.memo)(rt),Wo=o=>o.filter(({subjects:t})=>t&&t.length);var $o=Object.defineProperty,qn=Object.getOwnPropertySymbols,Uo=Object.prototype.hasOwnProperty,ko=Object.prototype.propertyIsEnumerable,_n=(o,t,n)=>t in o?$o(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,eo=(o,t)=>{for(var n in t||(t={}))Uo.call(t,n)&&_n(o,n,t[n]);if(qn)for(var n of qn(t))ko.call(t,n)&&_n(o,n,t[n]);return o};const Vo=o=>o.map(({actionId:t})=>t),Zo=(o,t)=>o.reduce((n,s)=>(Object.keys(t).forEach(i=>{const c=(0,h.get)(t,[i,s],{}),m={[i]:At(c)};n[s]?n[s]=eo(eo({},n[s]),m):n[s]=m}),n),{}),Go=(o,t)=>{const n=Vo(o),s=Zo(n,t);return Object.keys(s).reduce((c,m)=>(c[m]=ct(s[m]),c),{})};var zo=function(){return window&&window.strapi&&window.strapi.isEE?a(85822).Z:a(99047).Z}(),Ko=(0,T.default)(Ze.Stack).withConfig({displayName:"GlobalActions__CenteredStack",componentId:"sc-1vxwsjr-0"})(["align-items:center;justify-content:center;width:",";flex-shrink:0;"],ie),Dn=function(t){var n=t.actions,s=t.isFormDisabled,i=t.kind,c=(0,Y.useIntl)(),m=c.formatMessage,g=(0,ae.$_)(),E=g.modifiedData,P=g.onChangeCollectionTypeGlobalActionCheckbox,S=(0,e.useMemo)(function(){return Wo(n)},[n]),L=(0,e.useMemo)(function(){return Go(S,E[i])},[E,S,i]);return e.createElement(F.Box,{paddingBottom:4,paddingTop:6,style:{paddingLeft:xe}},e.createElement(Ze.Stack,{horizontal:!0,spacing:0},S.map(function($){var ee=$.label,w=$.actionId;return e.createElement(Ko,{key:w,spacing:3},e.createElement(R.Typography,{variant:"sigma",textColor:"neutral500"},m({id:"Settings.roles.form.permissions.".concat(ee.toLowerCase()),defaultMessage:ee})),e.createElement(be.BaseCheckbox,{disabled:s||zo,onValueChange:function(A){P(i,w,A)},name:w,"aria-label":m({id:"Settings.permissions.select-all-by-permission",defaultMessage:"Select all {label} permissions"},{label:m({id:"Settings.roles.form.permissions.".concat(ee.toLowerCase()),defaultMessage:ee})}),value:de()(L,[w,"hasAllActionsSelected"],!1),indeterminate:de()(L,[w,"hasSomeActionsSelected"],!1)}))})))};Dn.defaultProps={actions:[]},Dn.propTypes={actions:r().arrayOf(r().shape({label:r().string.isRequired,actionId:r().string.isRequired,subjects:r().array.isRequired})),isFormDisabled:r().bool.isRequired,kind:r().string.isRequired};const Ho=(0,e.memo)(Dn),Xo=(0,T.default)(F.Box)`
  overflow-x: auto;
`,to=({isFormDisabled:o,kind:t,layout:{actions:n,subjects:s}})=>{const i=ce()([...s],"label");return e.createElement(Xo,{background:"neutral0"},e.createElement(Ho,{actions:n,kind:t,isFormDisabled:o}),e.createElement(No,{actions:n,isFormDisabled:o,pathToData:t,subjects:i}))};to.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().shape({actions:r().array,subjects:r().arrayOf(r().shape({uid:r().string.isRequired,label:r().string.isRequired,properties:r().array.isRequired}))}).isRequired};const no=(0,e.memo)(to);var Yo=a(47713);const oo=({children:o,value:t})=>e.createElement(Yo.$l.Provider,{value:t},o);oo.propTypes={children:r().node.isRequired,value:r().exact({availableConditions:r().array.isRequired,modifiedData:r().object.isRequired,onChangeCollectionTypeLeftActionRowCheckbox:r().func.isRequired,onChangeConditions:r().func.isRequired,onChangeSimpleCheckbox:r().func.isRequired,onChangeParentCheckbox:r().func.isRequired,onChangeCollectionTypeGlobalActionCheckbox:r().func.isRequired}).isRequired};const Qo=oo;var xn=a(47949),ao=a(39272),so=a(43499),Jo=Object.defineProperty,qo=Object.defineProperties,_o=Object.getOwnPropertyDescriptors,ro=Object.getOwnPropertySymbols,ea=Object.prototype.hasOwnProperty,ta=Object.prototype.propertyIsEnumerable,io=(o,t,n)=>t in o?Jo(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,na=(o,t)=>{for(var n in t||(t={}))ea.call(t,n)&&io(o,n,t[n]);if(ro)for(var n of ro(t))ta.call(t,n)&&io(o,n,t[n]);return o},oa=(o,t)=>qo(o,_o(t));const aa=(o,t,n)=>o.map(s=>{const i=[...n,s.action,"properties","enabled"],c=(0,h.get)(t,i,!1),m=(0,h.get)(t,[...n,s.action,"conditions"],{}),g=mt(m).some(E=>E);return oa(na({},s),{isDisplayed:c,checkboxName:i.join(".."),hasSomeActionsSelected:c,value:c,hasConditions:g,label:s.displayName,actionId:s.action,pathToConditionsObject:[...n,s.action]})}),sa=o=>{const t=Object.entries(o).reduce((s,i)=>{const[c,{conditions:m}]=i;return s[c]=m,s},{});return mt(t).some(s=>s)};var Mn=function(){return window&&window.strapi&&window.strapi.isEE?a(8629).Z:a(34341).Z}(),ra=T.default.div.withConfig({displayName:"SubCategory__Border",componentId:"sc-akgczm-0"})(["flex:1;align-self:center;border-top:1px solid ",";"],function(o){var t=o.theme;return t.colors.neutral150}),ia=T.default.div.withConfig({displayName:"SubCategory__CheckboxWrapper",componentId:"sc-akgczm-1"})(["position:relative;word-break:keep-all;",""],function(o){var t=o.hasConditions,n=o.disabled,s=o.theme;return t&&`
    &:before {
      content: '';
      position: absolute;
      top: `.concat(-4/16,`rem;
      left: `).concat(-8/16,`rem;
      width: `).concat(6/16,`rem;
      height: `).concat(6/16,`rem;
      border-radius: `).concat(20/16,`rem;
      background: `).concat(n?s.colors.neutral100:s.colors.primary600,`;
    }
  `)}),lo=function(t){var n=t.categoryName,s=t.isFormDisabled,i=t.subCategoryName,c=t.actions,m=t.pathToData,g=(0,e.useState)(!1),E=(0,U.Z)(g,2),P=E[0],S=E[1],L=(0,ae.$_)(),$=L.modifiedData,ee=L.onChangeParentCheckbox,w=L.onChangeSimpleCheckbox,j=(0,Y.useIntl)(),A=j.formatMessage,I=de()($,m,{}),X=(0,e.useMemo)(function(){return Object.keys(I).reduce(function(Ce,Be){return Ce[Be]=At(I[Be]),Ce},{})},[I]),se=ct(X),Oe=se.hasAllActionsSelected,ve=se.hasSomeActionsSelected,Re=function(){S(function(Be){return!Be})},Fe=function(){S(!1)},Me=aa(c,$,m),vt=sa(de()($,(0,oe.Z)(m),{}));return e.createElement(e.Fragment,null,e.createElement(F.Box,null,e.createElement(K.Flex,{justifyContent:"space-between",alignItems:"center"},e.createElement(F.Box,{paddingRight:4},e.createElement(R.Typography,{variant:"sigma",textColor:"neutral600"},i)),e.createElement(ra,null),e.createElement(F.Box,{paddingLeft:4},e.createElement(so.Checkbox,{name:m.join(".."),disabled:s||Mn,onValueChange:function(Be){ee({target:{name:m.join(".."),value:Be}})},indeterminate:ve,value:Oe},A({id:"app.utils.select-all",defaultMessage:"Select all"})))),e.createElement(K.Flex,{paddingTop:6,paddingBottom:6},e.createElement(ao.Grid,{gap:2,style:{flex:1}},Me.map(function(Ce){var Be=Ce.checkboxName,le=Ce.value,Te=Ce.action,De=Ce.displayName,we=Ce.hasConditions;return e.createElement(ao.GridItem,{col:3,key:Te},e.createElement(ia,{disabled:s||Mn,hasConditions:we},e.createElement(so.Checkbox,{name:Be,disabled:s||Mn,onValueChange:function(dt){w({target:{name:Be,value:dt}})},value:le},De)))})),e.createElement($e,{hasConditions:vt,onClick:Re}))),P&&e.createElement(Et,{headerBreadCrumbs:[n,i],actions:Me,isFormDisabled:s,onClosed:Fe,onToggle:Re}))};lo.propTypes={actions:r().array.isRequired,categoryName:r().string.isRequired,isFormDisabled:r().bool.isRequired,subCategoryName:r().string.isRequired,pathToData:r().array.isRequired};const la=lo,Ln=({childrenForm:o,kind:t,name:n,isOpen:s,isFormDisabled:i,isWhite:c,onOpenCategory:m,pathToData:g})=>{const{formatMessage:E}=(0,Y.useIntl)(),P=()=>{m(n)},S=(0,e.useMemo)(()=>n.split("::").pop(),[n]);return e.createElement(xn.Accordion,{expanded:s,onToggle:P,id:`accordion-${n}`,variant:c?"primary":"secondary"},e.createElement(xn.AccordionToggle,{title:W()(S),description:`${E({id:"Settings.permissions.category"},{category:S})} ${t==="plugins"?"plugin":t}`}),e.createElement(xn.AccordionContent,null,e.createElement(F.Box,{padding:6},o.map(({actions:L,subCategoryName:$,subCategoryId:ee})=>e.createElement(la,{key:$,actions:L,categoryName:S,isFormDisabled:i,subCategoryName:$,pathToData:[...g,ee]})))))};Ln.defaultProps={},Ln.propTypes={childrenForm:r().array.isRequired,isOpen:r().bool.isRequired,isFormDisabled:r().bool.isRequired,isWhite:r().bool.isRequired,kind:r().string.isRequired,name:r().string.isRequired,onOpenCategory:r().func.isRequired,pathToData:r().array.isRequired};const ca=Ln,co=({isFormDisabled:o,kind:t,layout:n})=>{const[s,i]=(0,e.useState)(null),c=m=>{i(m===s?null:m)};return e.createElement(F.Box,{padding:6,background:"neutral0"},n.map(({category:m,categoryId:g,childrenForm:E},P)=>e.createElement(ca,{key:m,childrenForm:E,kind:t,isFormDisabled:o,isOpen:s===m,isWhite:P%2===1,name:m,onOpenCategory:c,pathToData:[t,g]})))};co.propTypes={isFormDisabled:r().bool.isRequired,kind:r().string.isRequired,layout:r().arrayOf(r().shape({category:r().string.isRequired,categoryId:r().string.isRequired,childrenForm:r().arrayOf(r().shape({actions:r().array.isRequired})).isRequired}).isRequired).isRequired};const uo=co,po=(o,t,n)=>o.find(s=>s.action===t&&s.subject===n);var da=Object.defineProperty,ua=Object.defineProperties,pa=Object.getOwnPropertyDescriptors,mo=Object.getOwnPropertySymbols,ma=Object.prototype.hasOwnProperty,ga=Object.prototype.propertyIsEnumerable,go=(o,t,n)=>t in o?da(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,fo=(o,t)=>{for(var n in t||(t={}))ma.call(t,n)&&go(o,n,t[n]);if(mo)for(var n of mo(t))ga.call(t,n)&&go(o,n,t[n]);return o},ho=(o,t)=>ua(o,pa(t));const yo=(o,t=[])=>o.reduce((n,s)=>(n[s.id]=t.indexOf(s.id)!==-1,n),{}),vo=({children:o},t,n="")=>o.reduce((s,i)=>{if(i.children)return ho(fo({},s),{[i.value]:vo(i,t,`${n}${i.value}.`)});const c=t.indexOf(`${n}${i.value}`)!==-1;return s[i.value]=c,s},{}),fa=(o,t,n)=>o.reduce((s,i)=>{const c=t.properties.find(({value:m})=>m===i);if(c){const m=(0,h.get)(n,["properties",c.value],[]),g=vo(c,m);s.properties[i]=g}return s},{properties:{}}),ha=(o,t)=>t.reduce((n,s)=>{const i=o.find(({uid:c})=>c===s)||null;return i&&(n[s]=i),n},{}),Co=({subjects:o},t,n,s=[])=>t.reduce((i,c)=>{const m=c.subjects,g=ha(o,m);if((0,h.isEmpty)(g))return i;const E=Object.keys(g).reduce((P,S)=>{const{actionId:L,applyToProperties:$}=c,j=g[S].properties.map(({value:se})=>se).every(se=>($||[]).indexOf(se)===-1),A=po(s,L,S),I=yo(n,(0,h.get)(A,"conditions",[]));if((0,h.isEmpty)($)||j)return(0,h.set)(P,[S,L],{properties:{enabled:A!==void 0},conditions:I}),P;const X=fa($,g[S],A);return(0,h.set)(P,[S,L],ho(fo({},X),{conditions:I})),P},{});return(0,h.merge)(i,E)},{}),ya=(o,t,n)=>o.reduce((s,i)=>{const c=po(n,i.action,null);return s[i.action]={properties:{enabled:c!==void 0},conditions:yo(t,(0,h.get)(c,"conditions",[]))},s},{}),va=(o,t,n)=>o.reduce((s,i)=>(s[i.subCategoryId]=ya(i.actions,t,n),s),{}),Eo=(o,t,n=[])=>o.reduce((s,{categoryId:i,childrenForm:c})=>{const m=va(c,t,n);return s[i]=m,s},{}),bo=o=>o.split(" ").join("-"),Po=(o,t)=>(0,h.chain)(o).groupBy(t).map((n,s)=>({category:s,categoryId:bo(s),childrenForm:(0,h.chain)(n).groupBy("subCategory").map((i,c)=>({subCategoryName:c,subCategoryId:bo(c),actions:i})).value()})).value(),Ca=(o,t)=>{const{conditions:n,sections:{collectionTypes:s,singleTypes:i,plugins:c,settings:m}}=o,g={collectionTypes:s,singleTypes:i,plugins:Po(c,"plugin"),settings:Po(m,"category")},E={collectionTypes:Co(s,s.actions||[],n,t),singleTypes:Co(i,i.actions||[],n,t),plugins:Eo(g.plugins,n,t),settings:Eo(g.settings,n,t)};return{initialData:E,modifiedData:E,layouts:g}};var Ea=Object.defineProperty,ba=Object.defineProperties,Pa=Object.getOwnPropertyDescriptors,So=Object.getOwnPropertySymbols,Sa=Object.prototype.hasOwnProperty,Ta=Object.prototype.propertyIsEnumerable,To=(o,t,n)=>t in o?Ea(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,In=(o,t)=>{for(var n in t||(t={}))Sa.call(t,n)&&To(o,n,t[n]);if(So)for(var n of So(t))Ta.call(t,n)&&To(o,n,t[n]);return o},Fn=(o,t)=>ba(o,Pa(t));const Ao=o=>Object.keys(o).reduce((t,n)=>{const s=o[n];if((0,h.isObject)(s)&&!(0,h.has)(s,"conditions"))return Fn(In({},t),{[n]:Ao(s)});if((0,h.isObject)(s)&&(0,h.has)(s,"conditions")&&!mt((0,h.omit)(s,"conditions")).some(c=>c)){const c=Object.keys(s.conditions).reduce((m,g)=>(m[g]=!1,m),{});return Fn(In({},t),{[n]:Fn(In({},s),{conditions:c})})}return t[n]=s,t},{}),Bn=Ao;var Aa=Object.defineProperty,Oa=Object.defineProperties,Ra=Object.getOwnPropertyDescriptors,Oo=Object.getOwnPropertySymbols,Da=Object.prototype.hasOwnProperty,xa=Object.prototype.propertyIsEnumerable,Ro=(o,t,n)=>t in o?Aa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Ma=(o,t)=>{for(var n in t||(t={}))Da.call(t,n)&&Ro(o,n,t[n]);if(Oo)for(var n of Oo(t))xa.call(t,n)&&Ro(o,n,t[n]);return o},La=(o,t)=>Oa(o,Ra(t));const Do=(o,t)=>Object.keys(o).reduce((n,s)=>{const i=o[s];return s==="conditions"?(n[s]=i,n):(0,h.isObject)(i)?La(Ma({},n),{[s]:Do(i,t)}):(n[s]=t,n)},{}),en=Do;var Ia=Object.defineProperty,Fa=Object.defineProperties,Ba=Object.getOwnPropertyDescriptors,xo=Object.getOwnPropertySymbols,wa=Object.prototype.hasOwnProperty,ja=Object.prototype.propertyIsEnumerable,Mo=(o,t,n)=>t in o?Ia(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,Na=(o,t)=>{for(var n in t||(t={}))wa.call(t,n)&&Mo(o,n,t[n]);if(xo)for(var n of xo(t))ja.call(t,n)&&Mo(o,n,t[n]);return o},Wa=(o,t)=>Fa(o,Ba(t));const $a={initialData:{},modifiedData:{},layouts:{}},Ua=(o,t)=>(0,k.default)(o,n=>{switch(t.type){case"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX":{const{collectionTypeKind:s,actionId:i,value:c}=t,m=["modifiedData",s];Object.keys((0,h.get)(o,m)).forEach(g=>{const E=(0,h.get)(o,[...m,g,i],void 0);if(E){let P=en(E,c);if(!c&&P.conditions){const S=en(P.conditions,!1);P=Wa(Na({},P),{conditions:S})}(0,h.set)(n,[...m,g,i],P)}});break}case"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX":{const{pathToCollectionType:s,propertyName:i,rowName:c,value:m}=t;let g=(0,h.cloneDeep)(o.modifiedData);const E=s.split(".."),P=(0,h.get)(g,E,{});Object.keys(P).forEach(S=>{if((0,h.has)(P[S],`properties.${i}`)){const L=(0,h.get)(P,[S,"properties",i,c]),$=[...E,S,"properties",i,c];if(!(0,h.isObject)(L))(0,h.set)(g,$,m);else{const ee=en(L,m);(0,h.set)(g,$,ee)}}}),m||(g=Bn(g)),(0,h.set)(n,"modifiedData",g);break}case"ON_CHANGE_CONDITIONS":{Object.entries(t.conditions).forEach(s=>{const[i,c]=s;(0,h.set)(n,["modifiedData",...i.split(".."),"conditions"],c)});break}case"ON_CHANGE_SIMPLE_CHECKBOX":{let s=(0,h.cloneDeep)(o.modifiedData);(0,h.set)(s,[...t.keys.split("..")],t.value),t.value||(s=Bn(s)),(0,h.set)(n,"modifiedData",s);break}case"ON_CHANGE_TOGGLE_PARENT_CHECKBOX":{const{keys:s,value:i}=t,c=[...s.split("..")];let m=(0,h.cloneDeep)(o.modifiedData);const g=(0,h.get)(m,c,{}),E=en(g,i);(0,h.set)(m,c,E),i||(m=Bn(m)),(0,h.set)(n,["modifiedData"],m);break}case"RESET_FORM":{n.modifiedData=o.initialData;break}case"SET_FORM_AFTER_SUBMIT":{n.initialData=o.modifiedData;break}default:return n}}),wn=o=>Object.entries(o).filter(([,t])=>t).map(([t])=>t),ka=o=>{const[t,{conditions:n}]=o;return{action:t,subject:null,conditions:wn(n),properties:{}}},Va=o=>Object.values(o).reduce((t,n)=>{const s=Object.entries(n).reduce((i,c)=>{const[,{properties:{enabled:m}}]=c;if(!m)return i;const g=ka(c);return i.push(g),i},[]);return[...t,...s]},[]),Lo=o=>Object.values(o).reduce((t,n)=>{const s=Va(n);return[...t,...s]},[]),Io=(o,t="")=>Object.entries(o).reduce((n,s)=>{const[i,c]=s;return(0,h.isObject)(c)?[...n,...Io(c,`${t}${i}.`)]:(c&&!(0,h.isObject)(c)&&n.push(`${t}${i}`),n)},[]),Za=(o,t,{conditions:n,properties:s})=>Object.entries(s).reduce((i,c)=>{const[m,g]=c;return i.properties[m]=Io(g),i},{action:o,subject:t,conditions:wn(n),properties:{}}),Ga=(o,t,{conditions:n})=>({action:o,subject:t,properties:{},conditions:wn(n)}),za=(o,t)=>Object.entries(t).reduce((s,i)=>{const[c,m]=i;if(!mt(m).some(P=>P))return s;if(!(0,h.has)(m,"properties.enabled")){const P=Za(c,o,m);return[...s,P]}if(!m.properties.enabled)return s;const E=Ga(c,o,m);return s.push(E),s},[]),Fo=o=>Object.entries(o).reduce((n,s)=>{const[i,c]=s,m=za(i,c);return[...n,...m]},[]),Ka=o=>{const t=Lo(o.plugins),n=Lo(o.settings),s=Fo(o.collectionTypes),i=Fo(o.singleTypes);return[...t,...n,...s,...i]},Ha=[{labelId:"app.components.LeftMenuLinkContainer.collectionTypes",defaultMessage:"Collection Types",id:"collectionTypes"},{labelId:"app.components.LeftMenuLinkContainer.singleTypes",id:"singleTypes",defaultMessage:"Single Types"},{labelId:"app.components.LeftMenuLinkContainer.plugins",defaultMessage:"Plugins",id:"plugins"},{labelId:"app.components.LeftMenuLinkContainer.settings",defaultMessage:"Settings",id:"settings"}];var Xa=Object.defineProperty,Bo=Object.getOwnPropertySymbols,Ya=Object.prototype.hasOwnProperty,Qa=Object.prototype.propertyIsEnumerable,wo=(o,t,n)=>t in o?Xa(o,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):o[t]=n,jo=(o,t)=>{for(var n in t||(t={}))Ya.call(t,n)&&wo(o,n,t[n]);if(Bo)for(var n of Bo(t))Qa.call(t,n)&&wo(o,n,t[n]);return o};const jn=(0,e.forwardRef)(({layout:o,isFormDisabled:t,permissions:n},s)=>{const[{initialData:i,layouts:c,modifiedData:m},g]=(0,e.useReducer)(Ua,$a,()=>Ca(o,n)),{formatMessage:E}=(0,Y.useIntl)();(0,e.useImperativeHandle)(s,()=>({getPermissions:()=>{const w=(0,te.difference)(i.collectionTypes,m.collectionTypes),j=(0,te.difference)(i.singleTypes,m.singleTypes),A=jo(jo({},w),j);let I;return je()(A)?I=!1:I=Object.values(A).some(X=>Object.values(X).some(se=>Ee()(se,"conditions"))),{permissionsToSend:Ka(m),didUpdateConditions:I}},resetForm:()=>{g({type:"RESET_FORM"})},setFormAfterSubmit:()=>{g({type:"SET_FORM_AFTER_SUBMIT"})}}));const P=(w,j,A,I)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_ROW_LEFT_CHECKBOX",pathToCollectionType:w,propertyName:j,rowName:A,value:I})},S=(w,j,A)=>{g({type:"ON_CHANGE_COLLECTION_TYPE_GLOBAL_ACTION_CHECKBOX",collectionTypeKind:w,actionId:j,value:A})},L=w=>{g({type:"ON_CHANGE_CONDITIONS",conditions:w})},$=(0,e.useCallback)(({target:{name:w,value:j}})=>{g({type:"ON_CHANGE_SIMPLE_CHECKBOX",keys:w,value:j})},[]),ee=(0,e.useCallback)(({target:{name:w,value:j}})=>{g({type:"ON_CHANGE_TOGGLE_PARENT_CHECKBOX",keys:w,value:j})},[]);return e.createElement(Qo,{value:{availableConditions:o.conditions,modifiedData:m,onChangeConditions:L,onChangeSimpleCheckbox:$,onChangeParentCheckbox:ee,onChangeCollectionTypeLeftActionRowCheckbox:P,onChangeCollectionTypeGlobalActionCheckbox:S}},e.createElement(V.TabGroup,{id:"tabs",label:E({id:"Settings.permissions.users.tabs.label",defaultMessage:"Tabs Permissions"})},e.createElement(V.Tabs,null,Ha.map(w=>e.createElement(V.Tab,{key:w.id},E({id:w.labelId,defaultMessage:w.defaultMessage})))),e.createElement(V.TabPanels,{style:{position:"relative"}},e.createElement(V.TabPanel,null,e.createElement(no,{layout:c.collectionTypes,kind:"collectionTypes",isFormDisabled:t})),e.createElement(V.TabPanel,null,e.createElement(no,{layout:c.singleTypes,kind:"singleTypes",isFormDisabled:t})),e.createElement(V.TabPanel,null,e.createElement(uo,{layout:c.plugins,kind:"plugins",isFormDisabled:t})),e.createElement(V.TabPanel,null,e.createElement(uo,{layout:c.settings,kind:"settings",isFormDisabled:t})))))});jn.defaultProps={permissions:[],layout:{conditions:[],sections:{collectionTypes:{},singleTypes:{actions:[]},settings:[],plugins:[]}}},jn.propTypes={layout:r().object,isFormDisabled:r().bool.isRequired,permissions:r().array};const Ja=(0,e.memo)(jn)},34341:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!0},67500:(me,D,a)=>{a.d(D,{Z:()=>e});const e=()=>"todo empty role"},52351:(me,D,a)=>{a.d(D,{Z:()=>Ne});var e=a(67294),C=a(45697),r=a.n(C),te=a(94117),V=a.n(te),Le=a(40264),Ee=a.n(Le),ge=a(43546),je=a.n(ge),Y=a(33483),F=a.n(Y),T=a(49549),Z=a.n(T),ce=a(68547),U=a.n(ce),q=a(97132),Qe=a.n(q),He=Object.defineProperty,ke=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,K=Object.prototype.propertyIsEnumerable,y=(ae,ne,fe)=>ne in ae?He(ae,ne,{enumerable:!0,configurable:!0,writable:!0,value:fe}):ae[ne]=fe,de=(ae,ne)=>{for(var fe in ne||(ne={}))be.call(ne,fe)&&y(ae,fe,ne[fe]);if(ke)for(var fe of ke(ne))K.call(ne,fe)&&y(ae,fe,ne[fe]);return ae};const Ve=({id:ae,name:ne,description:fe,usersCount:We,icons:Xe})=>{const{formatMessage:Je}=(0,q.useIntl)(),$e=Je({id:"Roles.RoleRow.user-count",defaultMessage:"{number, plural, =0 {#  user} one {#  user} other {# users}}"},{number:We});return e.createElement(ge.Tr,de({key:ae},(0,ce.onRowClick)({fn:Xe[1].onClick})),e.createElement(ge.Td,{maxWidth:(0,ce.pxToRem)(130)},e.createElement(Y.Typography,{ellipsis:!0,textColor:"neutral800"},ne)),e.createElement(ge.Td,{maxWidth:(0,ce.pxToRem)(250)},e.createElement(Y.Typography,{ellipsis:!0,textColor:"neutral800"},fe)),e.createElement(ge.Td,null,e.createElement(Y.Typography,{textColor:"neutral800"},$e)),e.createElement(ge.Td,null,e.createElement(Le.Flex,de({justifyContent:"flex-end"},ce.stopPropagation),Xe.map((Ae,Ze)=>Ae?e.createElement(te.Box,{key:Ae.label,paddingLeft:Ze===0?0:1},e.createElement(T.IconButton,{onClick:Ae.onClick,label:Ae.label,noBorder:!0,icon:Ae.icon})):null))))};Ve.propTypes={id:r().number.isRequired,name:r().string.isRequired,description:r().string.isRequired,usersCount:r().number.isRequired,icons:r().array.isRequired};const Ne=Ve},85302:(me,D,a)=>{a.d(D,{Z:()=>_e});var e=a(67294),C=a(68547),r=a(87751),te=a(63852),V=a(89326),Le=a.n(V),Ee=a(62982),ge=a.n(Ee),je=a(56204),Y=a.n(je),F=a(54279),T=a.n(F),Z=a(64459),ce=a(35395),U=a(43546),q=a(33483),Qe=a(80117),He=a(19631),ke=a(97132),be=a(49656),K=a(52351),y=a(67500),de=a(45697),Ve=a.n(de),Ne=a(78384),ae=a(54451),ne=a(15577),fe=a(49549),We=a(22499),Xe=a(94117),Je=a(40264),$e=a(9524),Ae=a(74657),Ze=a.n(Ae),re=a(7228),qe=a.n(re);const R=a.p+"c3de6118ef47086ad05c.png",k=a.p+"bd81ba6c07827282255d.png",N=Ne.default.div`
  position: absolute;
  z-index: 3;
  inset: 0;
  background: ${({theme:B})=>(0,C.setHexOpacity)(B.colors.neutral800,.2)};
  padding: 0 ${({theme:B})=>B.spaces[8]};
`,_=(0,Ne.default)(Je.Flex)`
  position: relative;
  max-width: ${830/16}rem;
  height: ${415/16}rem;
  margin: 0 auto;
  overflow: hidden;
  margin-top: 10%;
  padding-left: ${64/16}rem;

  img:first-of-type {
    position: absolute;
    right: 0;
    top: 0;
    max-width: ${360/16}rem;
  }

  img:not(:first-of-type) {
    width: ${130/16}rem;
    margin-left: 12%;
    margin-right: ${20/16}rem;
    z-index: 0;
  }
`,ue=(0,Ne.default)($e.Stack)`
  align-items: flex-start;
  max-width: ${400/16}rem;
  z-index: 0;
`,W=(0,Ne.default)(Xe.Box)`
  position: absolute;
  right: ${({theme:B})=>B.spaces[4]};
  top: ${({theme:B})=>B.spaces[4]};
`,Q=({onClose:B,isOpen:z})=>{(0,C.useLockScroll)(z);const{formatMessage:H}=(0,ke.useIntl)();return z?e.createElement(ae.Portal,null,e.createElement(N,{onClick:B},e.createElement(ne.FocusTrap,{onEscape:B},e.createElement(_,{onClick:h=>h.stopPropagation(),"aria-labelledby":"upgrade-plan",background:"neutral0",hasRadius:!0},e.createElement("img",{src:R,alt:"air-balloon"}),e.createElement(W,null,e.createElement(fe.IconButton,{onClick:B,"aria-label":"Close",icon:e.createElement(qe(),null)})),e.createElement(ue,{spacing:6},e.createElement(q.Typography,{fontWeight:"bold",textColor:"primary600"},H({id:"app.components.UpgradePlanModal.text-ce",defaultMessage:"COMMUNITY EDITION"})),e.createElement($e.Stack,{spacing:2},e.createElement(q.Typography,{variant:"alpha",as:"h2",id:"upgrade-plan"},H({id:"app.components.UpgradePlanModal.limit-reached",defaultMessage:"You have reached the limit"})),e.createElement(q.Typography,null,H({id:"app.components.UpgradePlanModal.text-power",defaultMessage:"Unlock the full power of Strapi by upgrading your plan to the Enterprise Edition"}))),e.createElement(We.LinkButton,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:e.createElement(Ze(),null)},H({id:"app.components.UpgradePlanModal.button",defaultMessage:"Learn more"}))),e.createElement("img",{src:k,alt:"upgrade-arrow"}))))):null};Q.propTypes={onClose:Ve().func.isRequired,isOpen:Ve().bool.isRequired};const oe=Q;var G=a(59942);const ie=()=>{const{roles:B,isLoading:z}=(0,G.bF)(),H=(0,C.useQuery)(),h=decodeURIComponent(H.get("_q")||""),Ie=(0,te.ZP)(B,h,{keys:["name","description"]});return{isLoading:z,sortedRoles:Ie}},xe=()=>{const{formatMessage:B}=(0,ke.useIntl)(),[z,H]=(0,e.useState)(!1),{trackUsage:h}=(0,C.useTracking)(),{push:Ie}=(0,be.useHistory)(),et=(0,e.useCallback)(Pe=>{Ie(`/settings/roles/${Pe}`)},[Ie]),Ye=(0,e.useCallback)(()=>{H(Pe=>!Pe)},[]),J=(0,e.useCallback)(()=>{h("didShowRBACUpgradeModal"),H(!0)},[h]),he=(0,e.useCallback)(Pe=>[{onClick:Ye,label:B({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(T(),null)},{onClick:()=>et(Pe.id),label:B({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(Y(),null)},{onClick:Ye,label:B({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(ge(),null)}],[B,Ye,et]);return{isModalOpen:z,handleToggleModalForCreatingRole:J,handleToggle:Ye,getIcons:he}},ze=()=>{const{formatMessage:B}=(0,ke.useIntl)();(0,C.useFocusWhenNavigate)();const{sortedRoles:z,isLoading:H}=ie(),{isModalOpen:h,handleToggle:Ie,handleToggleModalForCreatingRole:et,getIcons:Ye}=xe(),J=z.length+1,he=5;return e.createElement(Qe.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(ce.HeaderLayout,{primaryAction:e.createElement(Z.Button,{onClick:et,startIcon:e.createElement(Le(),null),size:"L"},B({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})),title:B({id:"global.roles",defaultMessage:"roles"}),subtitle:B({id:"Settings.roles.list.description",defaultMessage:"List of roles"})}),e.createElement(ce.ContentLayout,null,e.createElement(U.Table,{colCount:he,rowCount:J,footer:e.createElement(U.TFooter,{onClick:et,icon:e.createElement(Le(),null)},B({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"}))},e.createElement(U.Thead,null,e.createElement(U.Tr,null,e.createElement(U.Th,null,e.createElement(q.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.name",defaultMessage:"Name"}))),e.createElement(U.Th,null,e.createElement(q.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.description",defaultMessage:"Description"}))),e.createElement(U.Th,null,e.createElement(q.Typography,{variant:"sigma",textColor:"neutral600"},B({id:"global.users",defaultMessage:"Users"}))),e.createElement(U.Th,null,e.createElement(He.VisuallyHidden,null,B({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(U.Tbody,null,z==null?void 0:z.map(Pe=>e.createElement(K.Z,{key:Pe.id,id:Pe.id,name:Pe.name,description:Pe.description,usersCount:Pe.usersCount,icons:Ye(Pe)})))),!J&&!H&&e.createElement(y.Z,null)),e.createElement(oe,{isOpen:h,onClose:Ie}))},_e=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(ze,null))},35301:(me,D,a)=>{a.d(D,{Z:()=>C});const C=[]},26789:(me,D,a)=>{a.d(D,{Z:()=>Ze});var e=a(67294),C=a(47292),r=a(68547),te=a(94117),V=a(64459),Le=a(35395),Ee=a(39272),ge=a(80117),je=a(40264),Y=a(9524),F=a(33483),T=a(99136),Z=a(78607),ce=a(87760),U=a.n(ce),q=a(80831),Qe=a(27361),He=a.n(Qe),ke=a(41609),be=a.n(ke),K=a(97132),y=a(49656),de=a(78384),Ve=a(21568),Ne=a(59942),ae=a(87751),ne=a(53209);const We=ne.Ry().shape({name:ne.Z_().required(r.translatedErrors.required),description:ne.Z_().required(r.translatedErrors.required)});var Xe=a(25108),Je=(re,qe,R)=>new Promise((k,N)=>{var _=Q=>{try{W(R.next(Q))}catch(oe){N(oe)}},ue=Q=>{try{W(R.throw(Q))}catch(oe){N(oe)}},W=Q=>Q.done?k(Q.value):Promise.resolve(Q.value).then(_,ue);W((R=R.apply(re,qe)).next())});const $e=de.default.div`
  border: 1px solid ${({theme:re})=>re.colors.primary200};
  background: ${({theme:re})=>re.colors.primary100};
  padding: ${({theme:re})=>`${re.spaces[2]} ${re.spaces[4]}`};
  color: ${({theme:re})=>re.colors.primary600};
  border-radius: ${({theme:re})=>re.borderRadius};
  font-size: ${12/16}rem;
  font-weight: bold;
`,Ae=()=>{const re=(0,r.useNotification)(),{lockApp:qe,unlockApp:R}=(0,r.useOverlayBlocker)(),{formatMessage:k}=(0,K.useIntl)(),[N,_]=(0,e.useState)(!1),{replace:ue}=(0,y.useHistory)(),W=(0,e.useRef)(),{trackUsage:Q}=(0,r.useTracking)(),oe=(0,y.useRouteMatch)("/settings/roles/duplicate/:id"),G=He()(oe,"params.id",null),{isLoading:ie,data:xe}=(0,Ne.U_)(),{permissions:Ge,isLoading:ze}=(0,Ne.Dq)(G),it=B=>{qe(),_(!0),Q(G?"willDuplicateRole":"willCreateNewRole"),Promise.resolve((0,r.request)("/admin/roles",{method:"POST",body:B})).then(z=>Je(void 0,null,function*(){const{permissionsToSend:H}=W.current.getPermissions();return Q(G?"didDuplicateRole":"didCreateNewRole"),z.data.id&&!be()(H)&&(yield(0,r.request)(`/admin/roles/${z.data.id}/permissions`,{method:"PUT",body:{permissions:H}})),z})).then(z=>{_(!1),re({type:"success",message:{id:"Settings.roles.created",defaultMessage:"created"}}),ue(`/settings/roles/${z.data.id}`)}).catch(z=>{Xe.error(z),_(!1),re({type:"warning",message:{id:"notification.error"}})}).finally(()=>{R()})},_e=`${k({id:"Settings.roles.form.created",defaultMessage:"Created"})} ${(0,C.format)(new Date,"PPP")}`;return e.createElement(ge.Main,null,e.createElement(r.SettingsPageTitle,{name:"Roles"}),e.createElement(q.Formik,{initialValues:{name:"",description:_e},onSubmit:it,validationSchema:We,validateOnChange:!1},({handleSubmit:B,values:z,errors:H,handleReset:h,handleChange:Ie})=>e.createElement(r.Form,{noValidate:!0},e.createElement(e.Fragment,null,e.createElement(Le.HeaderLayout,{primaryAction:e.createElement(Y.Stack,{horizontal:!0,spacing:2},e.createElement(V.Button,{variant:"secondary",onClick:()=>{h(),W.current.resetForm()},size:"L"},k({id:"app.components.Button.reset",defaultMessage:"Reset"})),e.createElement(V.Button,{onClick:B,loading:N,size:"L"},k({id:"global.save",defaultMessage:"Save"}))),title:k({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:k({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"}),navigationAction:e.createElement(r.Link,{startIcon:e.createElement(U(),null),to:"/settings/roles"},k({id:"global.back",defaultMessage:"Back"}))}),e.createElement(Le.ContentLayout,null,e.createElement(Y.Stack,{spacing:6},e.createElement(te.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(Y.Stack,{spacing:4},e.createElement(je.Flex,{justifyContent:"space-between"},e.createElement(te.Box,null,e.createElement(te.Box,null,e.createElement(F.Typography,{fontWeight:"bold"},k({id:"global.details",defaultMessage:"Details"}))),e.createElement(te.Box,null,e.createElement(F.Typography,{variant:"pi",textColor:"neutral600"},k({id:"Settings.roles.form.description",defaultMessage:"Name and description of the role"})))),e.createElement($e,null,k({id:"Settings.roles.form.button.users-with-role",defaultMessage:"{number, plural, =0 {# users} one {# user} other {# users}} with this role"},{number:0}))),e.createElement(Ee.Grid,{gap:4},e.createElement(Ee.GridItem,{col:6},e.createElement(T.TextInput,{name:"name",error:H.name&&k({id:H.name}),label:k({id:"global.name",defaultMessage:"Name"}),onChange:Ie,value:z.name})),e.createElement(Ee.GridItem,{col:6},e.createElement(Z.Textarea,{label:k({id:"global.description",defaultMessage:"Description"}),name:"description",error:H.description&&k({id:H.description}),onChange:Ie},z.description))))),!ie&&!ze?e.createElement(te.Box,{shadow:"filterShadow",hasRadius:!0},e.createElement(Ve.Z,{isFormDisabled:!1,ref:W,permissions:Ge,layout:xe})):e.createElement(te.Box,{background:"neutral0",padding:6,shadow:"filterShadow",hasRadius:!0},e.createElement(r.LoadingIndicatorPage,null))))))))},Ze=()=>e.createElement(r.CheckPagePermissions,{permissions:ae.Z.settings.roles.create},e.createElement(Ae,null))},53273:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},20591:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},74512:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},76766:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},85822:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},8629:(me,D,a)=>{a.d(D,{Z:()=>C});const C=!1},64527:(me,D,a)=>{a.d(D,{Z:()=>qe});var e=a(67294),C=a(68547),r=a(87751),te=a(89326),V=a.n(te),Le=a(62982),Ee=a.n(Le),ge=a(54279),je=a.n(ge),Y=a(56204),F=a.n(Y),T=a(64459),Z=a(35395),ce=a(19631),U=a(80117),q=a(43546),Qe=a(33483),He=a(96486),ke=a(63852),be=a(97132),K=a(49656),y=a(23998),de=a(59942),Ve=a(67500),Ne=a(52351),ae=a(73749);const ne={roleToDelete:null,showModalConfirmButtonLoading:!1,shouldRefetchData:!1},We=(R,k)=>(0,ae.default)(R,N=>{switch(k.type){case"ON_REMOVE_ROLES":{N.showModalConfirmButtonLoading=!0;break}case"ON_REMOVE_ROLES_SUCCEEDED":{N.shouldRefetchData=!0,N.roleToDelete=null;break}case"RESET_DATA_TO_DELETE":{N.shouldRefetchData=!1,N.roleToDelete=null,N.showModalConfirmButtonLoading=!1;break}case"SET_ROLE_TO_DELETE":{N.roleToDelete=k.id;break}default:return N}});var Xe=(R,k,N)=>new Promise((_,ue)=>{var W=G=>{try{oe(N.next(G))}catch(ie){ue(ie)}},Q=G=>{try{oe(N.throw(G))}catch(ie){ue(ie)}},oe=G=>G.done?_(G.value):Promise.resolve(G.value).then(W,Q);oe((N=N.apply(R,k)).next())});const Je=()=>{(0,C.useFocusWhenNavigate)();const{isLoading:R,allowedActions:{canCreate:k,canDelete:N,canRead:_,canUpdate:ue}}=(0,C.useRBAC)(r.Z.settings.roles),{getData:W,roles:Q,isLoading:oe}=(0,de.bF)(!1),[{query:G}]=(0,C.useQueryParams)(),ie=(G==null?void 0:G._q)||"",xe=(0,ke.ZP)(Q,ie,{keys:["name","description"]});return(0,e.useEffect)(()=>{!R&&_&&W()},[R,_,W]),{isLoadingForPermissions:R,canCreate:k,canDelete:N,canRead:_,canUpdate:ue,isLoading:oe,getData:W,sortedRoles:xe,roles:Q}},$e=({getData:R,canCreate:k,canDelete:N,canUpdate:_})=>{const{formatMessage:ue}=(0,be.useIntl)(),W=(0,C.useNotification)(),[Q,oe]=(0,e.useState)(!1),{push:G}=(0,K.useHistory)(),[{selectedRoles:ie,showModalConfirmButtonLoading:xe,roleToDelete:Ge},ze]=(0,e.useReducer)(We,ne),it=()=>Xe(void 0,null,function*(){try{ze({type:"ON_REMOVE_ROLES"}),yield y.be.post("/admin/roles/batch-delete",{ids:[Ge]}),yield R(),ze({type:"RESET_DATA_TO_DELETE"})}catch(J){const he=(0,He.get)(J,["response","payload","data","ids"],null);if(he&&Array.isArray(he)){const Pe=he.join(`
`);W({type:"warning",message:Pe})}else W({type:"warning",message:{id:"notification.error"}})}H()}),_e=(0,e.useCallback)(J=>{G(`/settings/roles/duplicate/${J}`)},[G]),B=()=>G("/settings/roles/new"),z=(0,e.useCallback)(J=>{ze({type:"SET_ROLE_TO_DELETE",id:J}),H()},[]),H=()=>oe(J=>!J),h=(0,e.useCallback)(J=>{G(`/settings/roles/${J}`)},[G]),Ie=(0,e.useCallback)((J,he)=>{J.preventDefault(),J.stopPropagation(),he.usersCount?W({type:"info",message:{id:"Roles.ListPage.notification.delete-not-allowed"}}):z(he.id)},[W,z]),et=(0,e.useCallback)((J,he)=>{J.preventDefault(),J.stopPropagation(),_e(he.id)},[_e]),Ye=(0,e.useCallback)(J=>[...k?[{onClick:he=>et(he,J),label:ue({id:"app.utils.duplicate",defaultMessage:"Duplicate"}),icon:e.createElement(je(),null)}]:[],..._?[{onClick:()=>h(J.id),label:ue({id:"app.utils.edit",defaultMessage:"Edit"}),icon:e.createElement(F(),null)}]:[],...N?[{onClick:he=>Ie(he,J),label:ue({id:"global.delete",defaultMessage:"Delete"}),icon:e.createElement(Ee(),null)}]:[]],[ue,Ie,et,h,k,_,N]);return{handleNewRoleClick:B,getIcons:Ye,selectedRoles:ie,isWarningDeleteAllOpened:Q,showModalConfirmButtonLoading:xe,handleToggleModal:H,handleDeleteData:it}},Ze=()=>{const{formatMessage:R}=(0,be.useIntl)(),{isLoadingForPermissions:k,canCreate:N,canRead:_,canDelete:ue,canUpdate:W,isLoading:Q,getData:oe,sortedRoles:G}=Je(),{handleNewRoleClick:ie,getIcons:xe,isWarningDeleteAllOpened:Ge,showModalConfirmButtonLoading:ze,handleToggleModal:it,handleDeleteData:_e}=$e({getData:oe,canCreate:N,canDelete:ue,canUpdate:W}),B=G.length+1,z=6;if(k)return e.createElement(U.Main,null,e.createElement(C.LoadingIndicatorPage,null));const H=R({id:"global.roles",defaultMessage:"roles"});return e.createElement(U.Main,null,e.createElement(C.SettingsPageTitle,{name:"Roles"}),e.createElement(Z.HeaderLayout,{primaryAction:N?e.createElement(T.Button,{onClick:ie,startIcon:e.createElement(V(),null),size:"L"},R({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null,title:H,subtitle:R({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),as:"h2"}),_&&e.createElement(Z.ActionLayout,{startActions:e.createElement(C.SearchURLQuery,{label:R({id:"app.component.search.label",defaultMessage:"Search for {target}"},{target:H})})}),_&&e.createElement(Z.ContentLayout,null,e.createElement(q.Table,{colCount:z,rowCount:B,footer:N?e.createElement(q.TFooter,{onClick:ie,icon:e.createElement(V(),null)},R({id:"Settings.roles.list.button.add",defaultMessage:"Add new role"})):null},e.createElement(q.Thead,null,e.createElement(q.Tr,null,e.createElement(q.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},R({id:"global.name",defaultMessage:"Name"}))),e.createElement(q.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},R({id:"global.description",defaultMessage:"Description"}))),e.createElement(q.Th,null,e.createElement(Qe.Typography,{variant:"sigma",textColor:"neutral600"},R({id:"global.users",defaultMessage:"Users"}))),e.createElement(q.Th,null,e.createElement(ce.VisuallyHidden,null,R({id:"global.actions",defaultMessage:"Actions"}))))),e.createElement(q.Tbody,null,G==null?void 0:G.map(h=>e.createElement(Ne.Z,{key:h.id,id:h.id,name:h.name,description:h.description,usersCount:h.usersCount,icons:xe(h)})))),!B&&!Q&&e.createElement(Ve.Z,null)),e.createElement(C.ConfirmDialog,{isOpen:Ge,onConfirm:_e,isConfirmButtonLoading:ze,onToggleDialog:it}))},qe=()=>e.createElement(C.CheckPagePermissions,{permissions:r.Z.settings.roles.main},e.createElement(Ze,null))},5420:(me,D,a)=>{a.d(D,{Z:()=>te});var e=(V,Le,Ee)=>new Promise((ge,je)=>{var Y=Z=>{try{T(Ee.next(Z))}catch(ce){je(ce)}},F=Z=>{try{T(Ee.throw(Z))}catch(ce){je(ce)}},T=Z=>Z.done?ge(Z.value):Promise.resolve(Z.value).then(Y,F);T((Ee=Ee.apply(V,Le)).next())});const te=[...strapi.features.isEnabled(strapi.features.SSO)?[{Component:()=>e(void 0,null,function*(){return yield a.e(302).then(a.bind(a,29808))}),to:"/settings/single-sign-on",exact:!0}]:[]]}}]);

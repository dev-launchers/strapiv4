(self.webpackChunkdevlaunchers_strapiv4=self.webpackChunkdevlaunchers_strapiv4||[]).push([[8853],{80117:(A,_,c)=>{"use strict";A.exports=c(41706)},41706:function(A,_,c){(function(n,T){A.exports=T(c(67294),c(78384))})(this,function(n,T){return function(o){var d={};function s(l){if(d[l])return d[l].exports;var i=d[l]={i:l,l:!1,exports:{}};return o[l].call(i.exports,i,i.exports,s),i.l=!0,i.exports}return s.m=o,s.c=d,s.d=function(l,i,m){s.o(l,i)||Object.defineProperty(l,i,{enumerable:!0,get:m})},s.r=function(l){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(l,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(l,"__esModule",{value:!0})},s.t=function(l,i){if(1&i&&(l=s(l)),8&i||4&i&&typeof l=="object"&&l&&l.__esModule)return l;var m=Object.create(null);if(s.r(m),Object.defineProperty(m,"default",{enumerable:!0,value:l}),2&i&&typeof l!="string")for(var p in l)s.d(m,p,function(O){return l[O]}.bind(null,p));return m},s.n=function(l){var i=l&&l.__esModule?function(){return l.default}:function(){return l};return s.d(i,"a",i),i},s.o=function(l,i){return Object.prototype.hasOwnProperty.call(l,i)},s.p="",s(s.s=110)}({0:function(o,d,s){o.exports=s(19)()},1:function(o,d){o.exports=n},10:function(o,d,s){var l=s(25),i=s(26),m=s(22),p=s(27);o.exports=function(O,h){return l(O)||i(O,h)||m(O,h)||p()},o.exports.default=o.exports,o.exports.__esModule=!0},110:function(o,d,s){"use strict";s.r(d),s.d(d,"Main",function(){return a}),s.d(d,"SkipToContent",function(){return X});var l,i=s(5),m=s.n(i),p=s(4),O=s.n(p),h=s(3),C=s.n(h),L=s(1),B=s.n(L),v=s(0),w=s.n(v),j=s(2),M=s.n(j),G=["labelledBy"],k=M.a.main(l||(l=C()([`
  // To prevent global outline on focus visible to force an outline when Main is focused
  &:focus-visible {
    outline: none;
  }
`]))),a=function(H){var q=H.labelledBy,se=O()(H,G),oe=q||"main-content-title";return B.a.createElement(k,m()({"aria-labelledby":oe,id:"main-content",tabIndex:-1},se))};a.defaultProps={labelledBy:void 0},a.propTypes={labelledBy:w.a.string};var f,x=s(6),Q=M()(x.Box)(f||(f=C()([`
  text-decoration: none;
  position: absolute;
  z-index: 9999;
  left: -100%;
  top: -100%;

  &:focus {
    left: `,`;
    top: `,`;
  }
`])),function(H){return H.theme.spaces[3]},function(H){return H.theme.spaces[3]}),X=function(H){var q=H.children;return B.a.createElement(Q,{as:"a",href:"#main-content",background:"primary600",color:"neutral0",padding:3,hasRadius:!0},q)};X.propTypes={children:w.a.node.isRequired}},13:function(o,d){function s(l){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?(o.exports=s=function(i){return typeof i},o.exports.default=o.exports,o.exports.__esModule=!0):(o.exports=s=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},o.exports.default=o.exports,o.exports.__esModule=!0),s(l)}o.exports=s,o.exports.default=o.exports,o.exports.__esModule=!0},19:function(o,d,s){"use strict";var l=s(20);function i(){}function m(){}m.resetWarningCache=i,o.exports=function(){function p(C,L,B,v,w,j){if(j!==l){var M=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw M.name="Invariant Violation",M}}function O(){return p}p.isRequired=p;var h={array:p,bool:p,func:p,number:p,object:p,string:p,symbol:p,any:p,arrayOf:O,element:p,elementType:p,instanceOf:O,node:p,objectOf:O,oneOf:O,oneOfType:O,shape:O,exact:O,checkPropTypes:m,resetWarningCache:i};return h.PropTypes=h,h}},2:function(o,d){o.exports=T},20:function(o,d,s){"use strict";o.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},21:function(o,d){o.exports=function(s,l){(l==null||l>s.length)&&(l=s.length);for(var i=0,m=new Array(l);i<l;i++)m[i]=s[i];return m},o.exports.default=o.exports,o.exports.__esModule=!0},22:function(o,d,s){var l=s(21);o.exports=function(i,m){if(i){if(typeof i=="string")return l(i,m);var p=Object.prototype.toString.call(i).slice(8,-1);return p==="Object"&&i.constructor&&(p=i.constructor.name),p==="Map"||p==="Set"?Array.from(i):p==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(p)?l(i,m):void 0}},o.exports.default=o.exports,o.exports.__esModule=!0},24:function(o,d){o.exports=function(s,l){if(s==null)return{};var i,m,p={},O=Object.keys(s);for(m=0;m<O.length;m++)i=O[m],l.indexOf(i)>=0||(p[i]=s[i]);return p},o.exports.default=o.exports,o.exports.__esModule=!0},25:function(o,d){o.exports=function(s){if(Array.isArray(s))return s},o.exports.default=o.exports,o.exports.__esModule=!0},26:function(o,d){o.exports=function(s,l){var i=s==null?null:typeof Symbol!="undefined"&&s[Symbol.iterator]||s["@@iterator"];if(i!=null){var m,p,O=[],h=!0,C=!1;try{for(i=i.call(s);!(h=(m=i.next()).done)&&(O.push(m.value),!l||O.length!==l);h=!0);}catch(L){C=!0,p=L}finally{try{h||i.return==null||i.return()}finally{if(C)throw p}}return O}},o.exports.default=o.exports,o.exports.__esModule=!0},27:function(o,d){o.exports=function(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)},o.exports.default=o.exports,o.exports.__esModule=!0},3:function(o,d){o.exports=function(s,l){return l||(l=s.slice(0)),Object.freeze(Object.defineProperties(s,{raw:{value:Object.freeze(l)}}))},o.exports.default=o.exports,o.exports.__esModule=!0},4:function(o,d,s){var l=s(24);o.exports=function(i,m){if(i==null)return{};var p,O,h=l(i,m);if(Object.getOwnPropertySymbols){var C=Object.getOwnPropertySymbols(i);for(O=0;O<C.length;O++)p=C[O],m.indexOf(p)>=0||Object.prototype.propertyIsEnumerable.call(i,p)&&(h[p]=i[p])}return h},o.exports.default=o.exports,o.exports.__esModule=!0},5:function(o,d){function s(){return o.exports=s=Object.assign||function(l){for(var i=1;i<arguments.length;i++){var m=arguments[i];for(var p in m)Object.prototype.hasOwnProperty.call(m,p)&&(l[p]=m[p])}return l},o.exports.default=o.exports,o.exports.__esModule=!0,s.apply(this,arguments)}o.exports=s,o.exports.default=o.exports,o.exports.__esModule=!0},6:function(o,d,s){"use strict";s.r(d),s.d(d,"Box",function(){return k});var l,i=s(3),m=s.n(i),p=s(2),O=s.n(p),h=s(7),C=s(1),L=s.n(C),B=s(0),v=s.n(B),w=function(a){return L.a.createElement("div",a)},j={background:void 0,borderColor:void 0,color:void 0,hiddenS:!1,hiddenXS:!1,padding:void 0,paddingTop:void 0,paddingRight:void 0,paddingBottom:void 0,paddingLeft:void 0,hasRadius:!1,shadow:void 0,children:null,shrink:void 0,grow:void 0,basis:void 0,flex:void 0,_hover:function(){}},M={_hover:v.a.func,background:v.a.string,basis:v.a.oneOfType([v.a.string,v.a.string]),borderColor:v.a.string,children:v.a.oneOfType([v.a.node,v.a.string]),color:v.a.string,flex:v.a.oneOfType([v.a.string,v.a.string]),grow:v.a.oneOfType([v.a.string,v.a.string]),hasRadius:v.a.bool,hiddenS:v.a.bool,hiddenXS:v.a.bool,padding:v.a.oneOfType([v.a.number,v.a.arrayOf(v.a.number)]),paddingBottom:v.a.oneOfType([v.a.number,v.a.arrayOf(v.a.number)]),paddingLeft:v.a.oneOfType([v.a.number,v.a.arrayOf(v.a.number)]),paddingRight:v.a.oneOfType([v.a.number,v.a.arrayOf(v.a.number)]),paddingTop:v.a.oneOfType([v.a.number,v.a.arrayOf(v.a.number)]),shadow:v.a.string,shrink:v.a.oneOfType([v.a.string,v.a.string])};w.defaultProps=j,w.propTypes=M;var G={color:!0},k=O.a.div.withConfig({shouldForwardProp:function(a,f){return!G[a]&&f(a)}})(l||(l=m()([`
  // Font
  font-size: `,`;

  // Colors
  background: `,`;
  color: `,`;

  // Spaces
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`
  `,`

  // Responsive hiding
  `,`
  `,`
  

  // Borders
  border-radius: `,`;
  border-style: `,`;
  border-width: `,`;
  border-color: `,`;
  border: `,`;

  // Shadows
  box-shadow: `,`;

  // Handlers
  pointer-events: `,`;
  &:hover {
    `,`
  }

  // Display
  display: `,`;

  // Position
  position: `,`;
  left: `,`;
  right: `,`;
  top: `,`;
  bottom: `,`;
  z-index: `,`;
  overflow: `,`;
  cursor: `,`;

  // Size
  width: `,`;
  max-width: `,`;
  min-width: `,`;
  height: `,`;
  max-height: `,`;
  min-height: `,`;

  // Animation
  transition: `,`;
  transform: `,`;
  animation: `,`;

  //Flexbox children props
  flex-shrink: `,`;
  flex-grow: `,`;
  flex-basis: `,`;
  flex: `,`;

  // Text
  text-align: `,`;
  text-transform: `,`;
  line-height: `,`;

  // Cursor
  cursor: `,`;
`])),function(a){var f=a.fontSize;return a.theme.fontSizes[f]||f},function(a){var f=a.theme,x=a.background;return f.colors[x]},function(a){var f=a.theme,x=a.color;return f.colors[x]},function(a){var f=a.theme,x=a.padding;return Object(h.a)("padding",x,f)},function(a){var f=a.theme,x=a.paddingTop;return Object(h.a)("padding-top",x,f)},function(a){var f=a.theme,x=a.paddingRight;return Object(h.a)("padding-right",x,f)},function(a){var f=a.theme,x=a.paddingBottom;return Object(h.a)("padding-bottom",x,f)},function(a){var f=a.theme,x=a.paddingLeft;return Object(h.a)("padding-left",x,f)},function(a){var f=a.theme,x=a.marginLeft;return Object(h.a)("margin-left",x,f)},function(a){var f=a.theme,x=a.marginRight;return Object(h.a)("margin-right",x,f)},function(a){var f=a.theme,x=a.marginTop;return Object(h.a)("margin-top",x,f)},function(a){var f=a.theme,x=a.marginBottom;return Object(h.a)("margin-bottom",x,f)},function(a){var f=a.theme;return a.hiddenS?"".concat(f.mediaQueries.tablet," { display: none; }"):void 0},function(a){var f=a.theme;return a.hiddenXS?"".concat(f.mediaQueries.mobile," { display: none; }"):void 0},function(a){var f=a.theme,x=a.hasRadius,Q=a.borderRadius;return x?f.borderRadius:Q},function(a){return a.borderStyle},function(a){return a.borderWidth},function(a){var f=a.borderColor;return a.theme.colors[f]},function(a){var f=a.theme,x=a.borderColor,Q=a.borderStyle,X=a.borderWidth;if(x&&!Q&&!X)return"1px solid ".concat(f.colors[x])},function(a){var f=a.theme,x=a.shadow;return f.shadows[x]},function(a){return a.pointerEvents},function(a){var f=a._hover,x=a.theme;return f?f(x):void 0},function(a){return a.display},function(a){return a.position},function(a){var f=a.left;return a.theme.spaces[f]||f},function(a){var f=a.right;return a.theme.spaces[f]||f},function(a){var f=a.top;return a.theme.spaces[f]||f},function(a){var f=a.bottom;return a.theme.spaces[f]||f},function(a){return a.zIndex},function(a){return a.overflow},function(a){return a.cursor},function(a){var f=a.width;return a.theme.spaces[f]||f},function(a){var f=a.maxWidth;return a.theme.spaces[f]||f},function(a){var f=a.minWidth;return a.theme.spaces[f]||f},function(a){var f=a.height;return a.theme.spaces[f]||f},function(a){var f=a.maxHeight;return a.theme.spaces[f]||f},function(a){var f=a.minHeight;return a.theme.spaces[f]||f},function(a){return a.transition},function(a){return a.transform},function(a){return a.animation},function(a){return a.shrink},function(a){return a.grow},function(a){return a.basis},function(a){return a.flex},function(a){return a.textAlign},function(a){return a.textTransform},function(a){return a.lineHeight},function(a){return a.cursor});k.defaultProps=j,k.propTypes=M},7:function(o,d,s){"use strict";var l=s(10),i=s.n(l),m=s(13),p=s.n(m);d.a=function(O,h,C){var L=h;if(Array.isArray(h)||p()(h)!=="object"||(L=[h==null?void 0:h.desktop,h==null?void 0:h.tablet,h==null?void 0:h.mobile]),L!==void 0){if(Array.isArray(L)){var B=L,v=i()(B,3),w=v[0],j=v[1],M=v[2],G="".concat(O,": ").concat(C.spaces[w],";");return j!==void 0&&(G+="".concat(C.mediaQueries.tablet,`{
          `).concat(O,": ").concat(C.spaces[j],`;
        }`)),M!==void 0&&(G+="".concat(C.mediaQueries.mobile,`{
          `).concat(O,": ").concat(C.spaces[M],`;
        }`)),G}var k=C.spaces[L]||L;return"".concat(O,": ").concat(k,";")}}}})})},17581:function(A,_,c){(function(n,T){A.exports=T(c(67294))})(this,function(n){return function(T){var o={};function d(s){if(o[s])return o[s].exports;var l=o[s]={i:s,l:!1,exports:{}};return T[s].call(l.exports,l,l.exports,d),l.l=!0,l.exports}return d.m=T,d.c=o,d.d=function(s,l,i){d.o(s,l)||Object.defineProperty(s,l,{enumerable:!0,get:i})},d.r=function(s){typeof Symbol!="undefined"&&Symbol.toStringTag&&Object.defineProperty(s,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(s,"__esModule",{value:!0})},d.t=function(s,l){if(1&l&&(s=d(s)),8&l||4&l&&typeof s=="object"&&s&&s.__esModule)return s;var i=Object.create(null);if(d.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:s}),2&l&&typeof s!="string")for(var m in s)d.d(i,m,function(p){return s[p]}.bind(null,m));return i},d.n=function(s){var l=s&&s.__esModule?function(){return s.default}:function(){return s};return d.d(l,"a",l),l},d.o=function(s,l){return Object.prototype.hasOwnProperty.call(s,l)},d.p="",d(d.s=35)}({0:function(T,o){T.exports=n},35:function(T,o,d){"use strict";d.r(o);var s=d(0);function l(){return(l=Object.assign||function(i){for(var m=1;m<arguments.length;m++){var p=arguments[m];for(var O in p)Object.prototype.hasOwnProperty.call(p,O)&&(i[O]=p[O])}return i}).apply(this,arguments)}o.default=function(i){return s.createElement("svg",l({width:"1em",height:"1em",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},i),s.createElement("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M2.68 9.192c-.6.276-2.114 1.18-2.306 1.303a.792.792 0 00-.374.68v1.65a.797.797 0 00.384.687c.254.16 1.73 1.042 2.306 1.303l.744 1.8c-.24.634-.67 2.333-.72 2.554a.797.797 0 00.216.744l1.167 1.166a.801.801 0 00.744.216l.03-.008c.36-.092 1.946-.498 2.523-.712l1.8.744c.276.6 1.181 2.115 1.304 2.307a.805.805 0 00.679.374h1.649a.797.797 0 00.686-.384c.16-.254 1.042-1.73 1.303-2.306l1.8-.744c.634.24 2.333.67 2.554.72a.797.797 0 00.744-.216l1.166-1.167a.803.803 0 00.216-.744l-.008-.03c-.092-.36-.498-1.946-.712-2.523l.744-1.8c.6-.276 2.115-1.181 2.307-1.304a.804.804 0 00.374-.679v-1.649a.796.796 0 00-.382-.679c-.254-.16-1.73-1.041-2.306-1.303l-.744-1.8c.24-.634.67-2.333.72-2.554a.796.796 0 00-.216-.744l-1.166-1.173a.802.802 0 00-.744-.216l-.03.008c-.361.092-1.947.498-2.524.712l-1.8-.744c-.276-.6-1.18-2.115-1.303-2.307a.803.803 0 00-.68-.374h-1.65a.797.797 0 00-.68.382c-.16.254-1.041 1.73-1.303 2.306l-1.8.744c-.634-.24-2.333-.67-2.554-.72a.797.797 0 00-.744.216L2.921 4.094a.802.802 0 00-.216.744l.008.03c.092.361.498 1.947.712 2.524l-.744 1.8zM12 17a5 5 0 100-10 5 5 0 000 10z",fill:"#212134"}))}}})})},16098:(A,_,c)=>{"use strict";c.r(_),c.d(_,{default:()=>Tn});var n=c(67294),T=c(49656),o=c(68547),d=c(31498),s=c(81912),l=c(64459),i=c(35395),m=c(80117),p=c(43546),O=c(19631),h=c(33483),C=c(67422),L=c(89326),B=c.n(L),v=c(97132),w=c(23724),j=c(63852),M=c(89031),G=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const k=(r,e)=>G(void 0,null,function*(){try{const{data:t}=yield M.be.get((0,M.Gc)("roles"));return e("The roles have loaded successfully"),t}catch(t){throw r({type:"warning",message:{id:"notification.error"}}),new Error("error")}}),a=(r,e)=>G(void 0,null,function*(){try{yield M.be.delete(`${(0,M.Gc)("roles")}/${r}`)}catch(t){e({type:"warning",message:{id:"notification.error",defaultMessage:"An error occured"}})}});var f=c(45697),x=c.n(f),Q=c(49549),X=c(40264),H=c(56204),q=c.n(H),se=c(62982),oe=c.n(se),ot=Object.defineProperty,de=Object.getOwnPropertySymbols,at=Object.prototype.hasOwnProperty,it=Object.prototype.propertyIsEnumerable,pe=(r,e,t)=>e in r?ot(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,me=(r,e)=>{for(var t in e||(e={}))at.call(e,t)&&pe(r,t,e[t]);if(de)for(var t of de(e))it.call(e,t)&&pe(r,t,e[t]);return r};const ae=({sortedRoles:r,canDelete:e,permissions:t,setRoleToDelete:y,onDelete:b})=>{const{formatMessage:P}=(0,v.useIntl)(),{push:R}=(0,T.useHistory)(),[g,u]=b,E=S=>e&&!["public","authenticated"].includes(S.type),D=S=>{y(S),u(!g)},U=S=>{R(`/settings/${d.Z}/roles/${S}`)};return n.createElement(p.Tbody,null,r==null?void 0:r.map(S=>n.createElement(p.Tr,me({key:S.name},(0,o.onRowClick)({fn:()=>U(S.id)})),n.createElement(p.Td,{width:"20%"},n.createElement(h.Typography,null,S.name)),n.createElement(p.Td,{width:"50%"},n.createElement(h.Typography,null,S.description)),n.createElement(p.Td,{width:"30%"},n.createElement(h.Typography,null,`${S.nb_users} ${P({id:"global.users",defaultMessage:"users"}).toLowerCase()}`)),n.createElement(p.Td,null,n.createElement(X.Flex,me({justifyContent:"end"},o.stopPropagation),n.createElement(o.CheckPermissions,{permissions:t.updateRole},n.createElement(Q.IconButton,{onClick:()=>U(S.id),noBorder:!0,icon:n.createElement(q(),null),label:P({id:"app.component.table.edit",defaultMessage:"Edit {target}"},{target:`${S.name}`})})),E(S)&&n.createElement(o.CheckPermissions,{permissions:t.deleteRole},n.createElement(Q.IconButton,{onClick:()=>D(S.id),noBorder:!0,icon:n.createElement(oe(),null),label:P({id:"global.delete-target",defaultMessage:"Delete {target}"},{target:`${S.name}`})})))))))},lt=ae;ae.defaultProps={canDelete:!1},ae.propTypes={onDelete:x().array.isRequired,permissions:x().object.isRequired,setRoleToDelete:x().func.isRequired,sortedRoles:x().array.isRequired,canDelete:x().bool};var fe=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const ct=()=>{const{trackUsage:r}=(0,o.useTracking)(),{formatMessage:e}=(0,v.useIntl)(),{push:t}=(0,T.useHistory)(),y=(0,o.useNotification)(),{notifyStatus:b}=(0,C.useNotifyAT)(),[{query:P}]=(0,o.useQueryParams)(),R=(P==null?void 0:P._q)||"",[g,u]=(0,n.useState)(!1),[E,D]=(0,n.useState)(!1),[U,S]=(0,n.useState)();(0,o.useFocusWhenNavigate)();const N=(0,w.useQueryClient)(),I=(0,n.useMemo)(()=>({create:s.Z.createRole,read:s.Z.readRoles,update:s.Z.updateRole,delete:s.Z.deleteRole}),[]),{isLoading:$,allowedActions:{canRead:V,canDelete:J}}=(0,o.useRBAC)(I),{isLoading:Cn,data:{roles:ue},isFetching:Sn}=(0,w.useQuery)("get-roles",()=>k(y,b),{initialData:{},enabled:V}),st=Cn||Sn,wn=()=>{r("willCreateRole"),t(`/settings/${d.Z}/roles/new`)},An=()=>{u(!g)},Dn={roles:{id:(0,M.OB)("Roles.empty"),defaultMessage:"You don't have any roles yet."},search:{id:(0,M.OB)("Roles.empty.search"),defaultMessage:"No roles match the search."}},Ln=e({id:"global.roles",defaultMessage:"Roles"}),Mn=(0,w.useMutation)(In=>a(In,y),{onSuccess:()=>fe(void 0,null,function*(){yield N.invalidateQueries("get-roles")})}),jn=()=>fe(void 0,null,function*(){D(!0),yield Mn.mutateAsync(U),u(!g),D(!1)}),ee=(0,j.ZP)(ue||[],R,{keys:["name","description"]}),_n=R&&!ee.length?"search":"roles",Un=4,Bn=((ue==null?void 0:ue.length)||0)+1;return n.createElement(i.Layout,null,n.createElement(o.SettingsPageTitle,{name:Ln}),n.createElement(m.Main,{"aria-busy":st},n.createElement(i.HeaderLayout,{title:e({id:"global.roles",defaultMessage:"Roles"}),subtitle:e({id:"Settings.roles.list.description",defaultMessage:"List of roles"}),primaryAction:n.createElement(o.CheckPermissions,{permissions:s.Z.createRole},n.createElement(l.Button,{onClick:wn,startIcon:n.createElement(B(),null),size:"L"},e({id:(0,M.OB)("List.button.roles"),defaultMessage:"Add new role"})))}),n.createElement(i.ActionLayout,{startActions:n.createElement(o.SearchURLQuery,{label:e({id:"app.component.search.label",defaultMessage:"Search"})})}),n.createElement(i.ContentLayout,null,!V&&n.createElement(o.NoPermissions,null),(st||$)&&n.createElement(o.LoadingIndicatorPage,null),V&&ee&&(ee==null?void 0:ee.length)?n.createElement(p.Table,{colCount:Un,rowCount:Bn},n.createElement(p.Thead,null,n.createElement(p.Tr,null,n.createElement(p.Th,null,n.createElement(h.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.name",defaultMessage:"Name"}))),n.createElement(p.Th,null,n.createElement(h.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.description",defaultMessage:"Description"}))),n.createElement(p.Th,null,n.createElement(h.Typography,{variant:"sigma",textColor:"neutral600"},e({id:"global.users",defaultMessage:"Users"}))),n.createElement(p.Th,null,n.createElement(O.VisuallyHidden,null,e({id:"global.actions",defaultMessage:"Actions"}))))),n.createElement(lt,{sortedRoles:ee,canDelete:J,permissions:s.Z,setRoleToDelete:S,onDelete:[g,u]})):n.createElement(o.EmptyStateLayout,{content:Dn[_n]})),n.createElement(o.ConfirmDialog,{isConfirmButtonLoading:E,onConfirm:jn,onToggleDialog:An,isOpen:g})))},ut=()=>n.createElement(o.CheckPagePermissions,{permissions:s.Z.accessRoles},n.createElement(ct,null));var ge=c(80831),F=c(9524),W=c(94117),ve=c(99136),ye=c(78607),dt=c(87760),pt=c.n(dt),mt=c(22754),he=c.n(mt),Z=c(39272),K=c(84757),z=c(96486);const Pe=(0,n.createContext)({}),Ee=({children:r,value:e})=>n.createElement(Pe.Provider,{value:e},r),ie=()=>(0,n.useContext)(Pe);Ee.propTypes={children:x().node.isRequired,value:x().object.isRequired};var te=c(78384),ft=c(35161),gt=c.n(ft),vt=c(13217),yt=c.n(vt);const ht=r=>{switch(r){case"POST":return{text:"success600",border:"success200",background:"success100"};case"GET":return{text:"secondary600",border:"secondary200",background:"secondary100"};case"PUT":return{text:"warning600",border:"warning200",background:"warning100"};case"DELETE":return{text:"danger600",border:"danger200",background:"danger100"};default:return{text:"neutral600",border:"neutral200",background:"neutral100"}}},Pt=(0,te.default)(W.Box)`
  margin: -1px;
  border-radius: ${({theme:r})=>r.spaces[1]} 0 0 ${({theme:r})=>r.spaces[1]};
`;function le({route:r}){const{formatMessage:e}=(0,v.useIntl)(),{method:t,handler:y,path:b}=r,P=b?yt()(b.split("/")):[],[R="",g=""]=y?y.split("."):[],u=ht(r.method);return n.createElement(F.Stack,{spacing:2},n.createElement(h.Typography,{variant:"delta",as:"h3"},e({id:"users-permissions.BoundRoute.title",defaultMessage:"Bound route to"}),"\xA0",n.createElement("span",null,R),n.createElement(h.Typography,{variant:"delta",textColor:"primary600"},".",g)),n.createElement(F.Stack,{horizontal:!0,hasRadius:!0,background:"neutral0",borderColor:"neutral200",spacing:0},n.createElement(Pt,{background:u.background,borderColor:u.border,padding:2},n.createElement(h.Typography,{fontWeight:"bold",textColor:u.text},t)),n.createElement(W.Box,{paddingLeft:2,paddingRight:2},gt()(P,E=>n.createElement(h.Typography,{key:E,textColor:E.includes(":")?"neutral600":"neutral900"},"/",E)))))}le.defaultProps={route:{handler:"Nocontroller.error",method:"GET",path:"/there-is-no-path"}},le.propTypes={route:x().shape({handler:x().string,method:x().string,path:x().string})};const Et=le,bt=()=>{const{formatMessage:r}=(0,v.useIntl)(),{selectedAction:e,routes:t}=ie(),y=(0,z.without)(e.split("."),"controllers"),b=(0,z.get)(t,y[0]),P=y.slice(1).join("."),R=(0,z.isEmpty)(b)?[]:b.filter(g=>g.handler.endsWith(P));return n.createElement(Z.GridItem,{col:5,background:"neutral150",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7,style:{minHeight:"100%"}},e?n.createElement(F.Stack,{spacing:2},R.map((g,u)=>n.createElement(Et,{key:u,route:g}))):n.createElement(F.Stack,{spacing:2},n.createElement(h.Typography,{variant:"delta",as:"h3"},r({id:"users-permissions.Policies.header.title",defaultMessage:"Advanced settings"})),n.createElement(h.Typography,{as:"p",textColor:"neutral600"},r({id:"users-permissions.Policies.header.hint",defaultMessage:"Select the application's actions or the plugin's actions and click on the cog icon to display the bound route"}))))};var ce=c(47949),Ot=c(11700),Rt=c.n(Ot);function xt(r){switch(r){case"application":return"Application";case"plugin::content-manager":return"Content manager";case"plugin::content-type-builder":return"Content types builder";case"plugin::documentation":return"Documentation";case"plugin::email":return"Email";case"plugin::i18n":return"i18n";case"plugin::upload":return"Upload";case"plugin::users-permissions":return"Users-permissions";default:return Rt()(r.replace("api::","").replace("plugin::",""))}}const Tt=xt;var Ct=c(89734),be=c.n(Ct),Oe=c(43499),St=c(17581),wt=c.n(St);const Re=te.css`
  background: ${r=>r.theme.colors.primary100};
  svg {
    opacity: 1;
  }
`,At=(0,te.default)(W.Box)`
  display: flex;
  justify-content: space-between;
  align-items: center;

  svg {
    opacity: 0;
    path {
      fill: ${r=>r.theme.colors.primary600};
    }
  }

  /* Show active style both on hover and when the action is selected */
  ${r=>r.isActive&&Re}
  &:hover {
    ${Re}
  }
`,Dt=te.default.div`
  flex: 1;
  align-self: center;
  border-top: 1px solid ${({theme:r})=>r.colors.neutral150};
`,xe=({subCategory:r})=>{const{formatMessage:e}=(0,v.useIntl)(),{onChange:t,onChangeSelectAll:y,onSelectedAction:b,selectedAction:P,modifiedData:R}=ie(),g=(0,n.useMemo)(()=>(0,z.get)(R,r.name,{}),[R,r]),u=(0,n.useMemo)(()=>Object.values(g).every(S=>S.enabled===!0),[g]),E=(0,n.useMemo)(()=>Object.values(g).some(S=>S.enabled===!0)&&!u,[g,u]),D=(0,n.useCallback)(({target:{name:S}})=>{y({target:{name:S,value:!u}})},[u,y]),U=(0,n.useCallback)(S=>P===S,[P]);return n.createElement(W.Box,null,n.createElement(X.Flex,{justifyContent:"space-between",alignItems:"center"},n.createElement(W.Box,{paddingRight:4},n.createElement(h.Typography,{variant:"sigma",textColor:"neutral600"},r.label)),n.createElement(Dt,null),n.createElement(W.Box,{paddingLeft:4},n.createElement(Oe.Checkbox,{name:r.name,value:u,onValueChange:S=>D({target:{name:r.name,value:S}}),indeterminate:E},e({id:"app.utils.select-all",defaultMessage:"Select all"})))),n.createElement(X.Flex,{paddingTop:6,paddingBottom:6},n.createElement(Z.Grid,{gap:2,style:{flex:1}},r.actions.map(S=>{const N=`${S.name}.enabled`;return n.createElement(Z.GridItem,{col:6,key:S.name},n.createElement(At,{isActive:U(S.name),padding:2,hasRadius:!0},n.createElement(Oe.Checkbox,{value:(0,z.get)(R,N,!1),name:N,onValueChange:I=>t({target:{name:N,value:I}})},S.label),n.createElement("button",{type:"button","data-testid":"action-cog",onClick:()=>b(S.name),style:{display:"inline-flex",alignItems:"center"}},n.createElement(wt(),null))))}))))};xe.propTypes={subCategory:x().object.isRequired};const Lt=xe;var Mt=Object.defineProperty,jt=Object.defineProperties,_t=Object.getOwnPropertyDescriptors,Te=Object.getOwnPropertySymbols,Ut=Object.prototype.hasOwnProperty,Bt=Object.prototype.propertyIsEnumerable,Ce=(r,e,t)=>e in r?Mt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,It=(r,e)=>{for(var t in e||(e={}))Ut.call(e,t)&&Ce(r,t,e[t]);if(Te)for(var t of Te(e))Bt.call(e,t)&&Ce(r,t,e[t]);return r},Nt=(r,e)=>jt(r,_t(e));const Se=({name:r,permissions:e})=>{const t=(0,n.useMemo)(()=>be()(Object.values(e.controllers).reduce((y,b,P)=>{const R=`${r}.controllers.${Object.keys(e.controllers)[P]}`,g=be()(Object.keys(b).reduce((u,E)=>[...u,Nt(It({},b[E]),{label:E,name:`${R}.${E}`})],[]),"label");return[...y,{actions:g,label:Object.keys(e.controllers)[P],name:R}]},[]),"label"),[r,e]);return n.createElement(W.Box,{padding:6},t.map(y=>n.createElement(Lt,{key:y.name,subCategory:y})))};Se.propTypes={name:x().string.isRequired,permissions:x().object.isRequired};const Gt=Se;var kt=Object.defineProperty,Ft=Object.defineProperties,Zt=Object.getOwnPropertyDescriptors,we=Object.getOwnPropertySymbols,$t=Object.prototype.hasOwnProperty,Vt=Object.prototype.propertyIsEnumerable,Ae=(r,e,t)=>e in r?kt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ht=(r,e)=>{for(var t in e||(e={}))$t.call(e,t)&&Ae(r,t,e[t]);if(we)for(var t of we(e))Vt.call(e,t)&&Ae(r,t,e[t]);return r},Wt=(r,e)=>Ft(r,Zt(e));const zt=(r,e)=>{const t=Object.keys(e).sort().map(y=>({name:y,isOpen:!1}));return Wt(Ht({},r),{collapses:t})};var re=c(73749),Qt=Object.defineProperty,Xt=Object.defineProperties,Kt=Object.getOwnPropertyDescriptors,De=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Jt=Object.prototype.propertyIsEnumerable,Le=(r,e,t)=>e in r?Qt(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Me=(r,e)=>{for(var t in e||(e={}))Yt.call(e,t)&&Le(r,t,e[t]);if(De)for(var t of De(e))Jt.call(e,t)&&Le(r,t,e[t]);return r},je=(r,e)=>Xt(r,Kt(e));const qt={collapses:[]},er=(r,e)=>(0,re.default)(r,t=>{switch(e.type){case"TOGGLE_COLLAPSE":{t.collapses=r.collapses.map((y,b)=>b===e.index?je(Me({},y),{isOpen:!y.isOpen}):je(Me({},y),{isOpen:!1}));break}default:return t}}),tr=()=>{const{modifiedData:r}=ie(),{formatMessage:e}=(0,v.useIntl)(),[{collapses:t},y]=(0,n.useReducer)(er,qt,P=>zt(P,r)),b=P=>y({type:"TOGGLE_COLLAPSE",index:P});return n.createElement(F.Stack,{spacing:1},t.map((P,R)=>n.createElement(ce.Accordion,{expanded:P.isOpen,onToggle:()=>b(R),key:P.name,variant:R%2===0?"secondary":void 0},n.createElement(ce.AccordionToggle,{title:Tt(P.name),description:e({id:"users-permissions.Plugin.permissions.plugins.description",defaultMessage:"Define all allowed actions for the {name} plugin."},{name:P.name}),variant:R%2?"primary":"secondary"}),n.createElement(ce.AccordionContent,null,n.createElement(W.Box,null,n.createElement(Gt,{permissions:r[P.name],name:P.name}))))))};var rr=Object.defineProperty,nr=Object.defineProperties,sr=Object.getOwnPropertyDescriptors,_e=Object.getOwnPropertySymbols,or=Object.prototype.hasOwnProperty,ar=Object.prototype.propertyIsEnumerable,Ue=(r,e,t)=>e in r?rr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,ir=(r,e)=>{for(var t in e||(e={}))or.call(e,t)&&Ue(r,t,e[t]);if(_e)for(var t of _e(e))ar.call(e,t)&&Ue(r,t,e[t]);return r},lr=(r,e)=>nr(r,sr(e));const cr={initialData:{},modifiedData:{},routes:{},selectedAction:"",policies:[]},ur=(r,e)=>(0,re.default)(r,t=>{switch(e.type){case"ON_CHANGE":{const y=e.keys.length,b=e.keys[y-1]==="enabled";if(e.value&&b){const P=(0,z.take)(e.keys,y-1).join(".");t.selectedAction=P}(0,z.set)(t,["modifiedData",...e.keys],e.value);break}case"ON_CHANGE_SELECT_ALL":{const y=["modifiedData",...e.keys],b=(0,z.get)(r,y,{}),P=Object.keys(b).reduce((R,g)=>(R[g]=lr(ir({},b[g]),{enabled:e.value}),R),{});(0,z.set)(t,y,P);break}case"ON_RESET":{t.modifiedData=r.initialData;break}case"ON_SUBMIT_SUCCEEDED":{t.initialData=r.modifiedData;break}case"SELECT_ACTION":{const{actionToSelect:y}=e;t.selectedAction=y===r.selectedAction?"":y;break}default:return t}});var dr=Object.defineProperty,pr=Object.defineProperties,mr=Object.getOwnPropertyDescriptors,Be=Object.getOwnPropertySymbols,fr=Object.prototype.hasOwnProperty,gr=Object.prototype.propertyIsEnumerable,Ie=(r,e,t)=>e in r?dr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,vr=(r,e)=>{for(var t in e||(e={}))fr.call(e,t)&&Ie(r,t,e[t]);if(Be)for(var t of Be(e))gr.call(e,t)&&Ie(r,t,e[t]);return r},yr=(r,e)=>pr(r,mr(e));const hr=(r,e,t)=>yr(vr({},r),{initialData:e,modifiedData:e,routes:t});var Pr=Object.defineProperty,Er=Object.defineProperties,br=Object.getOwnPropertyDescriptors,Ne=Object.getOwnPropertySymbols,Or=Object.prototype.hasOwnProperty,Rr=Object.prototype.propertyIsEnumerable,Ge=(r,e,t)=>e in r?Pr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,xr=(r,e)=>{for(var t in e||(e={}))Or.call(e,t)&&Ge(r,t,e[t]);if(Ne)for(var t of Ne(e))Rr.call(e,t)&&Ge(r,t,e[t]);return r},Tr=(r,e)=>Er(r,br(e));const ke=(0,n.forwardRef)(({permissions:r,routes:e},t)=>{const{formatMessage:y}=(0,v.useIntl)(),[b,P]=(0,n.useReducer)(ur,cr,D=>hr(D,r,e));(0,n.useImperativeHandle)(t,()=>({getPermissions:()=>({permissions:b.modifiedData}),resetForm:()=>{P({type:"ON_RESET"})},setFormAfterSubmit:()=>{P({type:"ON_SUBMIT_SUCCEEDED"})}}));const R=({target:{name:D,value:U}})=>P({type:"ON_CHANGE",keys:D.split("."),value:U==="empty__string_value"?"":U}),g=({target:{name:D,value:U}})=>P({type:"ON_CHANGE_SELECT_ALL",keys:D.split("."),value:U}),u=D=>P({type:"SELECT_ACTION",actionToSelect:D}),E=Tr(xr({},b),{onChange:R,onChangeSelectAll:g,onSelectedAction:u});return n.createElement(Ee,{value:E},n.createElement(Z.Grid,{gap:0,shadow:"filterShadow",hasRadius:!0,background:"neutral0"},n.createElement(Z.GridItem,{col:7,paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement(F.Stack,{spacing:6},n.createElement(F.Stack,{spacing:2},n.createElement(h.Typography,{variant:"delta",as:"h2"},y({id:(0,K.Z)("Plugins.header.title"),defaultMessage:"Permissions"})),n.createElement(h.Typography,{as:"p",textColor:"neutral600"},y({id:(0,K.Z)("Plugins.header.description"),defaultMessage:"Only actions bound by a route are listed below."}))),n.createElement(tr,null))),n.createElement(bt,null)))});ke.propTypes={permissions:x().object.isRequired,routes:x().object.isRequired};const Fe=(0,n.memo)(ke),zn={isLoading:!0,modifiedData:{}},Qn=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.modifiedData={};break}case"GET_DATA_SUCCEEDED":{t.isLoading=!1,t.modifiedData=e.data;break}case"GET_DATA_ERROR":{t.isLoading=!0;break}case"ON_SUBMIT_SUCCEEDED":{t.modifiedData=e.data;break}default:return t}}),Xn=null;var Cr=c(25108),Sr=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const Kn=(r,e)=>{const{isLoading:t,allowedActions:y}=useRBAC(e),[{isLoading:b,modifiedData:P},R]=useReducer(reducer,initialState),g=useNotification(),u=useRef(!0),E=new AbortController,{signal:D}=E;useEffect(()=>(t||(()=>Sr(void 0,null,function*(){try{R({type:"GET_DATA"});const N=yield request(getRequestURL(r),{method:"GET",signal:D});R({type:"GET_DATA_SUCCEEDED",data:N})}catch(N){u.current&&(R({type:"GET_DATA_ERROR"}),Cr.error(N),g({type:"warning",message:{id:"notification.error"}}))}}))(),()=>{E.abort(),u.current=!1}),[t,r]);const U=useCallback(S=>{R({type:"ON_SUBMIT_SUCCEEDED",data:S})},[]);return{allowedActions:y,dispatchSubmitSucceeded:U,isLoading:b,isLoadingForPermissions:t,modifiedData:P}},Yn=null;var wr=Object.defineProperty,Ar=Object.defineProperties,Dr=Object.getOwnPropertyDescriptors,Ze=Object.getOwnPropertySymbols,Lr=Object.prototype.hasOwnProperty,Mr=Object.prototype.propertyIsEnumerable,$e=(r,e,t)=>e in r?wr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,jr=(r,e)=>{for(var t in e||(e={}))Lr.call(e,t)&&$e(r,t,e[t]);if(Ze)for(var t of Ze(e))Mr.call(e,t)&&$e(r,t,e[t]);return r},_r=(r,e)=>Ar(r,Dr(e));const Jn=(r,e)=>_r(jr({},r),{isLoading:e}),qn=null,es={roles:[],isLoading:!0},ts=(r,e)=>produce(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.roles=[];break}case"GET_DATA_SUCCEEDED":{t.roles=e.data,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}}),rs=null;var Ur=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const ns=(r=!0)=>{const[{roles:e,isLoading:t},y]=useReducer(reducer,initialState,()=>init(initialState,r)),b=useNotification(),P=useRef(!0),R=new AbortController,{signal:g}=R;useEffect(()=>(r&&u(),()=>{R.abort(),P.current=!1}),[r]);const u=()=>Ur(void 0,null,function*(){try{y({type:"GET_DATA"});const{roles:E}=yield request(`/${pluginId}/roles`,{method:"GET",signal:g});y({type:"GET_DATA_SUCCEEDED",data:E})}catch(E){const D=get(E,["response","payload","message"],"An error occured");P.current&&(y({type:"GET_DATA_ERROR"}),D!=="Forbidden"&&b({type:"warning",message:D}))}});return{roles:e,isLoading:t,getData:u}},ss=null;var Br=Object.defineProperty,Ir=Object.defineProperties,Nr=Object.getOwnPropertyDescriptors,Ve=Object.getOwnPropertySymbols,Gr=Object.prototype.hasOwnProperty,kr=Object.prototype.propertyIsEnumerable,He=(r,e,t)=>e in r?Br(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Fr=(r,e)=>{for(var t in e||(e={}))Gr.call(e,t)&&He(r,t,e[t]);if(Ve)for(var t of Ve(e))kr.call(e,t)&&He(r,t,e[t]);return r},Zr=(r,e)=>Ir(r,Nr(e));const $r=(r,e)=>Zr(Fr({},r),{isLoading:e});var ne=c(46979);const We={permissions:{},routes:{},isLoading:!0},Vr=(r,e)=>(0,re.default)(r,t=>{switch(e.type){case"GET_DATA":{t.isLoading=!0,t.permissions={},t.routes={};break}case"GET_DATA_SUCCEEDED":{t.permissions=e.permissions,t.routes=e.routes,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}default:return t}});var ze=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const Qe=(r=!0)=>{const e=(0,o.useNotification)(),[{permissions:t,routes:y,isLoading:b},P]=(0,n.useReducer)(Vr,We,()=>$r(We,r)),R=(0,n.useCallback)(()=>ze(void 0,null,function*(){try{P({type:"GET_DATA"});const[{permissions:g},{routes:u}]=yield Promise.all([`/${d.Z}/permissions`,`/${d.Z}/routes`].map(E=>ze(void 0,null,function*(){return(yield ne.Z.get(E)).data})));P({type:"GET_DATA_SUCCEEDED",permissions:(0,M.YX)(g),routes:u})}catch(g){const u=(0,z.get)(g,["response","payload","message"],"An error occured");P({type:"GET_DATA_ERROR"}),u!=="Forbidden"&&e({type:"warning",message:u})}}),[e]);return(0,n.useEffect)(()=>{r&&R()},[R,r]),{permissions:t,routes:y,getData:R,isLoading:b}},Hr={role:{},isLoading:!0},Wr=(r,e)=>(0,re.default)(r,t=>{switch(e.type){case"GET_DATA_SUCCEEDED":{t.role=e.role,t.isLoading=!1;break}case"GET_DATA_ERROR":{t.isLoading=!1;break}case"ON_SUBMIT_SUCCEEDED":{t.role.name=e.name,t.role.description=e.description;break}default:return t}});var zr=c(25108),Qr=Object.defineProperty,Xr=Object.defineProperties,Kr=Object.getOwnPropertyDescriptors,Xe=Object.getOwnPropertySymbols,Yr=Object.prototype.hasOwnProperty,Jr=Object.prototype.propertyIsEnumerable,Ke=(r,e,t)=>e in r?Qr(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,Ye=(r,e)=>{for(var t in e||(e={}))Yr.call(e,t)&&Ke(r,t,e[t]);if(Xe)for(var t of Xe(e))Jr.call(e,t)&&Ke(r,t,e[t]);return r},qr=(r,e)=>Xr(r,Kr(e)),en=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const tn=r=>{const[e,t]=(0,n.useReducer)(Wr,Hr),y=(0,o.useNotification)(),b=(0,n.useRef)(null);(0,n.useEffect)(()=>(b.current=!0,r?P(r):t({type:"GET_DATA_SUCCEEDED",role:{}}),()=>b.current=!1),[r]);const P=g=>en(void 0,null,function*(){try{const{data:{role:u}}=yield ne.Z.get(`/${d.Z}/roles/${g}`);b.current&&t({type:"GET_DATA_SUCCEEDED",role:u})}catch(u){zr.error(u),t({type:"GET_DATA_ERROR"}),y({type:"warning",message:{id:"notification.error"}})}}),R=(0,n.useCallback)(g=>{t(Ye({type:"ON_SUBMIT_SUCCEEDED"},g))},[]);return qr(Ye({},e),{onSubmitSucceeded:R})};var Y=c(53209);const rn=Y.Ry().shape({name:Y.Z_().required(o.translatedErrors.required),description:Y.Z_().required(o.translatedErrors.required)});var nn=c(25108),sn=Object.defineProperty,on=Object.defineProperties,an=Object.getOwnPropertyDescriptors,Je=Object.getOwnPropertySymbols,ln=Object.prototype.hasOwnProperty,cn=Object.prototype.propertyIsEnumerable,qe=(r,e,t)=>e in r?sn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,et=(r,e)=>{for(var t in e||(e={}))ln.call(e,t)&&qe(r,t,e[t]);if(Je)for(var t of Je(e))cn.call(e,t)&&qe(r,t,e[t]);return r},un=(r,e)=>on(r,an(e)),dn=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const pn=()=>{const{formatMessage:r}=(0,v.useIntl)(),[e,t]=(0,n.useState)(!1),y=(0,o.useNotification)(),{lockApp:b,unlockApp:P}=(0,o.useOverlayBlocker)(),{params:{id:R}}=(0,T.useRouteMatch)(`/settings/${d.Z}/roles/:id`),{isLoading:g,routes:u}=Qe(),{role:E,onSubmitSucceeded:D,isLoading:U}=tn(R),S=(0,n.useRef)(),N=I=>dn(void 0,null,function*(){b(),t(!0);try{const $=S.current.getPermissions();yield ne.Z.put(`/${d.Z}/roles/${R}`,un(et(et({},I),$),{users:[]})),D({name:I.name,description:I.description}),y({type:"success",message:{id:(0,K.Z)("Settings.roles.edited"),defaultMessage:"Role edited"}})}catch($){nn.error($),y({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),P()});return U?n.createElement(o.LoadingIndicatorPage,null):n.createElement(m.Main,null,n.createElement(o.SettingsPageTitle,{name:"Roles"}),n.createElement(ge.Formik,{enableReinitialize:!0,initialValues:{name:E.name,description:E.description},onSubmit:N,validationSchema:rn},({handleSubmit:I,values:$,handleChange:V,errors:J})=>n.createElement(o.Form,{noValidate:!0,onSubmit:I},n.createElement(i.HeaderLayout,{primaryAction:!g&&n.createElement(l.Button,{disabled:E.code==="strapi-super-admin",type:"submit",loading:e,startIcon:n.createElement(he(),null)},r({id:"global.save",defaultMessage:"Save"})),title:E.name,subtitle:E.description,navigationAction:n.createElement(o.Link,{startIcon:n.createElement(pt(),null),to:"/settings/users-permissions/roles"},r({id:"global.back",defaultMessage:"Back"}))}),n.createElement(i.ContentLayout,null,n.createElement(F.Stack,{spacing:7},n.createElement(W.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement(F.Stack,{spacing:4},n.createElement(h.Typography,{variant:"delta",as:"h2"},r({id:(0,K.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),n.createElement(Z.Grid,{gap:4},n.createElement(Z.GridItem,{col:6},n.createElement(ve.TextInput,{name:"name",value:$.name||"",onChange:V,label:r({id:"global.name",defaultMessage:"Name"}),error:J.name?r({id:J.name,defaultMessage:"Invalid value"}):null})),n.createElement(Z.GridItem,{col:6},n.createElement(ye.Textarea,{name:"description",value:$.description||"",onChange:V,label:r({id:"global.description",defaultMessage:"Description"}),error:J.description?r({id:J.description,defaultMessage:"Invalid value"}):null}))))),!g&&n.createElement(Fe,{ref:S,permissions:E.permissions,routes:u}))))))},mn=()=>n.createElement(o.CheckPagePermissions,{permissions:s.Z.updateRole},n.createElement(pn,null)),fn=Y.Ry().shape({name:Y.Z_().required(o.translatedErrors.required),description:Y.Z_().required(o.translatedErrors.required)});var gn=c(25108),vn=Object.defineProperty,yn=Object.defineProperties,hn=Object.getOwnPropertyDescriptors,tt=Object.getOwnPropertySymbols,Pn=Object.prototype.hasOwnProperty,En=Object.prototype.propertyIsEnumerable,rt=(r,e,t)=>e in r?vn(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t,nt=(r,e)=>{for(var t in e||(e={}))Pn.call(e,t)&&rt(r,t,e[t]);if(tt)for(var t of tt(e))En.call(e,t)&&rt(r,t,e[t]);return r},bn=(r,e)=>yn(r,hn(e)),On=(r,e,t)=>new Promise((y,b)=>{var P=u=>{try{g(t.next(u))}catch(E){b(E)}},R=u=>{try{g(t.throw(u))}catch(E){b(E)}},g=u=>u.done?y(u.value):Promise.resolve(u.value).then(P,R);g((t=t.apply(r,e)).next())});const Rn=()=>{const{formatMessage:r}=(0,v.useIntl)(),[e,t]=(0,n.useState)(!1),y=(0,o.useNotification)(),{goBack:b}=(0,T.useHistory)(),{lockApp:P,unlockApp:R}=(0,o.useOverlayBlocker)(),{isLoading:g,permissions:u,routes:E}=Qe(),{trackUsage:D}=(0,o.useTracking)(),U=(0,n.useRef)(),S=N=>On(void 0,null,function*(){P(),t(!0);try{const I=U.current.getPermissions();yield ne.Z.post(`/${d.Z}/roles`,bn(nt(nt({},N),I),{users:[]})),D("didCreateRole"),y({type:"success",message:{id:(0,K.Z)("Settings.roles.created"),defaultMessage:"Role created"}}),b()}catch(I){gn.error(I),y({type:"warning",message:{id:"notification.error",defaultMessage:"An error occurred"}})}t(!1),R()});return n.createElement(m.Main,null,n.createElement(o.SettingsPageTitle,{name:"Roles"}),n.createElement(ge.Formik,{enableReinitialize:!0,initialValues:{name:"",description:""},onSubmit:S,validationSchema:fn},({handleSubmit:N,values:I,handleChange:$,errors:V})=>n.createElement(o.Form,{noValidate:!0,onSubmit:N},n.createElement(i.HeaderLayout,{primaryAction:!g&&n.createElement(l.Button,{type:"submit",loading:e,startIcon:n.createElement(he(),null)},r({id:"global.save",defaultMessage:"Save"})),title:r({id:"Settings.roles.create.title",defaultMessage:"Create a role"}),subtitle:r({id:"Settings.roles.create.description",defaultMessage:"Define the rights given to the role"})}),n.createElement(i.ContentLayout,null,n.createElement(F.Stack,{spacing:7},n.createElement(W.Box,{background:"neutral0",hasRadius:!0,shadow:"filterShadow",paddingTop:6,paddingBottom:6,paddingLeft:7,paddingRight:7},n.createElement(F.Stack,{spacing:4},n.createElement(h.Typography,{variant:"delta",as:"h2"},r({id:(0,K.Z)("EditPage.form.roles"),defaultMessage:"Role details"})),n.createElement(Z.Grid,{gap:4},n.createElement(Z.GridItem,{col:6},n.createElement(ve.TextInput,{name:"name",value:I.name||"",onChange:$,label:r({id:"global.name",defaultMessage:"Name"}),error:V.name?r({id:V.name,defaultMessage:"Invalid value"}):null})),n.createElement(Z.GridItem,{col:6},n.createElement(ye.Textarea,{name:"description",value:I.description||"",onChange:$,label:r({id:"global.description",defaultMessage:"Description"}),error:V.description?r({id:V.description,defaultMessage:"Invalid value"}):null}))))),!g&&n.createElement(Fe,{ref:U,permissions:u,routes:E}))))))},xn=()=>n.createElement(o.CheckPagePermissions,{permissions:s.Z.createRole},n.createElement(Rn,null)),Tn=()=>n.createElement(o.CheckPagePermissions,{permissions:s.Z.accessRoles},n.createElement(T.Switch,null,n.createElement(T.Route,{path:`/settings/${d.Z}/roles/new`,component:xn,exact:!0}),n.createElement(T.Route,{path:`/settings/${d.Z}/roles/:id`,component:mn,exact:!0}),n.createElement(T.Route,{path:`/settings/${d.Z}/roles`,component:ut,exact:!0}),n.createElement(T.Route,{path:"",component:o.NotFound})))},46979:(A,_,c)=>{"use strict";c.d(_,{Z:()=>i});var n=c(9669),T=c.n(n),o=c(68547),d=c.n(o),s=(m,p,O)=>new Promise((h,C)=>{var L=w=>{try{v(O.next(w))}catch(j){C(j)}},B=w=>{try{v(O.throw(w))}catch(j){C(j)}},v=w=>w.done?h(w.value):Promise.resolve(w.value).then(L,B);v((O=O.apply(m,p)).next())});const l=T().create({baseURL:"http://localhost:1337"});l.interceptors.request.use(m=>s(void 0,null,function*(){return m.headers={Authorization:`Bearer ${o.auth.getToken()}`,Accept:"application/json","Content-Type":"application/json"},m}),m=>{Promise.reject(m)}),l.interceptors.response.use(m=>m,m=>{var p;throw((p=m.response)==null?void 0:p.status)===401&&(o.auth.clearAppStorage(),window.location.reload()),m});const i=l},89031:(A,_,c)=>{"use strict";c.d(_,{be:()=>n.Z,YX:()=>d,Gc:()=>i,OB:()=>m.Z});var n=c(46979),T=c(96486);const d=p=>Object.keys(p).reduce((O,h)=>{const C=p[h].controllers,L=Object.keys(C).reduce((B,v)=>((0,T.isEmpty)(C[v])||(B[v]=C[v]),B),{});return(0,T.isEmpty)(L)||(O[h]={controllers:L}),O},{});var s=c(31498);const i=p=>`/${s.Z}/${p}`;var m=c(84757)},89881:(A,_,c)=>{var n=c(47816),T=c(99291),o=T(n);A.exports=o},69199:(A,_,c)=>{var n=c(89881),T=c(98612);function o(d,s){var l=-1,i=T(d)?Array(d.length):[];return n(d,function(m,p,O){i[++l]=s(m,p,O)}),i}A.exports=o},82689:(A,_,c)=>{var n=c(29932),T=c(97786),o=c(67206),d=c(69199),s=c(71131),l=c(7518),i=c(85022),m=c(6557),p=c(1469);function O(h,C,L){C.length?C=n(C,function(w){return p(w)?function(j){return T(j,w.length===1?w[0]:w)}:w}):C=[m];var B=-1;C=n(C,l(o));var v=d(h,function(w,j,M){var G=n(C,function(k){return k(w)});return{criteria:G,index:++B,value:w}});return s(v,function(w,j){return i(w,j,L)})}A.exports=O},71131:A=>{function _(c,n){var T=c.length;for(c.sort(n);T--;)c[T]=c[T].value;return c}A.exports=_},26393:(A,_,c)=>{var n=c(33448);function T(o,d){if(o!==d){var s=o!==void 0,l=o===null,i=o===o,m=n(o),p=d!==void 0,O=d===null,h=d===d,C=n(d);if(!O&&!C&&!m&&o>d||m&&p&&h&&!O&&!C||l&&p&&h||!s&&h||!i)return 1;if(!l&&!m&&!C&&o<d||C&&s&&i&&!l&&!m||O&&s&&i||!p&&i||!h)return-1}return 0}A.exports=T},85022:(A,_,c)=>{var n=c(26393);function T(o,d,s){for(var l=-1,i=o.criteria,m=d.criteria,p=i.length,O=s.length;++l<p;){var h=n(i[l],m[l]);if(h){if(l>=O)return h;var C=s[l];return h*(C=="desc"?-1:1)}}return o.index-d.index}A.exports=T},99291:(A,_,c)=>{var n=c(98612);function T(o,d){return function(s,l){if(s==null)return s;if(!n(s))return o(s,l);for(var i=s.length,m=d?i:-1,p=Object(s);(d?m--:++m<i)&&l(p[m],m,p)!==!1;);return s}}A.exports=T},89734:(A,_,c)=>{var n=c(21078),T=c(82689),o=c(5976),d=c(16612),s=o(function(l,i){if(l==null)return[];var m=i.length;return m>1&&d(l,i[0],i[1])?i=[]:m>2&&d(i[0],i[1],i[2])&&(i=[i[0]]),T(l,n(i,1),[])});A.exports=s},13217:(A,_,c)=>{var n=c(14259);function T(o){var d=o==null?0:o.length;return d?n(o,1,d):[]}A.exports=T}}]);

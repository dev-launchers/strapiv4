"use strict";(self.webpackChunk_strapi_admin=self.webpackChunk_strapi_admin||[]).push([[4546],{17379:function(j,D,s){s.d(D,{r:function(){return C}});var f=s(32735),p=s(72850),O=s(60216),A=s.n(O),F=s(74506);function k(L,M,y){if(!L||!M)return{display:"none"};const{x:I,y:x}=y;return{transform:`translate(${I}px, ${x}px)`}}function C({renderItem:L}){const{itemType:M,isDragging:y,item:I,initialOffset:x,currentOffset:W,mouseOffset:Z}=(0,F.useDragLayer)(E=>({item:E.getItem(),itemType:E.getItemType(),initialOffset:E.getInitialSourceClientOffset(),currentOffset:E.getSourceClientOffset(),isDragging:E.isDragging(),mouseOffset:E.getClientOffset()}));return y?f.createElement(p.x,{height:"100%",left:0,position:"fixed",pointerEvents:"none",top:0,zIndex:100,width:"100%"},f.createElement(p.x,{style:k(x,W,Z)},L({type:M,item:I}))):null}C.propTypes={renderItem:A().func.isRequired}},75430:function(j,D,s){var f=s(32735);const p=(0,f.createContext)();var O=null},69242:function(j,D,s){s.d(D,{PL:function(){return F},Y9:function(){return k.Y},zE:function(){return se},Ky:function(){return ce},fi:function(){return z},zH:function(){return de},r5:function(){return me}});var f=s(32735),p=s(15062),O=s(53634),F=()=>{const e=(0,p.v9)(O.Z),t=(0,f.useCallback)(n=>e?.components?.[n]??{},[e]);return{...e,getComponentLayout:t}},k=s(77622),C=s(19565),L=s(84306),M=s(20716),y=s(97889);const I={error:null,isLoading:!0,layout:{},layouts:{}};var W=(e,t)=>(0,y.ZP)(e,n=>{switch(t.type){case"GET_DATA":{n.isLoading=!0,n.error=null,n.layout={};break}case"GET_DATA_SUCCEEDED":{const r=t.data.contentType.uid;n.layout=t.data,n.layouts[r]=t.data,n.isLoading=!1;break}case"GET_DATA_ERROR":{n.isLoading=!1,n.error=t.error;break}case"SET_LAYOUT_FROM_STATE":{n.error=null,n.layout=e.layouts[t.uid];break}case"UPDATE_LAYOUT":{const r=e.layout;n.layout={...r,contentType:{uid:r.contentType.uid,...t.newLayout.contentType}},n.layouts[r.contentType.uid]={...r,contentType:{uid:r.contentType.uid,...t.newLayout.contentType}};break}default:return n}}),Z=s(99381),E=s.n(Z),G=s(33795),R=s.n(G),w=s(3040),S=s.n(w),re=s(97724);const Q=(e,t)=>t.find(n=>n.uid===e),H=(e,t)=>{const n=X(e,t),r=P(n.contentType,t),i=J(n.contentType,n.components);return S()(n,["contentType","layouts","edit"],r),S()(n,["contentType","layouts","list"],i),Object.keys(n.components).forEach(u=>{const c=P(n.components[u],t);S()(n,["components",u,"layouts","edit"],c)}),n},X=(e,t)=>{const n=(0,re.w8)(E()(e),t,"contentType"),{components:r,contentType:i}=n,u=c=>Object.keys(c.metadatas).reduce((d,h)=>{const T=R()(c,["attributes",h],{});let v=c.metadatas[h];if(T.type==="relation"){const b=Q(T.targetModel,t),N=v.edit.mainField,V={name:N,schema:R()(b,["attributes",N])};v={list:{...v.list,mainField:V},edit:{...v.edit,mainField:V}}}return d[h]=v,d},{});return S()(n,["contentType","metadatas"],u(i)),Object.keys(r).forEach(c=>{const d=r[c],h=u(d);S()(n,["components",c,"metadatas"],h)}),n},P=(e,t)=>e.layouts.edit.reduce((n,r)=>{const i=r.map(u=>{const c=R()(e,["attributes",u.name],{}),d={...u,fieldSchema:c,metadatas:R()(e,["metadatas",u.name,"edit"],{})};if(c.type==="relation"){const T=Q(c.targetModel,t).pluginOptions||{};S()(d,"targetModelPluginOptions",T),S()(d,"queryInfos",{shouldDisplayRelationLink:Y(e,u.name,t)})}return d});return n.push(i),n},[]),J=(e,t)=>e.layouts.list.reduce((r,i)=>{const u=R()(e,["attributes",i],{}),c=R()(e,["metadatas",i,"list"],{}),d=u.type;if(d==="relation")return r.push({key:`__${i}_key__`,name:i,fieldSchema:u,metadatas:c}),r;if(d==="component"){const h=t[u.component],T=h.settings.mainField,v=h.attributes[T];return r.push({key:`__${i}_key__`,name:i,fieldSchema:u,metadatas:{...c,mainField:{...v,name:T}}}),r}return r.push({key:`__${i}_key__`,name:i,fieldSchema:u,metadatas:c}),r},[]),Y=(e,t,n)=>{const r=R()(e,["attributes",t,"targetModel"],"");return K(n).includes(r)},K=e=>e.filter(t=>t.isDisplayed).map(({uid:t})=>t);var $=H,se=e=>{const[{error:t,isLoading:n,layout:r,layouts:i},u]=(0,f.useReducer)(W,I),c=(0,f.useMemo)(M.Vo,[]),{schemas:d}=(0,p.v9)(N=>c(N),p.wU),h=(0,f.useRef)(!0),{get:T}=(0,C.kY)(),v=(0,f.useCallback)(async(N,V)=>{if(i[N]){u({type:"SET_LAYOUT_FROM_STATE",uid:N});return}u({type:"GET_DATA"});try{const{data:{data:ne}}=await T(`/content-manager/content-types/${N}/configuration`,{cancelToken:V.token});u({type:"GET_DATA_SUCCEEDED",data:$(ne,d)})}catch(ne){if(L.default.isCancel(ne))return;h.current&&console.error(ne),h.current&&u({type:"GET_DATA_ERROR",error:ne})}},[i,d,T]);(0,f.useEffect)(()=>()=>{h.current=!1},[]),(0,f.useEffect)(()=>{const V=L.default.CancelToken.source();return v(e,V),()=>{V.cancel("Operation canceled by the user.")}},[e,v]);const b=(0,f.useCallback)(N=>{u({type:"UPDATE_LAYOUT",newLayout:$(N,d)})},[d]);return{error:t,isLoading:n,layout:r,updateLayout:b}},oe=e=>e["content-manager_app"].collectionTypeLinks,ie=s(85973),ae=s.n(ie),B=s(33348);const ue=(e,t)=>Object.keys(e).reduce((n,r)=>{const i=e[r],u=R()(t,[r],i);return ae()(i)?{...n,[r]:ue(i,u)}:(n[r]=u,n)},{});var m=(e,t,n)=>{const r=e.find(({to:v})=>v.includes(t));if(!r)return"/";const{to:i,search:u}=r,c=(0,B.parse)(u),d=(0,B.parse)(n.substring(1)),h=ue(c,d);return`${i}?${(0,B.stringify)(h,{encode:!1})}`},ce=e=>{const[{rawQuery:t}]=(0,C.Kx)(),n=(0,p.v9)(oe);return m(n,e,t)},ge=s(15655),le=s(53038),z=()=>{const{search:e}=(0,le.TH)(),t=e?(0,B.parse)(e.substring(1)):{};return t.plugins?(0,B.stringify)({plugins:t.plugins},{encode:!1}):""};const de=e=>{const t=(0,f.useRef)();return(0,f.useEffect)(()=>{t.current=e},[e]),t.current};var U=s(85149);const g=(e,t,n)=>({type:U.m,permissions:e,__meta__:{plugins:t,containerName:n}}),ee=()=>({type:U.Q}),fe=e=>e["content-manager_rbacManager"].permissions,te=e=>e.rbacProvider.collectionTypesRelatedPermissions;var me=(e,t,n="listView")=>{const r=(0,p.v9)(te),i=(0,p.v9)(fe),u=(0,p.I0)(),c=r[t];return(0,f.useEffect)(()=>c?(u(g(c,e?e.plugins:null,n)),()=>{u(ee())}):()=>{},[c,u,e,n]),i},o=s(75430);const l=()=>useContext(WysiwygContext);var a=null},77622:function(j,D,s){s.d(D,{Y:function(){return F}});var f=s(32735),p=s(74506),O=s.n(p),A=s(15655);const F=(k,{type:C="STRAPI_DND",index:L,item:M={},onStart:y,onEnd:I,onGrabItem:x,onDropItem:W,onCancel:Z,onMoveItem:E,dropSensitivity:G="regular"})=>{const R=(0,f.useRef)(null),[{handlerId:w},S]=(0,p.useDrop)({accept:C,collect(P){return{handlerId:P.getHandlerId()}},hover(P,J){if(!R.current)return;const Y=P.index,K=L;if(Y!==K){if(G==="regular"){const $=R.current.getBoundingClientRect(),q=($.bottom-$.top)/2,_=J.getClientOffset().y-$.top;if(Y<K&&_<q||Y>K&&_>q)return}E(K,Y),P.index=K}}}),[{isDragging:re},Q,H]=(0,p.useDrag)({type:C,item(){y&&y();const{width:P}=R.current?.getBoundingClientRect()??{};return{index:L,width:P,...M}},end(){I&&I()},canDrag:k,isDragging:M.id?P=>M.id===P.getItem().id:void 0,collect:P=>({isDragging:P.isDragging()})}),X=(0,A.A)(k,L,{onGrabItem:x,onDropItem:W,onCancel:Z,onMoveItem:E});return[{handlerId:w,isDragging:re,handleKeyDown:X},R,S,Q,H]}},15655:function(j,D,s){s.d(D,{A:function(){return p}});var f=s(32735);const p=(O,A,{onCancel:F,onDropItem:k,onGrabItem:C,onMoveItem:L})=>{const[M,y]=(0,f.useState)(!1),I=E=>{M&&(E==="UP"?L(A-1,A):E==="DOWN"&&L(A+1,A))},x=()=>{M?(k&&k(A),y(!1)):(C&&C(A),y(!0))},W=()=>{M&&(y(!1),F&&F(A))};return E=>{if(O&&!(E.key==="Tab"&&!M))switch(E.preventDefault(),E.key){case" ":case"Enter":x();break;case"Escape":W();break;case"ArrowDown":case"ArrowRight":I("DOWN");break;case"ArrowUp":case"ArrowLeft":I("UP");break;default:}}}},20716:function(j,D,s){s.d(D,{Jg:function(){return L},KQ:function(){return k},Vo:function(){return C},Yg:function(){return O}});var f=s(98178),p=s(60371);const O=()=>y=>y["content-manager_app"]||p.E,A=()=>createSelector(O(),y=>y),F=()=>createSelector(O(),y=>y.models),k=()=>(0,f.P1)(O(),y=>({collectionTypeLinks:y.collectionTypeLinks,singleTypeLinks:y.singleTypeLinks})),C=()=>(0,f.P1)(O(),({components:y,models:I})=>({schemas:[...y,...I]})),L=(0,f.P1)(O(),y=>y.fieldSizes);var M=null},53634:function(j,D){const s=f=>f["content-manager_editViewLayoutManager"].currentLayout;D.Z=s},24381:function(j,D){D.Z={COMPONENT:"component",EDIT_FIELD:"editField",FIELD:"field",DYNAMIC_ZONE:"dynamicZone",RELATION:"relation"}},7921:function(j,D){const s=f=>`content-manager.${f}`;D.Z=s},97724:function(j,D,s){s.d(D,{_Q:function(){return _.Z},W3:function(){return A},ko:function(){return L},FE:function(){return y},Di:function(){return Z},Ex:function(){return me},du:function(){return w},TA:function(){return Q},Ts:function(){return J},Uo:function(){return K},IF:function(){return q},OB:function(){return se.Z},w8:function(){return ye},kc:function(){return ce}});var f=s(99381),p=s.n(f),A=(o,l,a)=>{if(Array.isArray(o)&&l>=0&&a>=0&&l<=o.length-1&&a<=o.length-1){const e=p()(o),t=e.splice(l,1);return e.splice(a,0,t[0]),e}return o},F=s(59578),k=s.n(F),L=o=>{const l=o.type;return l==="relation"?!k()(o.relationType).includes("morph"):!["json","dynamiczone","richtext","password"].includes(l)&&!!l};const M=(o,l)=>{typeof o=="function"?o(l):o!=null&&(o.current=l)},y=(...o)=>l=>o.forEach(a=>M(a,l));var I=s(33795),x=s.n(I);const W=(o,l)=>Object.keys(o).reduce((a,e)=>{const t=x()(o,[e],{}),{default:n,component:r,type:i,required:u,min:c,repeatable:d}=t;if(n!==void 0&&(a[e]=n),i==="component"){const h=l?.[r]?.attributes??{},T=W(h,l);if(u===!0&&(a[e]=d===!0?[]:T),c&&d===!0&&u){a[e]=[];for(let v=0;v<c;v+=1)a[e].push(T)}}return i==="dynamiczone"&&u===!0&&(a[e]=[]),a},{});var Z=W,E=s(9086),G=s.n(E),w=({layouts:o,metadatas:l,...a})=>{const e=o.list.map(r=>r.name?r.name:r),t=Object.keys(l).reduce((r,i)=>{const u=x()(l,[i],{});let c=u.edit;return c.mainField&&(c={...c,mainField:u.edit.mainField.name}),{...r,[i]:{edit:c,list:G()(u.list,["mainField"])}}},{}),n=o.edit.map(r=>r.map(({name:i,size:u})=>({name:i,size:u})));return{...a,layouts:{edit:n,list:e},metadatas:t}};const S=(o,l)=>o.map(a=>({...a,subject:l}));var Q=o=>{const l={create:[{action:"plugin::content-manager.explorer.create",subject:null}],delete:[{action:"plugin::content-manager.explorer.delete",subject:null}],publish:[{action:"plugin::content-manager.explorer.publish",subject:null}],read:[{action:"plugin::content-manager.explorer.read",subject:null}],update:[{action:"plugin::content-manager.explorer.update",subject:null}]};return Object.keys(l).reduce((a,e)=>(a[e]=S(l[e],o),a),{})},H=s(95919),X=s.n(H),J=o=>o.split(".").filter(l=>X()(parseInt(l,10))),K=o=>{if(o.length===0)return-1;const l=Math.max.apply(Math,o.map(a=>a.__temp_key__??0));return Number.isNaN(l)?-1:l},q=o=>`/content-manager/${o}`,se=s(7921),_=s(24381),oe=s(86349),ie=s.n(oe),ae=s(3040),B=s.n(ae),ye=(o,l,a)=>{const e=i=>l.find(u=>u.uid===i),t=Object.assign({},o),n=o[a].uid,r=e(n);return B()(t,[a],ie()({},r,o[a])),Object.keys(o.components).forEach(i=>{const u=e(i);B()(t,["components",i],{...o.components[i],...u})}),t},m=s(19565),ce=(o,l,a)=>{const e=(t,n)=>Object.keys(t).reduce((r,i)=>{const u=(0,m.UN)(n,i),c=x()(t,i),d=(0,m.k2)(n,[i,"component"]),h=(0,m.k2)(n,[i,"repeatable"]);return u==="dynamiczone"?(r[i]=c.map(T=>e(T,a[T.__component])),r):u==="component"?(h?r[i]=c&&c.map(T=>e(T,a[d])):r[i]=c&&e(c,a[d]),r):(u!=="password"&&(r[i]=c),r)},{});return e(o,l)},ge=s(51355),le=s.n(ge),pe=s(86834),z=s.n(pe),de=s(78746),U=s.n(de),g=s(24346),ee=s(73347);g.kM(g.nK,"defined",function(){return this.test("defined",m.I0.required,o=>o!==void 0)}),g.kM(g.IX,"notEmptyMin",function(o){return this.test("notEmptyMin",m.I0.min,l=>z()(l)?!0:l.length>=o)}),g.kM(g.Z_,"isInferior",function(o,l){return this.test("isInferior",o,function(a){return!a||Number.isNaN(U()(a))?!0:U()(l)>=U()(a)})}),g.kM(g.Z_,"isSuperior",function(o,l){return this.test("isSuperior",o,function(a){return!a||Number.isNaN(U()(a))?!0:U()(a)>=U()(l)})});const fe=o=>x()(o,["attributes"],{}),te=(o,{components:l},a={isCreatingEntry:!0,isDraft:!0,isFromComponent:!1})=>{const e=fe(o);return g.Ry().shape(Object.keys(e).reduce((t,n)=>{const r=e[n];if(r.type!=="relation"&&r.type!=="component"&&r.type!=="dynamiczone"){const i=he(r.type,r,a);t[n]=i}if(r.type==="relation"&&(t[n]=["oneWay","oneToOne","manyToOne","oneToManyMorph","oneToOneMorph"].includes(r.relationType)?g.Ry().nullable():g.IX().nullable()),r.type==="component"){const i=te(l[r.component],{components:l},{...a,isFromComponent:!0});if(r.repeatable===!0){const{min:c,max:d,required:h}=r;let T=g.Vo(v=>{let b=g.IX().of(i);return c?h?b=b.min(c,m.I0.min):h!==!0&&z()(v)?b=b.nullable():b=b.min(c,m.I0.min):h&&!a.isDraft&&(b=b.min(1,m.I0.required)),d&&(b=b.max(d,m.I0.max)),b});return t[n]=T,t}const u=g.Vo(c=>c!==void 0?r.required===!0&&!a.isDraft?i.defined():i.nullable():r.required===!0?g.Ry().defined():g.Ry().nullable());return t[n]=u,t}if(r.type==="dynamiczone"){let i=g.IX().of(g.Vo(({__component:d})=>te(l[d],{components:l},{...a,isFromComponent:!0})));const{max:u,min:c}=r;c?r.required?i=i.test("min",m.I0.min,d=>a.isCreatingEntry?d&&d.length>=c:d===void 0?!0:d!==null&&d.length>=c).test("required",m.I0.required,d=>a.isCreatingEntry?d!==null||d!==void 0:d===void 0?!0:d!==null):i=i.notEmptyMin(c):r.required&&!a.isDraft&&(i=i.test("required",m.I0.required,d=>a.isCreatingEntry?d!==null||d!==void 0:d===void 0?!0:d!==null)),u&&(i=i.max(u,m.I0.max)),t[n]=i}return t},{}))},he=(o,l,a)=>{let e=g.nK();return["string","uid","text","richtext","email","password","enumeration"].includes(o)&&(e=g.Z_()),o==="json"&&(e=g.nK(m.I0.json).test("isJSON",m.I0.json,t=>{if(!t||!t.length)return!0;try{return JSON.parse(t),!0}catch{return!1}}).nullable().test("required",m.I0.required,t=>!(l.required&&(!t||!t.length)))),o==="email"&&(e=e.email(m.I0.email)),["number","integer","float","decimal"].includes(o)&&(e=g.Rx().transform(t=>X()(t)?void 0:t).typeError()),o==="biginteger"&&(e=g.Z_().matches(/^-?\d*$/)),["date","datetime"].includes(o)&&(e=g.hT()),Object.keys(l).forEach(t=>{const n=l[t];if(n||!le()(n)&&Number.isInteger(Math.floor(n))||n===0)switch(t){case"required":{a.isDraft||(o==="password"&&a.isCreatingEntry&&(e=e.required(m.I0.required)),o!=="password"&&(a.isCreatingEntry?e=e.required(m.I0.required):e=e.test("required",m.I0.required,r=>r===void 0&&!a.isFromComponent?!0:(0,ee.Z)(o)?r===0?!0:!!r:o==="boolean"?r!=null:o==="date"||o==="datetime"?typeof r=="string"?!z()(r):!z()(r?.toString()):!z()(r))));break}case"max":{o==="biginteger"?e=e.isInferior(m.I0.max,n):e=e.max(n,m.I0.max);break}case"maxLength":e=e.max(n,m.I0.maxLength);break;case"min":{o==="biginteger"?e=e.isSuperior(m.I0.min,n):e=e.min(n,m.I0.min);break}case"minLength":{a.isDraft||(e=e.min(n,m.I0.minLength));break}case"regex":e=e.matches(new RegExp(n),{message:m.I0.regex,excludeEmptyString:!l.required});break;case"lowercase":["text","textarea","email","string"].includes(o)&&(e=e.strict().lowercase());break;case"uppercase":["text","textarea","email","string"].includes(o)&&(e=e.strict().uppercase());break;case"positive":(0,ee.Z)(o)&&(e=e.positive());break;case"negative":(0,ee.Z)(o)&&(e=e.negative());break;default:e=e.nullable()}}),e};var me=te},73347:function(j,D,s){s.d(D,{Z:function(){return f}});function f(p){return["integer","biginteger","decimal","float","number"].includes(p)}}}]);
